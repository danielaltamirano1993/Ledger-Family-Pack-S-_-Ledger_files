function EndlessScroll(e){function t(e,t,n,r,s,a){this.page=1,this.per_page=e,this._controller=t,this.loader=n,this.inviewCallbackFunction=r,this.isButton=s,this.loadIndicator=a,o.call(this),i.call(this)}function o(){if(this.isButton){var t=this;e.addEventListener(this.loader,"click",function(){t.loadIndicator&&(e.addClass(t.loader,"yotpo-hidden"),e.removeClass(t.loadIndicator,"yotpo-hidden")),t.inviewCallbackFunction.call(t)})}}function i(){this.isButton?this.loadIndicator&&(e.addClass(this.loadIndicator,"yotpo-hidden"),e.removeClass(this.loader,"yotpo-hidden")):e.currentInview.register(this.loader,this.inviewCallbackFunction)}function n(e){this.batchCallbackFunction(e),i.call(this)}return t.prototype.getNextPage=function(e,t){this.batchCallbackFunction=t,this.page++,e.params||(e.params={}),e.params.page=this.page,e.params.per_page=this.per_page,this._controller.getBatch(n.bind(this),[e])},t.prototype.ignoreLoader=function(t){t?e.addClass(this.loader,"yotpo-ignore-inview"):e.removeClass(this.loader,"yotpo-ignore-inview")},t}function Room(e){this.me=e.me,this.signalServer=e.signalServer,this.iceServers=e.iceServers,this.id,this.signal,this.stream,this.peers={},this.channels={},this.handles={}}Yotpo=function(){function e(t,o){if(this.appKey=t,this.userSettings=o,this.widgets=[],this.shouldInitialize=!0,this.initialized=!1,this.allWidgetsReadyCallback=[],!this.userSettings.load_only_widgets_on_page||this.userSettings.load_css_async){var i=y.call(this);i||v.call(this)}b.call(this),"undefined"!=typeof yotpoTrackConversionData&&(u.call(this),e.Libraries.Tracker.trackConversionOrder(t,yotpoTrackConversionData),this.shouldInitialize=!1)}function t(){var t=this;e.forEach(Object.keys(e.widgets),function(e){l.call(t,e)})}function o(){var t=r(this.userSettings.testimonials),o=s.call(this,t,this.userSettings.load_css_async),a=this.userSettings.load_css_async;a?e.loadScript(o,document.body,n.bind(this)):i.call(this,o)}function i(t){var o=this;e.ajax(t,function(t){if(!t)return void e.safeConsole("Missing widgets data");var i=JSON.parse(t);a.call(o,i.JsContent,i.CssContent),n.call(o)})}function n(){t.call(this),this.getWidgets().length>0&&g.call(this)}function r(t){var o=t?["testimonials"]:[];return e.forEach(Object.keys(e.widgets),function(t){var i=e.widgets[t].selector;document.querySelector(i)&&o.push(t)}),o}function s(t){var o,i=this.userSettings.load_css_async?".js":".json",n=e.getWidgetHost(this.getUserSetting("host"))+"/"+this.getAppKey()+"/widget_loader"+i;this.getUserSetting("version")&&(n+="?widget_version="+this.getUserSetting("version"),o=!0);var r=t.sort().join(",");return n+=o?"&widgets="+r:"?widgets="+r,this.userSettings.load_css_async&&(n+="&load_only_js=true"),n}function a(t,o){e.injectScript(t,document.body);var i=!y.call(this);i&&e.injectCSS(o,document.body)}function l(t){try{if(e.Widgets)for(var o=e.Widgets[e.camelize(t)]||e.Widgets.Basic,i=document.querySelectorAll(o.selector||".yotpo."+t),n=0;n<i.length;++n)e.Element.get(i[n]).is("new")&&this.addWidget(new o(this,i[n],t));!i.length&&"undefined"!=typeof o.createsElement&&o.createsElement(this.getUserSettings())&&this.addWidget(new o(this))}catch(r){e.safeConsole(r.message)}}function c(){this.pageSku&&this.productName&&this.getUserSetting("widget_rich_snippet")&&this.getBatch(function(e){e=JSON.parse(e);var t=e[0].result;document.getElementsByTagName("head")[0].insertAdjacentHTML("afterbegin",t)},[{method:"rich_snippet",params:{pid:this.pageSku,name:this.productName,price:this.productPrice,currency:this.productCurrency}}])}function d(){var e=document.querySelectorAll(".yotpo-user-reference");e.length&&(this.userReference=e[0].getAttribute("data-user-reference"))}function u(){this.analytics=new e.Analytics(this),e.currentAnalytics=this.analytics,this.inview=new e.Inview(this),e.currentInview=this.inview,e.hoverAnalytics=new e.HoverIntervalEvent({interval:1e3}),e.testingGroupsHandler=new e.TestingGroupsHandler(this),e.currentAnalytics.trackPageView()}function p(){for(var t,o,i,n=document.querySelectorAll(e.widgets.main.selector),r=0;r<n.length;r++)if(i=n[r],o=i.getAttribute("data-product-id"),t="undefined"==typeof t?o:t,t!==o){t=void 0;break}t&&(this.pageSku=t,this.productName=i.getAttribute("data-name"),this.productPrice=i.getAttribute("data-price"),this.productCurrency=i.getAttribute("data-currency"))}function g(){var t=this,o=[];e.forEach(t.getWidgets(),function(t){return t.is("initialized")||t.is("processing")?void e.testingGroupsHandler.setSeoClient(!0):(t.state("processing"),void o.push({method:t.getMethod(),params:t.getSettings()}))}),e.testingGroupsHandler.initialize(),t.getBatch(function(o){h.call(t,o),f.call(t),e.addEventListener(window,"resize",function(){m.call(t);for(var e=t.getWidgets(),o=0;o<e.length;o++)e[o].trigger("resize")}),t.trigger("ready")},o,S)}function h(t){var o=[];try{o=JSON.parse(t);for(var i=-1,n=0;n<o.length;n++)if("main_widget"==o[n].method){i=n;break}if(i>=0){var r=document.createElement("div");r.innerHTML=o[i].result,r.getElementsByClassName("yotpo-promoted-product").length>0&&(w(r.getElementsByClassName("yotpo-promoted-product")),o[i].result=r.innerHTML)}}catch(s){e.safeConsole(s.message)}for(var a=this.getWidgets(),n=0;n<a.length;n++){var l=a[n];if(l.getElement()){if(!l.is("initialized")){var c=o.shift();c&&(l.getElement().innerHTML=c.result)}l.is("initialized")&&!l.is("ready")&&(l.trigger("ready"),l.state("ready"))}else e.safeConsole("Div not found in the Dom.")}}function m(){e.forEach(this.getWidgets(),function(t){var o,i,n,r,s="";for(i=t.getLayout(),n=r=t.getElement();r&&0==(o=r.offsetWidth);)r=r.parentNode;if("old"===i)e.removeClass(n,"yotpo-medium"),e.removeClass(n,"yotpo-small"),510>=o?s="yotpo-small":655>=o&&(s="yotpo-medium"),""!=s&&e.addClass(n,s),t.trigger("sizeCalculated",s);else if("new"===i){var a=e.Helpers.WidthClass.getWidgetWidthClasses();s=e.Helpers.WidthClass.getWidgetWidthClass(o),e.hasClass(n,s)||(e.removeClassList(n,a),e.addClass(n,s)),t.trigger("sizeCalculated",s)}})}function f(){var t=this,o=document.getElementsByClassName("yotpo-display-wrapper")[0];"undefined"==typeof o||"visible"==e.getVisibilityStyle(o)?m.call(t):setTimeout(function(){f.call(t)},50)}function y(){var e=this.getUserSetting("css_custom_host");if(!e)return!1;for(var t=document.styleSheets,o=0;o<t.length;++o)if(t[o].href){var i=t[o].href.replace(/https?:\/\//,"");if(i.indexOf(e)>-1)return!0}return!1}function v(){var t=this.getUserSetting("demo"),o=this.getUserSetting("info"),i=this.getUserSetting("css_preview"),n=this.getUserSetting("css_version")||this.getUserSetting("version"),r=this.getUserSetting("use_final_overrides"),s=this.getUserSetting("hard_refresh"),a=e.getWidgetHost(this.getUserSettings().host)+"/"+this.getAppKey()+"/widget.css?widget_version="+n;"undefined"!=typeof t&&(a+="&demo=true"),"undefined"!=typeof o&&(a+="&info="+window.encodeURIComponent(o)),"undefined"!=typeof i&&(a+="&css_preview="+i),"undefined"!=typeof r&&(a+="&use_final_overrides="+r),"undefined"!=typeof s&&"true"==s&&(a+="&rand="+(1e6*Math.random()|0));var l=document.getElementsByTagName("head")[0],c=document.createElement("link");c.type="text/css",c.rel="stylesheet",c.href=a;var d=this;c.onload=function(){d.trigger("CssReady")},l.appendChild(c)}function w(e){for(var t=[],o=0;o<e.length;o++)""!=e[o].dataset.position&&(t[o]=e[o].dataset.position);var i=!1,n=t.reduce(function(e,t){return"undefined"==typeof e[t]?e[t]=1:(e[t]+=1,i=!0),e},{});if(i){var r={};for(var s in n)r[s]=1==n[s]?1:Math.floor(Math.random()*n[s])+1;for(var a=0,o=0;o<e.length;o++)0==o||e[o].dataset.position!=e[o-1].dataset.position?a=1:a+=1,r[e[o].dataset.position]!=a&&(e[o].dataset.to_delete=!0);for(var o=e.length-1;o>=0;o--)e[o].dataset.to_delete&&e[o].parentNode.remove()}}function b(){var t=this.getUserSetting("ads"),o=this.getUserSetting("facebook_ads");if(t&&o&&parseInt(o.settings.pixel_id)&&1==o.settings.init_pixel){var i="undefined"!=typeof yotpoTrackConversionData?yotpoTrackConversionData:null;e.Libraries.Tracker.fbTracking(o.settings,i)}}function _(){var t=this;e.forEach(["ready"],function(e){t.on(e,function(){t.setState(e)})})}function S(){for(var e=0;e<this.allWidgetsReadyCallback.length;e++)this.allWidgetsReadyCallback[e].call()}return e.batchType="POST",e.isIE10OrLess=-1!=navigator.userAgent.indexOf("MSIE"),e.isIE8=e.isIE10OrLess&&8==parseInt(navigator.userAgent.toLowerCase().split("msie")[1]),e.isIEEdge=/Edge\/12./i.test(navigator.userAgent),e.isIE11=navigator.userAgent.indexOf("Trident/7.0")>0,e.isIEFamily=e.isIE10OrLess||e.isIE11||e.isIEEdge,e.dynamicCreateType="POST",e.globals={},e.hosts={widget:{dynamic:"w2.yotpo.com","static":"staticw2.yotpo.com"},api:{dynamic:"api.yotpo.com"},b2b:{dynamic:"my.yotpo.com"},reviews_me:{dynamic:"reviews.me"},base:{dynamic:"yotpo.com"}},e.getWidgetHost=function(e){return"//"+(this.hosts.widget[e]||this.hosts.widget["static"])},e.getApiHost=function(e){return"//"+(this.hosts.api[e]||this.hosts.api.dynamic)},e.texts={},e.filterAndSearch={filters_state_manager:{aggregators_types:{}}},e.widgets={main:{selector:".yotpo.yotpo-main-widget"},bottomline:{selector:".yotpo.bottomLine"},embedded:{selector:".yotpo.embedded-widget"},badge:{selector:".yotpo.badge,.yotpo.yotpo-badge"},"questions-bottomline":{selector:".yotpo.QABottomLine"},carousels:{selector:".yotpo.yotpo-reviews-carousel"},slider:{selector:".yotpo.yotpo-slider"},"visual-carousel":{selector:".yotpo.yotpo-visual-carousel"},"pictures-gallery":{selector:".yotpo.yotpo-pictures-gallery"},"pictures-widget":{selector:".yotpo.yotpo-pictures-widget"},"shoppable-gallery":{selector:".yotpo.yotpo-shoppable-gallery"},testimonials:{selector:"#yotpo-testimonials-custom-tab,.yotpo.testimonials"},"single-video":{selector:".yotpo.yotpo-single-video"},"shop-advisor":{selector:".yotpo.y-shop-advisor"},"shoppers-say":{selector:".yotpo.yotpo-shoppers-say"}},e.getMainWidget=function(t){if(t instanceof e){for(var o,i=t.getWidgetsByName("Main"),n=0;n<i.length;n++)if(i[n].settings&&"questions"!=i[n].settings.mode){o=i[n];break}return o}return t instanceof e.Widgets.Main?t:null},e.scrollToReviewsTabInMainWidget=function(t,o){o=o||!1;var i=this.getMainWidget(t),n=i.get("tabs").getTab("reviews");e.simulateClickEvent(n),o?e.Animations.scrollToElement(i.element,500):i.getElement().scrollIntoView()},e.prototype.on=function(t,o){e.Modules.Event.on.call(this,t,o)},e.prototype.onAllWidgetsReady=function(e){this.allWidgetsReadyCallback.push(e)},e.prototype.trigger=function(t,o){e.Modules.Event.trigger.call(this,t,o)},e.prototype.setState=function(e){this.state=e},e.prototype.getState=function(){return this.state},e.prototype.getWidgetByName=function(t){var o=null;return e.forEach(this.getWidgets(),function(i){e.Widgets[t]&&i instanceof e.Widgets[t]&&(o=i)}),o},e.prototype.getWidgetsByName=function(t){var o=[];return e.forEach(this.getWidgets(),function(i){i instanceof e.Widgets[t]&&o.push(i)}),o},e.prototype.getWidgetsByNames=function(t){var o=[];return e.forEach(this.getWidgets(),function(i){for(var n=0;n<t.length;n++)i instanceof e.Widgets[t[n]]&&o.push(i)}),o},e.prototype.getAppKey=function(){return this.appKey},e.prototype.getUserSettings=function(){return this.userSettings},e.prototype.getUserSetting=function(e){return this.userSettings[e]},e.prototype.getWidgets=function(){return this.widgets},e.prototype.getTrustedVendorsData=function(){var e={},t={"data-user-name":"display_name","data-user-email":"email","data-signature":"signature","data-time-stamp":"time_stamp","data-reviewer-type":"reviewer_type","data-reviewer-badge":"reviewer_badge"},o=document.querySelectorAll(".yotpo-signed-data")[0];if(o)for(var i in t){var n=o.getAttribute(i);n&&(e[t[i]]=n)}return e},e.prototype.addWidget=function(t){this.widgets.push(t),e.Element.get(t.getElement()).set("state","initialized")},e.prototype.getUserReference=function(){return this.userReference},e.prototype.getBatch=function(t,o,i){function n(e,o){var n=o.page,s=[];u+=1,d[n]=e.substring(0,e.length-1).substring(1),u==c&&(s="["+d.join(",")+"]",t(s),i&&i.call(r),r.trigger("BatchReady"))}var r=this;if(!o)return e.safeConsole("getBatch: no methods provided"),!1;if(o.length>0)for(var s,a,l=e.maxBatchMethods,c=Math.ceil(o.length/l),d=[],u=0,p=0,g=o.length;g>p;p+=l){var h=e.getWidgetHost(this.getUserSetting("host"))+"/batch";s=o.slice(p,p+l),a={methods:JSON2.stringify(s),app_key:this.getAppKey(),is_mobile:e.isMobile(),widget_version:this.getUserSetting("version")};var m;e.testingGroupsHandler&&(m=e.testingGroupsHandler.getTestingGroupsForServer()),m&&(a.features_testing_groups=JSON.stringify(m)),"undefined"!=typeof this.getUserSetting("demo")&&"undefined"!=typeof this.getUserSetting("info")&&(a.info=this.getUserSetting("info"),a.demo=!0),a=e.convertHashToQueryStringParams(a),"GET"==e.batchType&&(h+="?"+a),e.ajax(h,n,e.batchType,a,{page:p/l})}else t.call(this,"[]"),i&&i.call(this),r.trigger("BatchReady")},e.prototype.init=function(){return!this.initialized&&this.shouldInitialize&&(this.initialized=!0,e.Element.clear(),p.call(this),c.call(this),u.call(this),_.call(this),this.userSettings.load_only_widgets_on_page?o.call(this):this.initWidgets(),d.call(this)),this},e.prototype.init_for_async=function(){return!this.initialized&&this.shouldInitialize&&(this.initialized=!0,e.Element.clear(),p.call(this),c.call(this),u.call(this),_.call(this),d.call(this)),this},e.prototype.initWidgets=function(){t.call(this),g.call(this)},e.prototype.clean=function(){e.forEach(this.getWidgets(),function(e){for(var t=e.getElement();t.hasChildNodes();)t.removeChild(t.firstChild)})},e.prototype.updateContent=function(){this.clean(),g.call(this)},e.prototype.refreshWidgets=function(){this.inview.unbindEvents(),this.clean(),this.widgets=[],this.allWidgetsReadyCallback=[],this.initialized=!1,this.shouldInitialize=!0,this.init()},e.prototype.trackEvent=function(e,t,o,i){this.analytics.trackEvent(e,t,o,i)},e.prototype.trackPageView=function(){this.analytics.trackPageView()},e}(),Yotpo.Element=function(){function e(e){this.attributes={id:++t,element:e,state:"new"},e.setAttribute("data-yotpo-element-id",this.get("id"))}var t=0,o={};return e.prototype.get=function(e){return this.attributes[e]},e.prototype.set=function(e,t){this.attributes[e]=t},e.prototype.is=function(e){return this.get("state")==e},e.get=function(t){var i=+t.getAttribute("data-yotpo-element-id");if(!o[i]){var n=new e(t);i=n.get("id"),o[i]=n}return o[i]},e.clear=function(){for(var e in o)o.hasOwnProperty(e)&&(o[e].get("element").removeAttribute("data-yotpo-element-id"),delete o[e])},e}(Yotpo),Yotpo.escapeHtml=function(e){return e=e.trim(),""==e?e:e.replace(/ +(?= )/g,"").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},Yotpo.validateStringMaxLength=function(e,t){return t=t||150,null==e||e.length>t?!1:!0},Yotpo.appendChildElements=function(e,t){for(;e.childNodes.length>0;)t.appendChild(e.childNodes[0])},Yotpo.validateStringMaxWords=function(e,t){if(t=t||150,"string"!=typeof e)return!1;var o=e.match(/\S+/g);return o=o?o.length:0,t>=o},Yotpo.validateStringMinLength=function(e,t){return t=t||1,null==e||e.length<t?!1:!0},Yotpo.validateEmail=function(e){var t=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)},Yotpo.capitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Yotpo.camelize=function(e){for(var t=e.split("-"),o=Yotpo.capitalize(t[0]),i=1;i<t.length;i++)o+=Yotpo.capitalize(t[i]);return o},Yotpo.getIEVersion=function(){var e=navigator.userAgent,t=/MSIE\s?(\d+)(?:\.(\d+))?/i,o=e.match(t);return null!=o?{major:o[1],minor:o[2]}:{major:"-1",minor:"-1"}},Yotpo.ready=function(e){Yotpo.isIE10OrLess&&10!=Yotpo.getIEVersion().major||"interactive"!==document.readyState?"complete"===document.readyState?setTimeout(function(){e()},1):document.addEventListener?document.addEventListener("DOMContentLoaded",function(){e()},!1):document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&e()}):setTimeout(function(){e()},1)},Yotpo.rotate=function(e){if("WebkitTransform"in document.body.style||"MozTransform"in document.body.style||"OTransform"in document.body.style||"transform"in document.body.style){var t,o,i,n,r=2*Math.PI/360,s=e*r,a=Math.cos(s),l=Math.sin(s);t=parseFloat(a).toFixed(8),o=parseFloat(-l).toFixed(8),i=parseFloat(l).toFixed(8),n=parseFloat(a).toFixed(8);var c="progid:DXImageTransform.Microsoft.Matrix(M11="+t+", M12="+o+", M21="+i+", M22="+n+",sizingMethod='auto expand')";return{filter:c,"-moz-transform":"rotate("+e+"deg)","-webkit-transform":"rotate("+e+"deg)","-o-transform":"rotate("+e+"deg)","-ms-transform":"rotate("+e+"deg)"}}return!1},Yotpo.hasClass=function(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)},Yotpo.addClass=function(e,t){e.classList?e.classList.add(t):e.className+=" "+t},Yotpo.removeClass=function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")},Yotpo.removeClassList=function(e,t){for(var o=0;o<t.length;o++)Yotpo.removeClass(e,t[o])},Yotpo.toggleClass=function(e,t){Yotpo.hasClass(e,t)?Yotpo.removeClass(e,t):Yotpo.addClass(e,t)},Yotpo.addEventListener=function(e,t,o){e.addEventListener?e.addEventListener(t,o,!1):e.attachEvent&&e.attachEvent("on"+t,o)},Yotpo.removeEventListener=function(e,t,o){e.removeEventListener?e.removeEventListener(t,o,!1):e.detachEvent&&e.detachEvent("on"+t,o)},Yotpo.copy=function(e,t){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},Yotpo.toggleVisibility=function(e,t){t=t||"inline-block",e.style.display="none"==Yotpo.getDisplayStyle(e)?t:"none"},Yotpo.getDisplayStyle=function(e){return e.currentStyle?e.currentStyle.display:window.getComputedStyle?window.getComputedStyle(e,null).getPropertyValue("display"):null},Yotpo.getVisibilityStyle=function(e){return e?e.currentStyle?e.currentStyle.visibility:window.getComputedStyle?window.getComputedStyle(e,null).getPropertyValue("visibility"):null:!1},Yotpo.getComputedStyle=function(e,t){return e?e.currentStyle?e.currentStyle[t]:window.getComputedStyle?window.getComputedStyle(e,null).getPropertyValue(t):null:null},Yotpo.getComputedMargins=function(e){return{top:parseInt(Yotpo.getComputedStyle(e,"margin-top").replace("px",""),10),left:parseInt(Yotpo.getComputedStyle(e,"margin-left").replace("px",""),10),right:parseInt(Yotpo.getComputedStyle(e,"margin-right").replace("px",""),10),bottom:parseInt(Yotpo.getComputedStyle(e,"margin-bottom").replace("px",""),10)}},Yotpo.show=function(e,t){e.style.display=t?t:"inline-block",Yotpo.removeClass(e,"yotpo-hidden")},Yotpo.hide=function(e){e.style.display="none",Yotpo.addClass(e,"yotpo-hidden")},Yotpo.remove=function(e){e.parentNode.removeChild(e)},Yotpo.getStyle=function(e,t){if(e.currentStyle)var o=e.currentStyle[t];else if(window.getComputedStyle)var o=document.defaultView.getComputedStyle(e,null).getPropertyValue(t);return o},Yotpo.isHidden=function(e){return!Yotpo.isIE10OrLess&&e.classList?null===e.offsetParent&&e!=document.body:"none"==Yotpo.getStyle(e,"display")||"hidden"==Yotpo.getStyle(e,"visibilty")},Yotpo.localStorage=localStorage||{getItem:function(e){return Yotpo.storage=Yotpo.storage||{},Yotpo.storage[e]},setItem:function(e,t){Yotpo.storage=Yotpo.storage||{},Yotpo.storage[e]=t},removeItem:function(e){Yotpo.storage=Yotpo.storage||{},delete Yotpo.storage[e]}},Yotpo.bindAnimation=function(e,t){var o=t||e.getAttribute("data-type"),i=null,n=e.getAttribute("data-target-container");n&&(i=Yotpo.Modules.Helper.findAncestorByClass(e,n)),i||(i=e.parentNode.parentNode.parentNode);var r=i.getElementsByClassName(e.getAttribute("data-target"));0==r.length&&(r=i.querySelectorAll(e.getAttribute("data-target")));for(var s=Math.min(parseInt(e.getAttribute("data-limit")||r.length),r.length),a=0;s>a;++a)Yotpo.Animations[o](r[a]);parseInt(e.getAttribute("data-limit"))>=r.length&&Yotpo.addClass(e,"yotpo-hidden")},Yotpo.supportTouch=function(){return"ontouchstart"in document.documentElement},Yotpo.togglePreLoader=function(e){var t=e.querySelectorAll(".yotpo-preloader-wrapper");if(t.length>0){var o=t[0];Yotpo.toggleVisibility(o)}return!1},Yotpo.setSearchInProgressDisplayStatus=function(e,t){var o=e.querySelector(".search-in-progress"),i=e.querySelector(".yotpo-reviews");o&&i&&(t?(Yotpo.show(o),Yotpo.hide(i)):(Yotpo.hide(o),Yotpo.show(i,"block")))},Yotpo.scrollTo=function(e,t,o,i,n){var r=i?e.scrollHeight>t&&t>=0:!0;if(r){var s=i?e.scrollTop:e.scrollLeft,a=t-s,l=0,c=20,d=function(){l+=c;var t=Math.easeInOutQuad(l,s,a,o);i?e.scrollTop=t:e.scrollLeft=t,o>l?setTimeout(d,c):"function"==typeof n&&n()};Math.easeInOutQuad=function(e,t,o,i){return e/=i/2,1>e?o/2*e*e+t:(e--,-o/2*(e*(e-2)-1)+t)},d()}},Yotpo.moveTo=function(e,t,o,i,n){var r=0,s=t-r,a=0,l=20,c=function(){a+=l;var t=Math.easeInOutQuad(a,r,s,o);t=parseInt(t),"right"==i?e.style.right=t+"px":e.style.left=t+"px",o>a?setTimeout(c,l):"function"==typeof n&&n()};Math.easeInOutQuad=function(e,t,o,i){return e/=i/2,1>e?o/2*e*e+t:(e--,-o/2*(e*(e-2)-1)+t)},c()},Yotpo.scrollToTop=function(e){if(e.offsetParent&&e.offsetParent.scrollTop>0&&e.offsetParent!==document.body)Yotpo.scrollTo(e.offsetParent,0,1300,!0);else{var t=document.documentElement.scrollTop>0?document.documentElement:document.body;Yotpo.scrollTo(t,e.getBoundingClientRect().top+t.scrollTop,1300,!0)}},Yotpo.mobileCheck=function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},Yotpo.isMobile=function(){if(this.mobileCheck())return!0;var e=/ipad|ipad.*mobile|android.*nexus[\s]+(7|10)|^.*android.*nexus(?:(?!mobile).)*$|samsung.*tablet|galaxy.*tab|sc-01c|gt-p1000|gt-p1003|gt-p1010|gt-p3105|gt-p6210|gt-p6800|gt-p6810|gt-p7100|gt-p7300|gt-p7310|gt-p7500|gt-p7510|sch-i800|sch-i815|sch-i905|sgh-i957|sgh-i987|sgh-t849|sgh-t859|sgh-t869|sph-p100|gt-p3100|gt-p3108|gt-p3110|gt-p5100|gt-p5110|gt-p6200|gt-p7320|gt-p7511|gt-n8000|gt-p8510|sgh-i497|sph-p500|sgh-t779|sch-i705|sch-i915|gt-n8013|gt-p3113|gt-p5113|gt-p8110|gt-n8010|gt-n8005|gt-n8020|gt-p1013|gt-p6201|gt-p7501|gt-n5100|gt-n5105|gt-n5110|shv-e140k|shv-e140l|shv-e140s|shv-e150s|shv-e230k|shv-e230l|shv-e230s|shw-m180k|shw-m180l|shw-m180s|shw-m180w|shw-m300w|shw-m305w|shw-m380k|shw-m380s|shw-m380w|shw-m430w|shw-m480k|shw-m480s|shw-m480w|shw-m485w|shw-m486w|shw-m500w|gt-i9228|sch-p739|sch-i925|gt-i9200|gt-i9205|gt-p5200|gt-p5210|gt-p5210x|sm-t311|sm-t310|sm-t310x|sm-t210|sm-t210r|sm-t211|sm-p600|sm-p601|sm-p605|sm-p900|sm-p901|sm-t217|sm-t217a|sm-t217s|sm-p6000|sm-t3100|sgh-i467|xe500|sm-t110|gt-p5220|gt-i9200x|gt-n5110x|gt-n5120|sm-p905|sm-t111|sm-t2105|sm-t315|sm-t320|sm-t320x|sm-t321|sm-t520|sm-t525|sm-t530nu|sm-t230nu|sm-t330nu|sm-t900|xe500t1c|sm-p605v|sm-p905v|sm-p600x|sm-p900x|sm-t210x|sm-t230|sm-t230x|sm-t325|gt-p7503|sm-t531|sm-t330|sm-t530|sm-t705c|sm-t535|sm-t331|kindle|silk.*accelerated|android.*\b(kfot|kftt|kfjwi|kfjwa|kfote|kfsowi|kfthwi|kfthwa|kfapwi|kfapwa|wfjwae)\b|windows nt [0-9.]+; arm;|hp slate 7|hp elitepad 900|hp-tablet|elitebook.*touch|hp 8|^.*padfone((?!mobile).)*$|transformer|tf101|tf101g|tf300t|tf300tg|tf300tl|tf700t|tf700kl|tf701t|tf810c|me171|me301t|me302c|me371mg|me370t|me372mg|me172v|me173x|me400c|slider sl101|\bk00f\b|tx201la|playbook|rim tablet|htc flyer|htc jetstream|htc-p715a|htc evo view 4g|pg41200|xoom|sholest|mz615|mz605|mz505|mz601|mz602|mz603|mz604|mz606|mz607|mz608|mz609|mz615|mz616|mz617|android.*nook|nookcolor|nook browser|bnrv200|bnrv200a|bntv250|bntv250a|bntv400|bntv600|logicpd zoom2|android.*; \b(a100|a101|a110|a200|a210|a211|a500|a501|a510|a511|a700|a701|w500|w500p|w501|w501p|w510|w511|w700|g100|g100w|b1-a71|b1-710|b1-711|a1-810|a1-830)\b|w3-810|\ba3-a10\b|android.*(at100|at105|at200|at205|at270|at275|at300|at305|at1s5|at500|at570|at700|at830)|toshiba.*folio|\bl-06c|lg-v900|lg-v500|lg-v909|lg-v500|lg-v510|lg-vk810\b|android.*\b(f-01d|f-02f|f-05e|f-10d|m532|q572)\b|pmp3170b|pmp3270b|pmp3470b|pmp7170b|pmp3370b|pmp3570c|pmp5870c|pmp3670b|pmp5570c|pmp5770d|pmp3970b|pmp3870c|pmp5580c|pmp5880d|pmp5780d|pmp5588c|pmp7280c|pmp7280c3g|pmp7280|pmp7880d|pmp5597d|pmp5597|pmp7100d|per3464|per3274|per3574|per3884|per5274|per5474|pmp5097cpro|pmp5097|pmp7380d|pmp5297c|pmp5297c_quad|ideatab|thinkpad([ ]+)?tablet|lenovo.*(s2109|s2110|s5000|s6000|k3011|a3000|a1000|a2107|a2109|a1107|b6000|b8000|b8080-f)|android.*\b(tab210|tab211|tab224|tab250|tab260|tab264|tab310|tab360|tab364|tab410|tab411|tab420|tab424|tab450|tab460|tab461|tab464|tab465|tab467|tab468|tab07-100|tab07-101|tab07-150|tab07-151|tab07-152|tab07-200|tab07-201-3g|tab07-210|tab07-211|tab07-212|tab07-214|tab07-220|tab07-400|tab07-485|tab08-150|tab08-200|tab08-201-3g|tab08-201-30|tab09-100|tab09-211|tab09-410|tab10-150|tab10-201|tab10-211|tab10-400|tab10-410|tab13-201|tab274euk|tab275euk|tab374euk|tab462euk|tab474euk|tab9-200)\b|android.*\boyo\b|life.*(p9212|p9514|p9516|s9512)|lifetab|an10g2|an7bg3|an7fg3|an8g3|an8cg3|an7g3|an9g3|an7dg3|an7dg3st|an7dg3childpad|an10bg3|an10bg3dt|inm8002kp|inm1010fp|inm805nd|intenso tab|m702pro|megafon v9|\bzte v9\b|android.*\bmt7a\b|e-boda (supreme|impresspeed|izzycomm|essential)|allview.*(viva|alldro|city|speed|all tv|frenzy|quasar|shine|tx1|ax1|ax2)|\b(101g9|80g9|a101it)\b|qilive 97r|archos 101g10|archos 101 neon|novo7|novo8|novo10|novo7aurora|novo7basic|novo7paladin|novo9-spark|sony.*tablet|xperia tablet|sony tablet s|so-03e|sgpt12|sgpt13|sgpt114|sgpt121|sgpt122|sgpt123|sgpt111|sgpt112|sgpt113|sgpt131|sgpt132|sgpt133|sgpt211|sgpt212|sgpt213|sgp311|sgp312|sgp321|ebrd1101|ebrd1102|ebrd1201|sgp351|sgp341|sgp511|sgp512|sgp521|sgp541|sgp551|android.*(k8gt|u9gt|u10gt|u16gt|u17gt|u18gt|u19gt|u20gt|u23gt|u30gt)|cube u8gt|mid1042|mid1045|mid1125|mid1126|mid7012|mid7014|mid7015|mid7034|mid7035|mid7036|mid7042|mid7048|mid7127|mid8042|mid8048|mid8127|mid9042|mid9740|mid9742|mid7022|mid7010|m9701|m9000|m9100|m806|m1052|m806|t703|mid701|mid713|mid710|mid727|mid760|mid830|mid728|mid933|mid125|mid810|mid732|mid120|mid930|mid800|mid731|mid900|mid100|mid820|mid735|mid980|mid130|mid833|mid737|mid960|mid135|mid860|mid736|mid140|mid930|mid835|mid733|android.*(\bmid\b|mid-560|mtv-t1200|mtv-pnd531|mtv-p1101|mtv-pnd530)|android.*(rk2818|rk2808a|rk2918|rk3066)|rk2738|rk2808a|iq310|fly vision|bq.*(elcano|curie|edison|maxwell|kepler|pascal|tesla|hypatia|platon|newton|livingstone|cervantes|avant)|maxwell.*lite|maxwell.*plus|mediapad|mediapad 7 youth|ideos s7|s7-201c|s7-202u|s7-101|s7-103|s7-104|s7-105|s7-106|s7-201|s7-slim|\bn-06d|\bn-08d|pantech.*p4100|broncho.*(n701|n708|n802|a710)|touchpad.*[78910]|\btouchtab\b|z1000|z99 2g|z99|z930|z999|z990|z909|z919|z900|tb07sta|tb10sta|tb07fta|tb10fta|android.*\bnabi|kobo touch|\bk080\b|\bvox\b build|\barc\b build|dslide.*\b(700|701r|702|703r|704|802|970|971|972|973|974|1010|1012)\b|navipad|tb-772a|tm-7045|tm-7055|tm-9750|tm-7016|tm-7024|tm-7026|tm-7041|tm-7043|tm-7047|tm-8041|tm-9741|tm-9747|tm-9748|tm-9751|tm-7022|tm-7021|tm-7020|tm-7011|tm-7010|tm-7023|tm-7025|tm-7037w|tm-7038w|tm-7027w|tm-9720|tm-9725|tm-9737w|tm-1020|tm-9738w|tm-9740|tm-9743w|tb-807a|tb-771a|tb-727a|tb-725a|tb-719a|tb-823a|tb-805a|tb-723a|tb-715a|tb-707a|tb-705a|tb-709a|tb-711a|tb-890hd|tb-880hd|tb-790hd|tb-780hd|tb-770hd|tb-721hd|tb-710hd|tb-434hd|tb-860hd|tb-840hd|tb-760hd|tb-750hd|tb-740hd|tb-730hd|tb-722hd|tb-720hd|tb-700hd|tb-500hd|tb-470hd|tb-431hd|tb-430hd|tb-506|tb-504|tb-446|tb-436|tb-416|tb-146se|tb-126se|playstation.*(portable|vita)|st10416-1|vt10416-1|st70408-1|st702xx-1|st702xx-2|st80208|st97216|st70104-2|vt10416-2|st10216-2a|\b(ptbl10ceu|ptbl10c|ptbl72bc|ptbl72bceu|ptbl7ceu|ptbl7c|ptbl92bc|ptbl92bceu|ptbl9ceu|ptbl9cuk|ptbl9c)\b|android.* \b(e3a|t3x|t5c|t5b|t3e|t3c|t3b|t1j|t1f|t2a|t1h|t1i|e1c|t1-e|t5-a|t4|e1-b|t2ci|t1-b|t1-d|o1-a|e1-a|t1-a|t3a|t4i)\b |genius tab g3|genius tab s2|genius tab q3|genius tab g4|genius tab q4|genius tab g-ii|genius tab gii|genius tab giii|genius tab s1|android.*\bg1\b|funbook|micromax.*\b(p250|p560|p360|p362|p600|p300|p350|p500|p275)\b|android.*\b(a39|a37|a34|st8|st10|st7|smart tab3|smart tab2)\b|fine7 genius|fine7 shine|fine7 air|fine8 style|fine9 more|fine10 joy|fine11 wide|\b(pem63|plt1023g|plt1041|plt1044|plt1044g|plt1091|plt4311|plt4311pl|plt4315|plt7030|plt7033|plt7033d|plt7035|plt7035d|plt7044k|plt7045k|plt7045kb|plt7071kg|plt7072|plt7223g|plt7225g|plt7777g|plt7810k|plt7849g|plt7851g|plt7852g|plt8015|plt8031|plt8034|plt8036|plt8080k|plt8082|plt8088|plt8223g|plt8234g|plt8235g|plt8816k|plt9011|plt9045k|plt9233g|plt9735|plt9760g|plt9770g)\b|bq1078|bc1003|bc1077|rk9702|bc9730|bc9001|it9001|bc7008|bc7010|bc708|bc728|bc7012|bc7030|bc7027|bc7026|tpc7102|tpc7103|tpc7105|tpc7106|tpc7107|tpc7201|tpc7203|tpc7205|tpc7210|tpc7708|tpc7709|tpc7712|tpc7110|tpc8101|tpc8103|tpc8105|tpc8106|tpc8203|tpc8205|tpc8503|tpc9106|tpc9701|tpc97101|tpc97103|tpc97105|tpc97106|tpc97111|tpc97113|tpc97203|tpc97603|tpc97809|tpc97205|tpc10101|tpc10103|tpc10106|tpc10111|tpc10203|tpc10205|tpc10503|tx-a1301|tx-m9002|q702|kf026|tab-p506|tab-navi-7-3g-m|tab-p517|tab-p-527|tab-p701|tab-p703|tab-p721|tab-p731n|tab-p741|tab-p825|tab-p905|tab-p925|tab-pr945|tab-pl1015|tab-p1025|tab-pi1045|tab-p1325|tab-protab[0-9]+|tab-protab25|tab-protab26|tab-protab27|tab-protab26xl|tab-protab2-ips9|tab-protab30-ips9|tab-protab25xxl|tab-protab26-ips10|tab-protab30-ips10|ov-(steelcore|newbase|basecore|baseone|exellen|quattor|edutab|solution|action|basictab|teddytab|magictab|stream|tb-08|tb-09)|hcl.*tablet|connect-3g-2.0|connect-2g-2.0|me tablet u1|me tablet u2|me tablet g1|me tablet x1|me tablet y2|me tablet sync|dps dream 9|dps dual 7|v97 hd|i75 3g|visture v4( hd)?|visture v5( hd)?|visture v10|ctp(-)?810|ctp(-)?818|ctp(-)?828|ctp(-)?838|ctp(-)?888|ctp(-)?978|ctp(-)?980|ctp(-)?987|ctp(-)?988|ctp(-)?989|\bmt8125|mt8389|mt8135|mt8377\b|concorde([ ]+)?tab|concorde readman|goclever tab|a7goclever|m1042|m7841|m742|r1042bk|r1041|tab a975|tab a7842|tab a741|tab a741l|tab m723g|tab m721|tab a1021|tab i921|tab r721|tab i720|tab t76|tab r70|tab r76.2|tab r106|tab r83.2|tab m813g|tab i721|gcta722|tab i70|tab i71|tab s73|tab r73|tab r74|tab r93|tab r75|tab r76.1|tab a73|tab a93|tab a93.2|tab t72|tab r83|tab r974|tab r973|tab a101|tab a103|tab a104|tab a104.2|r105bk|m713g|a972bk|tab a971|tab r974.2|tab r104|tab r83.3|tab a1042|freetab 9000|freetab 7.4|freetab 7004|freetab 7800|freetab 2096|freetab 7.5|freetab 1014|freetab 1001 |freetab 8001|freetab 9706|freetab 9702|freetab 7003|freetab 7002|freetab 1002|freetab 7801|freetab 1331|freetab 1004|freetab 8002|freetab 8014|freetab 9704|freetab 1003|\b(argus[ _]?s|diamond[ _]?79hd|emerald[ _]?78e|luna[ _]?70c|onyx[ _]?s|onyx[ _]?z|orin[ _]?hd|orin[ _]?s|otis[ _]?s|speedstar[ _]?s|magnet[ _]?m9|primus[ _]?94[ _]?3g|primus[ _]?94hd|primus[ _]?qs|android.*\bq8\b|sirius[ _]?evo[ _]?qs|sirius[ _]?qs|spirit[ _]?s)\b|v07ot2|tm105a|s10ot1|tr10cs1|ezee[_']?(tab|go)[0-9]+|tablc7|looney tunes tab|smarttab([ ]+)?[0-9]+|smarttabii10|smart[ ']?tab[ ]+?[0-9]+|family[ ']?tab2|rm-790|rm-997|rmd-878g|rmd-974r|rmt-705a|rmt-701|rme-601|rmt-501|rmt-711|i-mobile i-note|tolino tab [0-9.]+|tolino shine|\bc-22q|t7-qc|t-17b|t-17p\b|android.* a78 |android.* (skypad|phoenix|cyclops)|tecno p9|android.*\b(f3000|a3300|jxd5000|jxd3000|jxd2000|jxd300b|jxd300|s5800|s7800|s602b|s5110b|s7300|s5300|s602|s603|s5100|s5110|s601|s7100a|p3000f|p3000s|p101|p200s|p1000m|p200m|p9100|p1000s|s6600b|s908|p1000|p300|s18|s6600|s9100)\b|tablet (spirit 7|essentia|galatea|fusion|onix 7|landa|titan|scooby|deox|stella|themis|argon|unique 7|sygnus|hexen|finity 7|cream|cream x2|jade|neon 7|neron 7|kandy|scape|saphyr 7|rebel|biox|rebel|rebel 8gb|myst|draco 7|myst|tab7-004|myst|tadeo jones|tablet boing|arrow|draco dual cam|aurix|mint|amity|revolution|finity 9|neon 9|t9w|amity 4gb dual cam|stone 4gb|stone 8gb|andromeda|silken|x2|andromeda ii|halley|flame|saphyr 9,7|touch 8|planet|triton|unique 10|hexen 10|memphis 4gb|memphis 8gb|onix 10)|fx2 pad7|fx2 pad10|kidspad 701|pad[ ]?712|pad[ ]?714|pad[ ]?716|pad[ ]?717|pad[ ]?718|pad[ ]?720|pad[ ]?721|pad[ ]?722|pad[ ]?790|pad[ ]?792|pad[ ]?900|pad[ ]?9715d|pad[ ]?9716dr|pad[ ]?9718dr|pad[ ]?9719qr|pad[ ]?9720qr|telepad1030|telepad1032|telepad730|telepad731|telepad732|telepad735q|telepad830|telepad9730|telepad795|megapad 1331|megapad 1851|megapad 2151|viewpad 10pi|viewpad 10e|viewpad 10s|viewpad e72|viewpad7|viewpad e100|viewpad 7e|viewsonic vb733|vb100a|loox|xeno10|odys space|captiva pad|nettab|nt-3702|nt-3702s|nt-3702s|nt-3603p|nt-3603p|nt-0704s|nt-0704s|nt-3805c|nt-3805c|nt-0806c|nt-0806c|nt-0909t|nt-0909t|nt-0907s|nt-0907s|nt-0902s|nt-0902s|hudl ht7s3|t-hub2|android.*\b97d\b|tablet(?!.*pc)|bntv250a|mid-wcdma|logicpd zoom2|\ba7eb\b|catnova8|a1_07|ct704|ct1002|\bm721\b|rk30sdk|\bevotab\b|m758a|et904|alumium10|smartfren tab|endeavour 1010|tablet-pc-4/i,t=/\biphone.*(mobile|phonegap)|\bipod|blackberry|\bbb10\b|rim[0-9]+|htc|htc.*(sensation|evo|vision|explorer|6800|8100|8900|a7272|s510e|c110e|legend|desire|t8282)|apx515ckt|qtek9090|apa9292kt|hd_mini|sensation.*z710e|pg86100|z715e|desire.*(a8181|hd)|adr6200|adr6400l|adr6425|001ht|inspire 4g|android.*\bevo\b|t-mobile g1|z520m|nexus one|nexus s|galaxy.*nexus|android.*nexus.*mobile|dell.*streak|dell.*aero|dell.*venue|dell.*venue pro|dell flash|dell smoke|dell mini 3ix|xcd28|xcd35|\b001dl\b|\b101dl\b|\bgs01\b|motorola|droidx|droid bionic|\bdroid\b.*build|android.*xoom|hri39|mot-|a1260|a1680|a555|a853|a855|a953|a955|a956|motorola.*electrify|motorola.*i1|i867|i940|mb200|mb300|mb501|mb502|mb508|mb511|mb520|mb525|mb526|mb611|mb612|mb632|mb810|mb855|mb860|mb861|mb865|mb870|me501|me502|me511|me525|me600|me632|me722|me811|me860|me863|me865|mt620|mt710|mt716|mt720|mt810|mt870|mt917|motorola.*titanium|wx435|wx445|xt300|xt301|xt311|xt316|xt317|xt319|xt320|xt390|xt502|xt530|xt531|xt532|xt535|xt603|xt610|xt611|xt615|xt681|xt701|xt702|xt711|xt720|xt800|xt806|xt860|xt862|xt875|xt882|xt883|xt894|xt901|xt907|xt909|xt910|xt912|xt928|xt926|xt915|xt919|xt925|samsung|sgh-i337|bgt-s5230|gt-b2100|gt-b2700|gt-b2710|gt-b3210|gt-b3310|gt-b3410|gt-b3730|gt-b3740|gt-b5510|gt-b5512|gt-b5722|gt-b6520|gt-b7300|gt-b7320|gt-b7330|gt-b7350|gt-b7510|gt-b7722|gt-b7800|gt-c3010|gt-c3011|gt-c3060|gt-c3200|gt-c3212|gt-c3212i|gt-c3262|gt-c3222|gt-c3300|gt-c3300k|gt-c3303|gt-c3303k|gt-c3310|gt-c3322|gt-c3330|gt-c3350|gt-c3500|gt-c3510|gt-c3530|gt-c3630|gt-c3780|gt-c5010|gt-c5212|gt-c6620|gt-c6625|gt-c6712|gt-e1050|gt-e1070|gt-e1075|gt-e1080|gt-e1081|gt-e1085|gt-e1087|gt-e1100|gt-e1107|gt-e1110|gt-e1120|gt-e1125|gt-e1130|gt-e1160|gt-e1170|gt-e1175|gt-e1180|gt-e1182|gt-e1200|gt-e1210|gt-e1225|gt-e1230|gt-e1390|gt-e2100|gt-e2120|gt-e2121|gt-e2152|gt-e2220|gt-e2222|gt-e2230|gt-e2232|gt-e2250|gt-e2370|gt-e2550|gt-e2652|gt-e3210|gt-e3213|gt-i5500|gt-i5503|gt-i5700|gt-i5800|gt-i5801|gt-i6410|gt-i6420|gt-i7110|gt-i7410|gt-i7500|gt-i8000|gt-i8150|gt-i8160|gt-i8190|gt-i8320|gt-i8330|gt-i8350|gt-i8530|gt-i8700|gt-i8703|gt-i8910|gt-i9000|gt-i9001|gt-i9003|gt-i9010|gt-i9020|gt-i9023|gt-i9070|gt-i9082|gt-i9100|gt-i9103|gt-i9220|gt-i9250|gt-i9300|gt-i9305|gt-i9500|gt-i9505|gt-m3510|gt-m5650|gt-m7500|gt-m7600|gt-m7603|gt-m8800|gt-m8910|gt-n7000|gt-s3110|gt-s3310|gt-s3350|gt-s3353|gt-s3370|gt-s3650|gt-s3653|gt-s3770|gt-s3850|gt-s5210|gt-s5220|gt-s5229|gt-s5230|gt-s5233|gt-s5250|gt-s5253|gt-s5260|gt-s5263|gt-s5270|gt-s5300|gt-s5330|gt-s5350|gt-s5360|gt-s5363|gt-s5369|gt-s5380|gt-s5380d|gt-s5560|gt-s5570|gt-s5600|gt-s5603|gt-s5610|gt-s5620|gt-s5660|gt-s5670|gt-s5690|gt-s5750|gt-s5780|gt-s5830|gt-s5839|gt-s6102|gt-s6500|gt-s7070|gt-s7200|gt-s7220|gt-s7230|gt-s7233|gt-s7250|gt-s7500|gt-s7530|gt-s7550|gt-s7562|gt-s7710|gt-s8000|gt-s8003|gt-s8500|gt-s8530|gt-s8600|sch-a310|sch-a530|sch-a570|sch-a610|sch-a630|sch-a650|sch-a790|sch-a795|sch-a850|sch-a870|sch-a890|sch-a930|sch-a950|sch-a970|sch-a990|sch-i100|sch-i110|sch-i400|sch-i405|sch-i500|sch-i510|sch-i515|sch-i600|sch-i730|sch-i760|sch-i770|sch-i830|sch-i910|sch-i920|sch-i959|sch-lc11|sch-n150|sch-n300|sch-r100|sch-r300|sch-r351|sch-r400|sch-r410|sch-t300|sch-u310|sch-u320|sch-u350|sch-u360|sch-u365|sch-u370|sch-u380|sch-u410|sch-u430|sch-u450|sch-u460|sch-u470|sch-u490|sch-u540|sch-u550|sch-u620|sch-u640|sch-u650|sch-u660|sch-u700|sch-u740|sch-u750|sch-u810|sch-u820|sch-u900|sch-u940|sch-u960|scs-26uc|sgh-a107|sgh-a117|sgh-a127|sgh-a137|sgh-a157|sgh-a167|sgh-a177|sgh-a187|sgh-a197|sgh-a227|sgh-a237|sgh-a257|sgh-a437|sgh-a517|sgh-a597|sgh-a637|sgh-a657|sgh-a667|sgh-a687|sgh-a697|sgh-a707|sgh-a717|sgh-a727|sgh-a737|sgh-a747|sgh-a767|sgh-a777|sgh-a797|sgh-a817|sgh-a827|sgh-a837|sgh-a847|sgh-a867|sgh-a877|sgh-a887|sgh-a897|sgh-a927|sgh-b100|sgh-b130|sgh-b200|sgh-b220|sgh-c100|sgh-c110|sgh-c120|sgh-c130|sgh-c140|sgh-c160|sgh-c170|sgh-c180|sgh-c200|sgh-c207|sgh-c210|sgh-c225|sgh-c230|sgh-c417|sgh-c450|sgh-d307|sgh-d347|sgh-d357|sgh-d407|sgh-d415|sgh-d780|sgh-d807|sgh-d980|sgh-e105|sgh-e200|sgh-e315|sgh-e316|sgh-e317|sgh-e335|sgh-e590|sgh-e635|sgh-e715|sgh-e890|sgh-f300|sgh-f480|sgh-i200|sgh-i300|sgh-i320|sgh-i550|sgh-i577|sgh-i600|sgh-i607|sgh-i617|sgh-i627|sgh-i637|sgh-i677|sgh-i700|sgh-i717|sgh-i727|sgh-i747m|sgh-i777|sgh-i780|sgh-i827|sgh-i847|sgh-i857|sgh-i896|sgh-i897|sgh-i900|sgh-i907|sgh-i917|sgh-i927|sgh-i937|sgh-i997|sgh-j150|sgh-j200|sgh-l170|sgh-l700|sgh-m110|sgh-m150|sgh-m200|sgh-n105|sgh-n500|sgh-n600|sgh-n620|sgh-n625|sgh-n700|sgh-n710|sgh-p107|sgh-p207|sgh-p300|sgh-p310|sgh-p520|sgh-p735|sgh-p777|sgh-q105|sgh-r210|sgh-r220|sgh-r225|sgh-s105|sgh-s307|sgh-t109|sgh-t119|sgh-t139|sgh-t209|sgh-t219|sgh-t229|sgh-t239|sgh-t249|sgh-t259|sgh-t309|sgh-t319|sgh-t329|sgh-t339|sgh-t349|sgh-t359|sgh-t369|sgh-t379|sgh-t409|sgh-t429|sgh-t439|sgh-t459|sgh-t469|sgh-t479|sgh-t499|sgh-t509|sgh-t519|sgh-t539|sgh-t559|sgh-t589|sgh-t609|sgh-t619|sgh-t629|sgh-t639|sgh-t659|sgh-t669|sgh-t679|sgh-t709|sgh-t719|sgh-t729|sgh-t739|sgh-t746|sgh-t749|sgh-t759|sgh-t769|sgh-t809|sgh-t819|sgh-t839|sgh-t919|sgh-t929|sgh-t939|sgh-t959|sgh-t989|sgh-u100|sgh-u200|sgh-u800|sgh-v205|sgh-v206|sgh-x100|sgh-x105|sgh-x120|sgh-x140|sgh-x426|sgh-x427|sgh-x475|sgh-x495|sgh-x497|sgh-x507|sgh-x600|sgh-x610|sgh-x620|sgh-x630|sgh-x700|sgh-x820|sgh-x890|sgh-z130|sgh-z150|sgh-z170|sgh-zx10|sgh-zx20|shw-m110|sph-a120|sph-a400|sph-a420|sph-a460|sph-a500|sph-a560|sph-a600|sph-a620|sph-a660|sph-a700|sph-a740|sph-a760|sph-a790|sph-a800|sph-a820|sph-a840|sph-a880|sph-a900|sph-a940|sph-a960|sph-d600|sph-d700|sph-d710|sph-d720|sph-i300|sph-i325|sph-i330|sph-i350|sph-i500|sph-i600|sph-i700|sph-l700|sph-m100|sph-m220|sph-m240|sph-m300|sph-m305|sph-m320|sph-m330|sph-m350|sph-m360|sph-m370|sph-m380|sph-m510|sph-m540|sph-m550|sph-m560|sph-m570|sph-m580|sph-m610|sph-m620|sph-m630|sph-m800|sph-m810|sph-m850|sph-m900|sph-m910|sph-m920|sph-m930|sph-n100|sph-n200|sph-n240|sph-n300|sph-n400|sph-z400|swc-e100|sch-i909|gt-n7100|gt-n7105|sch-i535|sm-n900a|sgh-i317|sgh-t999l|gt-s5360b|gt-i8262|gt-s6802|gt-s6312|gt-s6310|gt-s5312|gt-s5310|gt-i9105|gt-i8510|gt-s6790n|sm-g7105|sm-n9005|gt-s5301|gt-i9295|gt-i9195|sm-c101|gt-s7392|gt-s7560|gt-b7610|gt-i5510|gt-s7582|gt-s7530e|\blg\b;|lg[- ]?(c800|c900|e400|e610|e900|e-900|f160|f180k|f180l|f180s|730|855|l160|ls840|ls970|lu6200|ms690|ms695|ms770|ms840|ms870|ms910|p500|p700|p705|vm696|as680|as695|ax840|c729|e970|gs505|272|c395|e739bk|e960|l55c|l75c|ls696|ls860|p769bk|p350|p500|p509|p870|un272|us730|vs840|vs950|ln272|ln510|ls670|ls855|lw690|mn270|mn510|p509|p769|p930|un200|un270|un510|un610|us670|us740|us760|ux265|ux840|vn271|vn530|vs660|vs700|vs740|vs750|vs910|vs920|vs930|vx9200|vx11000|ax840a|lw770|p506|p925|p999|e612|d955|d802)|sonyst|sonylt|sonyericsson|sonyericssonlt15iv|lt18i|e10i|lt28h|lt26w|sonyericssonmt27i|asus.*galaxy|padfone.*mobile|micromax.*\b(a210|a92|a88|a72|a111|a110q|a115|a116|a110|a90s|a26|a51|a35|a54|a25|a27|a89|a68|a65|a57|a90)\b|palmsource|palm|vertu|vertu.*ltd|vertu.*ascent|vertu.*ayxta|vertu.*constellation(f|quest)?|vertu.*monika|vertu.*signature|pantech|im-a850s|im-a840s|im-a830l|im-a830k|im-a830s|im-a820l|im-a810k|im-a810s|im-a800s|im-t100k|im-a725l|im-a780l|im-a775c|im-a770k|im-a760s|im-a750k|im-a740s|im-a730s|im-a720l|im-a710k|im-a690l|im-a690s|im-a650s|im-a630k|im-a600s|vega ptl21|pt003|p8010|adr910l|p6030|p6020|p9070|p4100|p9060|p5000|cdm8992|txt8045|adr8995|is11pt|p2030|p6010|p8000|pt002|is06|cdm8999|p9050|pt001|txt8040|p2020|p9020|p2000|p7040|p7000|c790|iq230|iq444|iq450|iq440|iq442|iq441|iq245|iq256|iq236|iq255|iq235|iq245|iq275|iq240|iq285|iq280|iq270|iq260|iq250|i-mobile (iq|i-style|idea|zaa|hitz)|\b(sp-80|xt-930|sx-340|xt-930|sx-310|sp-360|sp60|spt-800|sp-120|spt-800|sp-140|spx-5|spx-8|sp-100|spx-8|spx-12)\b|tapatalk|pda;|sagem|\bmmp\b|pocket|\bpsp\b|symbian|smartphone|smartfon|treo|up.browser|up.link|vodafone|\bwap\b|nokia|series40|series60|s60|sonyericsson|n900|maui.*wap.*browser/i,o=navigator.userAgent||navigator.vendor||window.opera;
return 1==t.test(o)&&0==e.test(o)},Yotpo.compact=function(e){for(var t in e)!e.hasOwnProperty(t)||"undefined"!=typeof e[t]&&null!=e[t]||delete e[t];return e},Yotpo.forEach=function(e,t){if(Array.prototype.forEach)e.forEach(t);else{if("function"!=typeof t)throw new TypeError;for(var o=arguments.length>=2?arguments[1]:void 0,i=0;i<e.length;i++)i in e&&t.call(o,e[i],i,e)}},Yotpo.getElementText=function(e){return e.textContent||e.innerText},Yotpo.origin=function(){return window.location.origin||window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")},Yotpo.isArray="isArray"in Array?Array.isArray:function(e){var t=Object.prototype.toString.call(e);return"[object Array]"===t},Yotpo.preloadImages=function(e,t,o,i,n,r){var s=0,a=[];e=Yotpo.isArray(e)?e:[e];for(var l=function(){s+=1,s===e.length&&t&&t(o)},c=0;c<e.length;c++)a[c]=new Image,a[c].onabort=a[c].onerror=i?function(){try{i(n,this.dataImageId)}catch(e){}l()}:l,a[c].onload=function(t){return function(){r&&r(e[t].imageId,this),l()}}(c),a[c].src=e[c].url,a[c].dataImageId=e[c].imageId},Yotpo.getDefualtImage=function(){return{size_180:"http://staticw2.yotpo.com/assets/default_image_180px.jpg",size_656:"http://staticw2.yotpo.com/assets/default_image_656px.jpg",profile:"http://staticw2.yotpo.com/assets/default_profile.png"}},Yotpo.reportBrokenImages=function(e,t,o,i){var n=Yotpo.getApiHost()+"/v1/widget/"+e+"/images/broken",r=Yotpo.convertComplexObjectToQueryStringParams({image_ids:t,type:o,should_search_media:i});Yotpo.ajax(n,function(){},"POST",r)},Yotpo.emojiRegex=new RegExp("\ud83c[\udf00-\udfff]|\ud83d[\udc00-\ude4f]|\ud83d[\ude80-\udeff]","g"),Yotpo.getPosition=function(e){for(var t=0,o=0;e;){if("BODY"==e.tagName){var i=e.scrollLeft||document.documentElement.scrollLeft,n=e.scrollTop||document.documentElement.scrollTop;t+=e.offsetLeft-i+e.clientLeft,o+=e.offsetTop-n+e.clientTop}else t+=e.offsetLeft-e.scrollLeft+e.clientLeft,o+=e.offsetTop-e.scrollTop+e.clientTop;e=e.offsetParent}return{x:t,y:o}},Yotpo.simulateClickEvent=function(e){if(e.click)e.click();else if(document.createEvent){var t=document.createEvent("MouseEvents");t.initEvent("click",!0,!0),e.dispatchEvent(t)}},Yotpo.redirectToUrl=function(e){window.location=e},Yotpo.getStars=function(e){e=parseFloat(e);for(var t=document.createElement("div"),o=1;5>=o;o++){var i=document.createElement("span");i.className=e+.25>=o?"yotpo-icon yotpo-icon-star":e+.75>=o?"yotpo-icon yotpo-icon-half-star":"yotpo-icon yotpo-icon-empty-star",t.appendChild(i)}return t},Yotpo.debounce=function(e,t,o){var i;return function(){var n=this,r=arguments,s=function(){i=null,o||e.apply(n,r)},a=o&&!i;clearTimeout(i),i=setTimeout(s,t),a&&e.apply(n,r)}},Yotpo.injectScript=function(e,t){var o=document.createElement("script");o.setAttribute("type","text/javascript");var i=document.createTextNode(e);o.appendChild(i),t.appendChild(o)},Yotpo.injectCSS=function(e,t){var o=document.createElement("style"),i=document.createTextNode(e);o.appendChild(i),t.appendChild(o)},Yotpo.loadScript=function(e,t,o){var i=document.createElement("script");i.setAttribute("type","text/javascript"),i.src=e,i.onload=o,t.appendChild(i)},Yotpo.getURLParameter=function(e,t){return decodeURIComponent((new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)").exec(e)||[null,""])[1].replace(/\+/g,"%20"))||null},Yotpo.updateQueryStringParameter=function(e,t,o){var i=new RegExp("([?&])"+t+"=.*?(&|$)","i"),n=-1!==e.indexOf("?")?"&":"?";return e.match(i)?e.replace(i,"$1"+t+"="+o+"$2"):e+n+t+"="+o},Yotpo.safeConsole=function(){},Yotpo.getDefualtImage=function(){return Yotpo.defaultImages||{size_180:"",size_656:"",profile:""}},Yotpo.setHoverEnable=function(e){Yotpo.isMobile()||Yotpo.addClass(e,"yotpo-hover-enable")},Yotpo.isString=function(e){return"string"==typeof e||e instanceof String},Yotpo.isEmptyString=function(e){return Yotpo.isString(e)&&(0===e.length||!e.trim())},Yotpo.generateUUID=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var o=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?o:3&o|8).toString(16)})},Yotpo.removeUndefinedFields=function(e){return JSON.parse(JSON.stringify(e))},Yotpo.isMethodExists=function(e){return"function"==typeof e},Yotpo.toTitleCase=function(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},Yotpo.ajax=function(e,t,o,i,n,r){function s(e,t,o){var i=a();return i&&"withCredentials"in i?(i.open(e,t,!0),i.withCredentials="withCredentials"in o?o.withCredentials:!0,i.setRequestHeader("Accept","application/json","text/html")):"undefined"!=typeof XDomainRequest?(i=new XDomainRequest,i.onprogress=function(){},i.open(e,t)):i=null,i}function a(){if(window.XMLHttpRequest)return new XMLHttpRequest;try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(e){return null}}function l(e){var t;return t=e.getXhrAsResponse?d:d.responseText}function c(e,t){t||(t={},t["Content-type"]="application/x-www-form-urlencoded");for(var o in t)e.setRequestHeader(o,t[o])}r=r||{};var d=s(o?o:"GET",e,r);return d?(d.readyState?d.onreadystatechange=function(){if(4==d.readyState){var e=l(r);n?t(e,n):t(e)}}:d.onload=function(){var e=l(r);n?t(e,n):t(e)},d.onerror=function(){Yotpo.safeConsole("There was an error making the request.","error")},"POST"==o&&"withCredentials"in d&&c(d,r.requestHeaders),d.send(i),!0):(Yotpo.safeConsole("CORS not supported","error"),!1)},Yotpo.successfulResponse=function(e){return e.status>=200&&e.status<300},Yotpo.convertHashToQueryStringParams=function(e){var t=[];for(var o in e)e.hasOwnProperty(o)&&t.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]));return t.join("&")},Yotpo.convertComplexObjectToQueryStringParams=function(e,t){var o=[];for(var i in e)if(e.hasOwnProperty(i)){var n=t?t+"["+i+"]":i,r=e[i];o.push(null!==r&&"object"==typeof r?Yotpo.convertComplexObjectToQueryStringParams(r,n):encodeURIComponent(n)+"="+encodeURIComponent(r))}return o.join("&")},Yotpo.convertArrayToQueryStringParam=function(e,t){for(var o=[],i=0;i<t.length;i++)o.push(encodeURIComponent(e+"[]")+"="+encodeURIComponent(t[i]));return o.length?o.join("&"):""},Yotpo.Animations=function(e){function t(){}function o(e){var t=0;do null!=e.offsetTop&&(t+=e.offsetTop);while(e=e.offsetParent);return t}function i(e,t){t=t/1e3+"s",e.style["-webkit-transition-duration"]=t,e.style["-webkit-transition-duration"]=t,e.style["-moz-transition-duration"]=t,e.style["-o-transition-duration"]=t,e.style["-ms-transition-duration"]=t,e.style["transition-duration"]=t}return t.slideDown=function(t){e.removeClass(t,"yotpo-animation-fade");var o=t.parentNode.offsetWidth+"px";t.style.position="absolute",t.style.top="-10000px",t.style.display="block",t.style.width=o;var i=t.offsetHeight+"px";t.style.height=0,t.style.width="",t.style.overflow="hidden",t.style.right="0",t.style.top="0",t.style.position="relative",setTimeout(function(){e.addClass(t,"yotpo-animation-slide")},10),setTimeout(function(){t.style.height=i},20),setTimeout(function(){t.style.height="auto",e.removeClass(t,"yotpo-animation-slide")},1e3)},t.slideUp=function(t){e.removeClass(t,"yotpo-animation-fade");var o=t.offsetHeight+"px";e.addClass(t,"yotpo-animation-slide"),t.style.height=o,t.style.overflow="hidden",setTimeout(function(){t.style.height="0px"},10),setTimeout(function(){t.style.height=o,e.removeClass(t,"yotpo-animation-slide"),t.style.display="none"},1e3)},t.toggleSlide=function(t){"block"!=e.getDisplayStyle(t)?e.Animations.slideDown(t):e.Animations.slideUp(t)},t.fadeIn=function(t,o){o=o||"200",e.addClass(t,"yotpo-animation-fade"),e.removeClass(t,"yotpo-hidden"),i(t,o),t.style.opacity=0,t.style.display="inherit",setTimeout(function(){t.style.opacity=1,e.removeClass(t,"yotpo-animation-fade")},1)},t.fadeOut=function(t,o){o=o||"200",e.addClass(t,"yotpo-animation-fade"),i(t,o),setTimeout(function(){t.style.opacity=0},1),setTimeout(function(){t.style.display="none",e.removeClass(t,"yotpo-animation-fade")},o)},t.toggleFade=function(t,o){"none"==e.getDisplayStyle(t)?e.Animations.fadeIn(t,o):e.Animations.fadeOut(t,o)},t.scrollToElement=function(e,t){var i=o(e),n=document.documentElement;if(n){var r="scrollTop",s=n.scrollTop,a=(new Date).getTime(),l=setInterval(function(){var e=Math.min(1,((new Date).getTime()-a)/t);n[r]=s+e*(i-s),1===e&&clearInterval(l)},25);n[r]=s}},t}(Yotpo),Yotpo.Session=function(e){function t(){}return t.prototype.get=function(t,o){var i=this,n={token:{route:e.getWidgetHost("dynamic")+"/sessions/login",handler:function(e){return e.token}},user:{route:e.getApiHost("dynamic")+"/users/me?utoken="+i.token,handler:function(e){return e.response.user}}};i[t]?o(i[t]):e.ajax(n[t].route,function(e){try{e=JSON.parse(e),i[t]=n[t].handler(e)}catch(r){}o(i[t])})},t.prototype.init=function(){var t=this;e.ajax(e.getWidgetHost("dynamic")+"/sessions/sign_in_url",function(e){e=JSON.parse(e),t.signInUrl=e.url,t.trigger("init")})},t.prototype.signInNetwork=function(e){return this.signInUrl+"&network="+e},t.prototype.checkLogin=function(e){var t=this;t.get("token",function(){t.trigger("checkLogin",{submit:e||!1})})},t.prototype.on=function(t,o){e.Modules.Event.on.call(this,t,o)},t.prototype.trigger=function(t,o){e.Modules.Event.trigger.call(this,t,o)},t}(Yotpo),Yotpo.Review=function(e){function t(t,i){this.params={},e.copy(t,this.params),this.analyticCatgeory=i||o}var o="reviews";return t.load=function(t,o){var i=new e.Review({id:+t.getAttribute("data-review-id")},o);e.Modules.Handle.action.call(t),e.Modules.Handle.tooltip.call(t),e.Modules.Vote.bind.call(t,i);var n=function(){e.currentAnalytics.trackEvent(i.analyticCatgeory,"clicked_on","widget_expand_content")};e.Modules.CollapsibleElement.bind(t,350,"content-review",n);var r=t.querySelectorAll(".yotpo-multiple-rating-fields  .yotpo-question-field, .yotpo-multiple-rating-fields .yotpo-product-related-fields, .yotpo-multiple-rating-fields .yotpo-user-field",".product-related-fields");e.CustomFields.bind(r,i.get("id"));var s=t.querySelectorAll(".aggregated-product-related-fields");return e.CustomFields.bindProductRelatedFields(s),i},t.prototype.setOriginalElement=function(e){this.originalElement=e},t.prototype.get=function(e){return this.params[e]},t.prototype.formatUserName=function(e){if(!e.includes(" "))return e;var t=e.split(" ");return t[0]+" "+t[t.length-1].substring(0,1)+"."},t.prototype.getType=function(){return"review"},t.prototype.setUser=function(e){this.user=e},t.prototype.save=function(t){t=t||!1;var o=this,i=e.convertComplexObjectToQueryStringParams(this.params),n=e.getApiHost()+(t?"/v1/widget/reviews":"/reviews/dynamic_create.json");"GET"==e.dynamicCreateType&&(n+="?"+i),e.ajax(n,function(e){o.data=JSON.parse(e);var t=o.data.code||o.data.status.code;switch(t){case 200:o.trigger("save");break;default:o.trigger("error")}},e.dynamicCreateType,i)},t.prototype.vote=function(t,o){e.Modules.Vote.perform.call(this,t,o),e.currentAnalytics.trackEvent(this.analyticCatgeory,"clicked_on","vote_"+t)},t.prototype.updateOriginalVote=function(e,t){if(this.originalElement){var o=this.originalElement.querySelector(".vote-sum[data-type="+e+"]");o&&(o.innerHTML=+o.innerHTML+t)}},t.prototype.on=function(t,o){e.Modules.Event.on.call(this,t,o)},t.prototype.trigger=function(t,o){e.Modules.Event.trigger.call(this,t,o)},t.prototype.render=function(t){var o=this.user?this.user.display_name:this.formatUserName(this.get("display_name")),i=t.cloneNode(!0);i.querySelector(".yotpo-user-letter").innerHTML=o.substr(0,1).toUpperCase(),i.querySelector(".yotpo-user-name").innerHTML=o;var n=i.querySelector(".yotpo-header"),r=n.querySelector(".label-with-tooltip");this.user?(e.addClass(n,"yotpo-verified-user"),e.removeClass(r,"yotpo-hidden")):(e.removeClass(n,"yotpo-verified-user"),e.addClass(r,"yotpo-hidden"));for(var s=i.querySelectorAll(".yotpo-review-stars .yotpo-icon"),a=+this.get("review_score"),l=0;l<s.length;++l)e.removeClass(s[l],a>l?"yotpo-icon-empty-star":"yotpo-icon-star"),e.addClass(s[l],l>=a?"yotpo-icon-empty-star":"yotpo-icon-star");i.querySelector(".content-title").innerHTML=this.get("review_title"),i.querySelector(".content-review").innerHTML=this.get("review_content").replace(/\n/g,"</br>");var c=i.querySelector(".product-link");c&&(c.innerHTML+=this.get("product_title"));var d=i.querySelector(".product-link-wrapper");d&&d.setAttribute("href",this.get("product_url"));for(var u=i.querySelectorAll(".social-link"),l=0;l<u.length;++l){var p=this.shareLink(u[l].getAttribute("data-network").toLowerCase()).get("link");u[l].setAttribute("href",p)}e.CustomFieldsRenderer.render(i,this.params),e.removeClass(i,"yotpo-template"),e.removeClass(i,"yotpo-hidden");var g=document.createElement("div");g.appendChild(i),t.insertAdjacentHTML("afterend",g.innerHTML),e.Modules.Handle.action.call(t.nextSibling)},t.prototype.shareLinks=function(){var t=this;return t._shareLinks||(t._shareLinks={},e.forEach(["facebook","twitter","google","linkedin"],function(o){t._shareLinks[o]=new e.ShareLink(o,t.params)})),t._shareLinks},t.prototype.shareLink=function(e){return this.shareLinks()[e]},t}(Yotpo),Yotpo.InstagramPost=function(e){function t(e,t,o){this.params={id:e},this.originalElement=t,this.analyticsCategory=o}return t.load=function(t,o,i){var n=new e.InstagramPost(t.getAttribute("data-instagram-id"),o,i);return e.Modules.Handle.action.call(t),e.Modules.Vote.bind.call(t,n),n},t.prototype.get=function(e){return this.params[e]},t.prototype.getType=function(){return"instagram"},t.prototype.vote=function(t,o){e.Modules.Vote.perform.call(this,t,o),e.currentAnalytics.trackEvent(this.analyticsCategory,"clicked_on","vote_"+t)},t.prototype.trigger=function(t,o){e.Modules.Event.trigger.call(this,t,o)},t.prototype.updateOriginalVote=function(e,t){var o=this.originalElement.querySelector(".vote-sum[data-type="+e+"]");o&&(o.innerHTML=+o.innerHTML+t)},t}(Yotpo),Yotpo.Question=function(e){function t(t){this.params={},e.copy(t,this.params)}return t.load=function(t){var o=new e.Question({id:+t.getAttribute("data-question-id")});e.Modules.Handle.action.call(t),e.Modules.Handle.tooltip.call(t);for(var i,n=t.querySelectorAll(".yotpo-comment"),r=0;i=n[r];r++)e.Answer.load(i);return o},t.prototype.setUser=function(e){this.user=e},t.prototype.save=function(){var t=this,o=e.getApiHost()+"/questions/send_confirmation_mail",i=e.convertHashToQueryStringParams(this.params);"GET"==e.dynamicCreateType&&(o+="?"+i),e.ajax(o,function(e){t.data=JSON.parse(e),t.trigger("save")},e.dynamicCreateType,i)},t.prototype.on=function(t,o){e.Modules.Event.on.call(this,t,o)},t.prototype.trigger=function(t,o){e.Modules.Event.trigger.call(this,t,o)},t}(Yotpo),Yotpo.Answer=function(e){function t(t){this.params={},e.copy(t,this.params)}return t.load=function(t){var o=new e.Answer({id:+t.getAttribute("data-answer-id")});return e.Modules.Vote.bind.call(t,o),o},t.prototype.vote=function(t,o){e.Modules.Vote.perform.call(this,t,o),e.currentAnalytics.trackEvent("answers","clicked_on","vote_"+t)},t.prototype.on=function(t,o){e.Modules.Event.on.call(this,t,o)},t.prototype.trigger=function(t,o){e.Modules.Event.trigger.call(this,t,o)},t.prototype.get=function(e){return this.params[e]},t.prototype.getType=function(){return"answer"},t}(Yotpo),Yotpo.Tabs=function(e){function t(e){var t=this;t.element=e,t.tabs=t.element.querySelectorAll("li[data-content]");for(var o=0;o<t.tabs.length;++o)t.tabs[o].onclick=function(e){return t.activate(this)&&t.trigger("changed",{element:this,event:e}),!1}}return t.prototype.getElement=function(){return this.element},t.prototype.getTabs=function(){return this.tabs},t.prototype.getTab=function(e){for(var t=0;t<this.tabs.length;++t)if(this.tabs[t].getAttribute("data-type")==e)return this.tabs[t];return null},t.prototype.getActive=function(){for(var t=0;t<this.tabs.length;++t)if(e.hasClass(this.tabs[t],"yotpo-active"))return this.tabs[t]},t.prototype.activate=function(t){if(e.hasClass(t,"yotpo-active"))return!1;for(var o=0;o<this.tabs.length;++o)e.removeClass(this.tabs[o],"yotpo-active"),e.forEach(this.tabs[o].getAttribute("data-content").split(" "),function(t){var o=document.getElementById(t);o&&e.removeClass(o,"yotpo-active")});return e.addClass(t,"yotpo-active"),e.forEach(t.getAttribute("data-content").split(" "),function(t){var o=document.getElementById(t);o&&e.addClass(o,"yotpo-active")}),!0},t.prototype.on=function(t,o){e.Modules.Event.on.call(this,t,o)},t.prototype.trigger=function(t,o){e.Modules.Event.trigger.call(this,t,o)},t}(Yotpo),Yotpo.Select=function(e){function t(e){this.element=e,this.selected=this.element.getElementsByClassName("selected")[0],this.list=this.element.getElementsByClassName("list-categories")[0];for(var t in i)i.hasOwnProperty(t)&&this.on(t,i[t]);o.call(this)}function o(){function t(e,t){if("change"==e){var i=o.selected.getAttribute("data-selected-key"),n=t.getAttribute("sort-name");return i!=n}return!0}var o=this,i=[];i.push({name:"toggle",elements:o.element.querySelectorAll(".yotpo-dropdown-button .selected, .yotpo-dropdown-button .yotpo-icon, .filters-dropdown .yotpo-dropdown-button, .sort-drop-down .yotpo-dropdown-button ")}),i.push({name:"change",elements:o.list.querySelectorAll(".list-category, .list-category .yotpo-icon")}),i.push({name:"click",elements:o.list.getElementsByClassName("list-category")}),e.forEach(i,function(i){for(var n=0;n<i.elements.length;++n)e.addEventListener(i.elements[n],"click",function(e,i){return function(n){t(e,i)&&o.trigger(e,{element:i},n)}}(i.name,i.elements[n]))}),e.addEventListener(window,"click",function(){o.list.style.display="none"})}var i={};return t.prototype.getElement=function(){return this.element},t.prototype.getType=function(){return this.element.getAttribute("data-type")},t.prototype.getValue=function(){return this.element.getAttribute("data-value")},t.prototype.on=function(t,o){e.Modules.Event.on.call(this,t,o)},t.prototype.trigger=function(t,o,i){e.Modules.Event.trigger.call(this,t,o,i)},i={toggle:function(t,o){e.toggleVisibility(this.list),o?"undefined"!=typeof o.stopPropagation?o.stopPropagation():o.cancelBubble=!0:window.event.cancelBubble=!0;var i=this.list,n=document.querySelectorAll(".yotpo-dropdown.list-categories");n.forEach(function(t){i!==t&&"none"!==e.getDisplayStyle(t)&&e.toggleVisibility(t)})},change:function(t){this.element.setAttribute("data-value",t.element.getAttribute("data-value")),this.selected.setAttribute("data-selected-key",t.element.getAttribute("sort-name")),e.addClass(this.selected,"non-default-item-selected"),this.selected.innerHTML=e.getElementText(t.element.children[0])},click:function(t,o){for(var n=["property","label","category"],r=0;r<n.length;++r)attrName="data-analytic-"+n[r],t.element.getAttribute(attrName)&&this.element.setAttribute(attrName,t.element.getAttribute(attrName));this.element.getAttribute("data-analytic-category")&&e.currentAnalytics.trackEvent(this.element.getAttribute("data-analytic-category"),"clicked_on",this.element.getAttribute("data-analytic-label"),this.element.getAttribute("data-analytic-property")),i.toggle.call(this,t,o)}},t}(Yotpo),Yotpo.Stars=function(e){function t(e){this.element=e,this.stars=this.element.getElementsByClassName("review-star"),this.score=0,o.call(this)}function o(){for(var e=this,t=0;t<e.stars.length;++t)e.stars[t].onclick=function(){e.setScore(+this.getAttribute("data-score")),e.trigger("changed")},e.stars[t].onmouseover=function(){i.call(e.stars,+this.getAttribute("data-score"))};e.element.onmouseout=function(){i.call(e.stars,e.getScore())}}function i(e){for(var t=0;t<this.length;++t)n.call(this[t],e>t)}function n(t){var o=t?"yotpo-icon-star":"yotpo-icon-empty-star",i=t?"yotpo-icon-empty-star":"yotpo-icon-star";e.hasClass(this,o)||(e.addClass(this,o),e.removeClass(this,i))}return t.prototype.getElement=function(){return this.element},t.prototype.getStars=function(){return this.stars},t.prototype.getScore=function(){return this.score},t.prototype.setScore=function(e){this.score=e,i.call(this.stars,e)},t.prototype.on=function(t,o){e.Modules.Event.on.call(this,t,o)},t.prototype.trigger=function(t,o){e.Modules.Event.trigger.call(this,t,o)},t}(Yotpo),Yotpo.Messages=function(e){function t(e){this.messages={};for(var t,i=0;t=e[i];i++)for(var n=t.querySelectorAll(".yotpo-thank-you, .yotpo-thankyou-confirmation"),r=0;r<n.length;++r)this.messages[n[r].getAttribute("data-type")]=n[r];o.call(this.messages)}function o(){var t=this;e.forEach(Object.keys(t),function(o){var i=t[o],n=i.querySelectorAll(".yotpo-icon-cross")[0];n&&(n.onclick=function(){e.addClass(i,"yotpo-hidden")})})}return t.prototype.get=function(e){return this.messages[e]},t.prototype.show=function(t){e.removeClass(this.messages[t],"yotpo-hidden")},t.prototype.hide=function(t){e.addClass(this.messages[t],"yotpo-hidden")},t.prototype.hideAll=function(){for(var t in this.messages){var o=this.messages[t];this.messages.hasOwnProperty(t)&&!e.hasClass(o,"yotpo-hidden")&&e.addClass(o,"yotpo-hidden")}},t}(Yotpo),Yotpo.Form=function(e){function t(t,o){this._controller=t,this.element=o,this.submitButton=this.element.getElementsByClassName("yotpo-submit")[0],this.CustomFieldsForm=new e.CustomFieldsForm(this.getElement().getElementsByClassName("form-element yotpo-custom-tag-field")),i.call(this),n.call(this),r.call(this),this.getElement().querySelector(".socialize-wrapper")&&s.call(this),l.call(this),c.call(this),e.Modules.Handle.popup.call(this)}function o(t){for(var o in t)if(-1==o.search("custom_fields")&&t.hasOwnProperty(o)){t[o]=e.escapeHtml(t[o]);for(var i in u[o])if(u[o].hasOwnProperty(i)&&0==u[o][i](t[o]))throw{message:"FieldNotValid:"+o,field:o,type:i}}}function i(){var t=this,o=this.getElement().getElementsByClassName("stars-wrapper")[0];o&&(t.stars=new e.Stars(o),t.stars.on("changed",function(){e.currentAnalytics.trackEvent(t._controller.analyticsCategory,"clicked_on",t.stars.getScore())}))}function n(){var e=this;e.error={},e.error.box=e.getElement().getElementsByClassName("error-box")[0],e.error.box.getElementsByClassName("yotpo-icon-cross")[0].onclick=function(){e.hideErrorBox()}}function r(){var t=this,o=t.getElement().querySelector(".write-form > .write-review > .yotpo-icon-btn > .yotpo-icon-cross");o&&(o.onclick=function(){e.removeClass(t.getElement(),"visible"),t.getElement().style.display="none"})}function s(){var t=this,o=new e.Session;o.on("checkLogin",function(e){o.token&&o.get("user",function(i){i.token=o.token,a.call(t,i),e.submit&&t.submit()})}),t.on("opened",function(){o.checkLogin()}),o.on("init",function(){for(var i=t.getElement().querySelectorAll(".socialize .yotpo-icon-btn"),n=0;n<i.length;++n)i[n].onclick=function(i){return function(){e.currentAnalytics.trackEvent(t._controller.analyticsCategory,"clicked_on","connect_"+i);var n=window.open(o.signInNetwork(i),"","status=no,toolbar=no,location=no,menubar=no,directories=no,scrollbars=yes,resizeable=yes,width="+p[i][0]+",height="+p[i][1]+",top=200,left=400");window.focus&&n.focus();var r=setInterval(function(){n.closed&&(clearInterval(r),o.checkLogin(!0))},200);return!1}}(i[n].getAttribute("data-network"))}),o.init()}function a(t){this.user=t;var o=this.getElement().querySelector(".socialize-wrapper .username");o&&(o.innerHTML=this.user.name);var i=[];i.push({elements:this.getElement().querySelectorAll(".socialize-wrapper .socialize, .socialize-wrapper .yotpo-or, .connect-wrapper .form-element"),name:"hide"}),i.push({elements:this.getElement().querySelectorAll(".socialize-wrapper .connected, .yotpo-footer"),name:"show"}),e.forEach(i,function(t){for(var o=0;o<t.elements.length;++o)e[t.name](t.elements[o])}),this.activate()}function l(){var t=this;t.submitButton.onclick=function(){e.hasClass(t.submitButton,"yotpo-disabled")||t.submit()}}function c(){var t=this,o=t.getElement().getElementsByClassName("write-review")[0];o.onkeydown=function(o){o=o||event,13!=o.keyCode||e.hasClass(o.srcElement,"yotpo-text-box")||t.submit()}}function d(t){for(var o=this.getElementsByClassName("social-link"),i=0;i<o.length;++i){var n=o[i].getAttribute("data-network");o[i].href=t[n].get("link")}e.Modules.Handle.popup.call(this)}var u={},p={};return t.prototype.getElement=function(){return this.element},t.prototype.getType=function(){var e=this._controller.getActiveSource()?this._controller.getActiveSource().getType():this._controller.get("settings").mode||"reviews";return e=e.substr(0,e.length-1)},t.prototype.on=function(t,o){e.Modules.Event.on.call(this,t,o)},t.prototype.trigger=function(t,o){e.Modules.Event.trigger.call(this,t,o)},t.prototype.activate=function(){e.removeClass(this.submitButton,"yotpo-disabled")},t.prototype.submit=function(){e.addClass(this.submitButton,"yotpo-disabled"),this.cleanErrors();var t={};"undefined"!=typeof this.stars&&(t.review_score=this.stars.getScore().toString());for(var o=this.getElement().getElementsByClassName("form-element"),i={},n=0;n<o.length;++n){var r=o[n];if(!e.isHidden(r)){var s=r.getElementsByClassName("y-input");if(s.length){var a=s[0];if(!a.name)continue;i[a.name]=a,t[a.name]=a.value}}}e.copy(this.CustomFieldsForm.getValues(),t);var l=this._controller._controller;l.getUserReference()&&e.hasClass(this.element,"write-review-wrapper")&&(t.user_reference=l.getUserReference());try{this.saveContent(this.getType(),t)}catch(c){e.removeClass(this.submitButton,"yotpo-disabled");var d=i[c.field]||this.CustomFieldsForm.getFieldElement(c.field);d&&(e.hasClass(d,"yotpo-custom-tag-field")?this.CustomFieldsForm.showFieldError(d,c.type):e.addClass(d,"error")),"empty"==c.type&&("review_title"==c.field?e.currentAnalytics.trackEvent(this._controller.analyticsCategory,"failure_forgot","title"):"review_content"==c.field&&e.currentAnalytics.trackEvent(this._controller.analyticsCategory,"failure_forgot","body")),"review_score"==c.field&&(d=this.stars.getElement()),this.showError(d,c.type)}},t.prototype.visible=function(){return e.hasClass(this.getElement(),"visible")},t.prototype.clean=function(){function t(t){e.removeClass(t,"visible"),t.style.display="none"}t(this.getElement());for(var o=this.getElement().getElementsByClassName("visible"),i=o.length-1;i>=0;--i)t(o[i]);for(var n=this.getElement().querySelectorAll(".form-element .y-input[name]"),i=0;i<n.length;++i)n[i].value="";this.CustomFieldsForm.reset(),"undefined"!=typeof this.stars&&this.stars.setScore(0),this.submitButton.style.marginTop=null},t.prototype.showError=function(t,o){for(var i=this.error.box.getElementsByClassName("error-text"),n=0;n<i.length;n++)e.hasClass(i[n],o)?e.show(i[n]):e.hide(i[n]);e.removeClass(this.error.box,"yotpo-hidden")},t.prototype.hideErrorBox=function(){e.addClass(this.error.box,"yotpo-hidden")},t.prototype.cleanErrors=function(){this.hideErrorBox(),this.CustomFieldsForm.cleanErrors();for(var t=this.getElement().querySelectorAll(".y-input.error"),o=0;o<t.length;++o)e.removeClass(t[o],"error")},t.prototype.saveContent=function(t,i){var n=this,r=n._controller._controller,s=0!=r.getUserSetting("async_create");if(o(i),n._controller.tabs&&"site"==n._controller.tabs.getActive().getAttribute("data-type")?i.product_tags&&delete i.product_tags:this.CustomFieldsForm.validate(i),i.appkey=n._controller.getAppKey(),window.location.host==e.hosts.b2b.dynamic){var a=window.location.pathname;i.review_source="/facebook_testimonials"==a?"widget_v2_facebook_tab":"/site_reviews_landing_page"==a?"widget_v2_dedicated_page":"widget_v2"}else i.review_source="widget_v2";this.user&&(i.utoken=this.user.token),e.copy(n._controller.getProductInfo(),i);var l=!1,c=n._controller._controller.getUserSetting("vendor_review_creation");if(c){var u=n._controller._controller.getTrustedVendorsData();if(Object.keys(u).length>0&&("1"==c.settings.show_name_field&&delete u.display_name,l=!0,e.copy(u,i),n._controller.tabs&&"site"==n._controller.tabs.getActive().getAttribute("data-type"))){var p=n._controller._controller.getWidgetByName("Main");p&&e.copy({page_pid:p.settings.pid},i)}}r.getUserSetting("prevent_duplicate_reviews")&&(i.prevent_duplicate_review=!0);var g=e[e.capitalize(t)];if("undefined"==typeof g)throw"Error resource is undefined - "+g;var h=this.getElement();e.togglePreLoader(h),e.currentAnalytics.trackEvent(n._controller.analyticsCategory,"shown","review_posted");var m=new g(i);m.on("save",function(){e.togglePreLoader(h);var o=n._controller.getActiveSource(),i=o?o.getTemplate():null,s="undefined"!=typeof r.getUserSetting("account_settings").settings.auto_publish&&"review"==t,a=r.getUserSetting("show_social_links"),c=n._controller.get("messages");"function"==typeof m.shareLinks&&d.call(c.get("share"),m.shareLinks()),i?(m.render(i),o.trigger("updated")):(n.clean(),c.show(s||a?"share":"pending-for-"+t+"-approval"),"question"!=t||l||c.show("question-approval"))}),m.on("error",function(){e.togglePreLoader(h),400==this.data.code&&"duplicate_review"==this.data.message&&(e.currentAnalytics.trackEvent(n._controller.analyticsCategory,"shown","duplicate_reviews"),n.showError(h.querySelector("[name=review_content]"),"user-already-reviewed"))}),m.setUser(this.user),m.save(s)},t.prototype.setInputField=function(e,t){var o=this.getInputField(e);o&&(o.value=t)},t.prototype.getInputField=function(e){return this.element.querySelector('input[name="'+e+'"]')},u={appkey:{empty:e.validateStringMinLength,max_length:e.validateStringMaxLength},email:{email:e.validateEmail},display_name:{display_name_empty:e.validateStringMinLength,max_length:function(t){return e.validateStringMaxLength(t,40)}},sku:{empty:e.validateStringMinLength,max_length:e.validateStringMaxLength},product_title:{empty:e.validateStringMinLength,max_length:e.validateStringMaxLength},product_description:{max_length:function(t){return e.validateStringMaxLength(t,1e3)}},product_url:{empty:e.validateStringMinLength,max_length:e.validateStringMaxLength},product_image_url:{max_length:e.validateStringMaxLength},review_score:{score:function(e){return+e>0}},review_title:{empty:e.validateStringMinLength,max_length:e.validateStringMaxLength},review_content:{empty:e.validateStringMinLength,max_length:function(t){return e.validateStringMaxWords(t,5e3)}},content:{empty:e.validateStringMinLength,max_length:function(t){return e.validateStringMaxWords(t,5e3)}}},p={facebook:[984,600],twitter:[680,760],linkedin:[488,577],google_oauth2:[960,531]},t}(Yotpo),Yotpo.FileUploader=function(e){function t(e,t){this.file=e,this.errors=[],this.validations=t}function o(t,o){e.successfulResponse(o)||this.errors.push(o.responseText),this.trigger("complete",{errors:this.errors,file:this.file,url:t.url})}function i(t,o,i){var r=new FormData;switch(o){case e.FileUploader.TYPE.S3:n.call(this,t,r,i);break;default:for(var s in t)r.append(s,t[s])}return r.append("Content-Type",this.file.type),r.append("file",this.file),r}function n(t,o,i){var n=s(t,e.FileUploader.TYPE.S3,i);o.append("key",n),o.append("acl","public-read"),o.append("X-Amz-Credential",t.credential),o.append("Policy",t.encoded_policy),o.append("X-Amz-Date",t.date),o.append("X-Amz-Signature",t.signature),o.append("x-amz-meta-uuid","14365123651274"),o.append("X-Amz-Algorithm","AWS4-HMAC-SHA256")}function r(){var t=e.generateUUID().substring(0,8);return t+"_"+this.file.name.replace(/[^\w.]/g,"_")}function s(t,o,i){switch(o){case e.FileUploader.TYPE.S3:return a(t.path)+i;default:return i}}function a(e){return"/"!==e.charAt(e.length-1)&&(e+="/"),e}return t.TYPE={S3:1},t.prototype.upload=function(t,n,l){var c=r.call(this),d=i.call(this,n,l,c),u={withCredentials:!1,requestHeaders:{},getXhrAsResponse:!0},p={url:a(t)+s(n,l,c),type:l};e.ajax(t,o.bind(this,p),"POST",d,null,u)},t.prototype.validateAndUpload=function(t,o,i){var n=new e.Helpers.FileValidator(this.file,this.validations),r=this;n.on("validated",function(e){return e.length>0?void r.trigger("complete",{errors:e,file:r.file,url:null}):void r.upload(t,o,i)}),n.validate()},t.prototype.on=function(t,o){e.Modules.Event.on.call(this,t,o)},t.prototype.trigger=function(t,o){e.Modules.Event.trigger.call(this,t,o)},t}(Yotpo),Yotpo.Analytics=function(Yotpo){function Analytics(e){this._controller=e,this.pageSku=e.pageSku;var t=e.getUserSetting("reporting_end_points");t?initYotpoMultiAnalytics.apply(this,[t]):initYotpoAnalytics.apply(this),this.trackedObjects={};var o=e.getUserSetting("cookie_path");o&&_yaq.push(["setCookiePath",o.settings.sub_path])}function trackYotpoEvent(e,t,o,i,n,r,s,a){_yaq.push(["trackStructEvent",e,t,o,i,n,r,a,s])}function initYotpoAnalytics(){_yaq.push(["setCollectorCf","d33im0067v833a"]),_yaq.push(["enableActivityTracking",10,10]),_yaq.push(["setAppId",yotpo_analytics_version])}function initYotpoMultiAnalytics(e){_yaq.push(["setCollectorUrl",e]),_yaq.push(["enableActivityTracking",10,10]),_yaq.push(["setAppId",yotpo_analytics_version])}function isTemplateReview(e){return"0"==e}this.JSON2||(this.JSON2={}),function(){"use strict";function isArray(e){if("isArray"in Array)return Array.isArray(e);var t=Object.prototype.toString.call(e);
return"[object Array]"===t}function f(e){return 10>e?"0"+e:e}function objectToJSON(e,t){var o=Object.prototype.toString.apply(e);return"[object Date]"===o?isFinite(e.valueOf())?e.getUTCFullYear()+"-"+f(e.getUTCMonth()+1)+"-"+f(e.getUTCDate())+"T"+f(e.getUTCHours())+":"+f(e.getUTCMinutes())+":"+f(e.getUTCSeconds())+"Z":null:"[object String]"===o||"[object Number]"===o||"[object Boolean]"===o?e.valueOf():isArray(e)||"function"!=typeof e.toJSON?e:e.toJSON(t)}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var o,i,n,r,s,a=gap,l=t[e];switch(l&&"object"==typeof l&&(l=objectToJSON(l,e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,s=[],isArray(l)){for(r=l.length,o=0;r>o;o+=1)s[o]=str(o,l)||"null";return n=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+a+"]":"["+s.join(",")+"]",gap=a,n}if(rep&&"object"==typeof rep)for(r=rep.length,o=0;r>o;o+=1)"string"==typeof rep[o]&&(i=rep[o],n=str(i,l),n&&s.push(quote(i)+(gap?": ":":")+n));else for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(n=str(i,l),n&&s.push(quote(i)+(gap?": ":":")+n));return n=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+a+"}":"{"+s.join(",")+"}",gap=a,n}}var cx=new RegExp("[\x00\xad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]","g"),pattern='\\\\\\"\x00--\x9f\xad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]',escapable=new RegExp("["+pattern,"g"),gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON2.stringify&&(JSON2.stringify=function(e,t,o){var i;if(gap="",indent="","number"==typeof o)for(i=0;o>i;i+=1)indent+=" ";else"string"==typeof o&&(indent=o);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON2.parse&&(JSON2.parse=function(text,reviver){function walk(e,t){var o,i,n=e[t];if(n&&"object"==typeof n)for(o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i=walk(n,o),void 0!==i?n[o]=i:delete n[o]);return reviver.call(e,t,n)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),new RegExp("^[\\],:{}\\s]*$").test(text.replace(new RegExp('\\\\(?:["\\\\/bfnrt]|u[0-9a-fA-F]{4})',"g"),"@").replace(new RegExp('"[^"\\\\\n\r]*"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?',"g"),"]").replace(new RegExp("(?:^|:|,)(?:\\s*\\[)+","g"),"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),!function(e){var t=function(){"use strict";var e="s",o=function(e){var t=-e.getTimezoneOffset();return null!==t?t:0},i=function(){return o(new Date(2010,0,1,0,0,0,0))},n=function(){return o(new Date(2010,5,1,0,0,0,0))},r=function(e){var t=e.getMonth()>5?n():i(),r=o(e);return t-r!==0},s=function(){var t=i(),o=n(),r=i()-n();return 0>r?t+",1":r>0?o+",1,"+e:t+",0"},a=function(){var e=s();return new t.TimeZone(t.olson.timezones[e])};return{determine_timezone:function(){return"undefined"!=typeof console&&console.log("jstz.determine_timezone() is deprecated and will be removed in an upcoming version. Please use jstz.determine() instead."),a()},determine:a,date_is_dst:r}}();t.TimeZone=function(e){"use strict";var o=null,i=function(){return o},n=function(){for(var e=t.olson.ambiguity_list[o],i=e.length,n=0,r=e[0];i>n;n+=1)if(r=e[n],t.date_is_dst(t.olson.dst_start_dates[r]))return void(o=r)},r=function(){return"undefined"!=typeof t.olson.ambiguity_list[o]};return o=e,r()&&n(),{name:i}},t.olson={},t.olson.timezones={"-720,0":"Etc/GMT+12","-660,0":"Pacific/Pago_Pago","-600,1":"America/Adak","-600,0":"Pacific/Honolulu","-570,0":"Pacific/Marquesas","-540,0":"Pacific/Gambier","-540,1":"America/Anchorage","-480,1":"America/Los_Angeles","-480,0":"Pacific/Pitcairn","-420,0":"America/Phoenix","-420,1":"America/Denver","-360,0":"America/Guatemala","-360,1":"America/Chicago","-360,1,s":"Pacific/Easter","-300,0":"America/Bogota","-300,1":"America/New_York","-270,0":"America/Caracas","-240,1":"America/Halifax","-240,0":"America/Santo_Domingo","-240,1,s":"America/Asuncion","-210,1":"America/St_Johns","-180,1":"America/Godthab","-180,0":"America/Argentina/Buenos_Aires","-180,1,s":"America/Montevideo","-120,0":"America/Noronha","-120,1":"Etc/GMT+2","-60,1":"Atlantic/Azores","-60,0":"Atlantic/Cape_Verde","0,0":"Etc/UTC","0,1":"Europe/London","60,1":"Europe/Berlin","60,0":"Africa/Lagos","60,1,s":"Africa/Windhoek","120,1":"Asia/Beirut","120,0":"Africa/Johannesburg","180,1":"Europe/Moscow","180,0":"Asia/Baghdad","210,1":"Asia/Tehran","240,0":"Asia/Dubai","240,1":"Asia/Yerevan","270,0":"Asia/Kabul","300,1":"Asia/Yekaterinburg","300,0":"Asia/Karachi","330,0":"Asia/Kolkata","345,0":"Asia/Kathmandu","360,0":"Asia/Dhaka","360,1":"Asia/Omsk","390,0":"Asia/Rangoon","420,1":"Asia/Krasnoyarsk","420,0":"Asia/Jakarta","480,0":"Asia/Shanghai","480,1":"Asia/Irkutsk","525,0":"Australia/Eucla","525,1,s":"Australia/Eucla","540,1":"Asia/Yakutsk","540,0":"Asia/Tokyo","570,0":"Australia/Darwin","570,1,s":"Australia/Adelaide","600,0":"Australia/Brisbane","600,1":"Asia/Vladivostok","600,1,s":"Australia/Sydney","630,1,s":"Australia/Lord_Howe","660,1":"Asia/Kamchatka","660,0":"Pacific/Noumea","690,0":"Pacific/Norfolk","720,1,s":"Pacific/Auckland","720,0":"Pacific/Tarawa","765,1,s":"Pacific/Chatham","780,0":"Pacific/Tongatapu","780,1,s":"Pacific/Apia","840,0":"Pacific/Kiritimati"},t.olson.dst_start_dates={"America/Denver":new Date(2011,2,13,3,0,0,0),"America/Mazatlan":new Date(2011,3,3,3,0,0,0),"America/Chicago":new Date(2011,2,13,3,0,0,0),"America/Mexico_City":new Date(2011,3,3,3,0,0,0),"Atlantic/Stanley":new Date(2011,8,4,7,0,0,0),"America/Asuncion":new Date(2011,9,2,3,0,0,0),"America/Santiago":new Date(2011,9,9,3,0,0,0),"America/Campo_Grande":new Date(2011,9,16,5,0,0,0),"America/Montevideo":new Date(2011,9,2,3,0,0,0),"America/Sao_Paulo":new Date(2011,9,16,5,0,0,0),"America/Los_Angeles":new Date(2011,2,13,8,0,0,0),"America/Santa_Isabel":new Date(2011,3,5,8,0,0,0),"America/Havana":new Date(2011,2,13,2,0,0,0),"America/New_York":new Date(2011,2,13,7,0,0,0),"Asia/Gaza":new Date(2011,2,26,23,0,0,0),"Asia/Beirut":new Date(2011,2,27,1,0,0,0),"Europe/Minsk":new Date(2011,2,27,2,0,0,0),"Europe/Helsinki":new Date(2011,2,27,4,0,0,0),"Europe/Istanbul":new Date(2011,2,28,5,0,0,0),"Asia/Damascus":new Date(2011,3,1,2,0,0,0),"Asia/Jerusalem":new Date(2011,3,1,6,0,0,0),"Africa/Cairo":new Date(2010,3,30,4,0,0,0),"Asia/Yerevan":new Date(2011,2,27,4,0,0,0),"Asia/Baku":new Date(2011,2,27,8,0,0,0),"Pacific/Auckland":new Date(2011,8,26,7,0,0,0),"Pacific/Fiji":new Date(2010,11,29,23,0,0,0),"America/Halifax":new Date(2011,2,13,6,0,0,0),"America/Goose_Bay":new Date(2011,2,13,2,1,0,0),"America/Miquelon":new Date(2011,2,13,5,0,0,0),"America/Godthab":new Date(2011,2,27,1,0,0,0)},t.olson.ambiguity_list={"America/Denver":["America/Denver","America/Mazatlan"],"America/Chicago":["America/Chicago","America/Mexico_City"],"America/Asuncion":["Atlantic/Stanley","America/Asuncion","America/Santiago","America/Campo_Grande"],"America/Montevideo":["America/Montevideo","America/Sao_Paulo"],"Asia/Beirut":["Asia/Gaza","Asia/Beirut","Europe/Minsk","Europe/Helsinki","Europe/Istanbul","Asia/Damascus","Asia/Jerusalem","Africa/Cairo"],"Asia/Yerevan":["Asia/Yerevan","Asia/Baku"],"Pacific/Auckland":["Pacific/Auckland","Pacific/Fiji"],"America/Los_Angeles":["America/Los_Angeles","America/Santa_Isabel"],"America/New_York":["America/Havana","America/New_York"],"America/Halifax":["America/Goose_Bay","America/Halifax"],"America/Godthab":["America/Miquelon","America/Godthab"]},"undefined"!=typeof exports?exports.jstz=t:e.jstz=t}(this);var _yaq=_yaq||[],SnowPlow=SnowPlow||function(){var e=window;return{version:"js-0.13.2",expireDateTime:null,plugins:{},hasLoaded:!1,registeredOnLoadHandlers:[],documentAlias:document,windowAlias:e,navigatorAlias:navigator,screenAlias:screen,encodeWrapper:e.encodeURIComponent,decodeWrapper:e.decodeURIComponent,decodeUrl:unescape,asyncTracker:null}}();SnowPlow.isDefined=function(e){return"undefined"!=typeof e},SnowPlow.isNotNull=function(e){return null!==e},SnowPlow.isFunction=function(e){return"function"==typeof e},SnowPlow.isArray="isArray"in Array?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},SnowPlow.isEmptyArray=function(e){return SnowPlow.isArray(e)&&e.length<1},SnowPlow.isObject=function(e){return"object"==typeof e},SnowPlow.isJson=function(e){return SnowPlow.isDefined(e)&&SnowPlow.isNotNull(e)&&e.constructor==={}.constructor},SnowPlow.isNonEmptyJson=function(e){return SnowPlow.isJson(e)&&e!=={}},SnowPlow.isString=function(e){return"string"==typeof e||e instanceof String},SnowPlow.isNonEmptyString=function(e){return SnowPlow.isString(e)&&""!==e},SnowPlow.isDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)},SnowPlow.encodeUtf8=function(e){return SnowPlow.decodeUrl(SnowPlow.encodeWrapper(e))},SnowPlow.fixupTitle=function(e){if(!SnowPlow.isString(e)){e=e.text||"";var t=SnowPlow.documentAlias.getElementsByTagName("title");t&&SnowPlow.isDefined(t[0])&&(e=t[0].text)}return e},SnowPlow.getHostName=function(e){var t=new RegExp("^(?:(?:https?|ftp):)/*(?:[^@]+@)?([^:/#]+)"),o=t.exec(e);return o?o[1]:e},SnowPlow.hasSessionStorage=function(){try{return!!SnowPlow.windowAlias.sessionStorage}catch(e){return!0}},SnowPlow.hasLocalStorage=function(){try{return!!SnowPlow.windowAlias.localStorage}catch(e){return!0}},SnowPlow.toTimestamp=function(e,t){return t?e/1:Math.floor(e/1e3)},SnowPlow.toDatestamp=function(e){return Math.floor(e/864e5)},SnowPlow.fixupUrl=function(e,t,o){function i(e,t){var o=new RegExp("^(?:https?|ftp)(?::/*(?:[^?]+)[?])([^#]+)"),i=o.exec(e),n=new RegExp("(?:^|&)"+t+"=([^&]*)"),r=i?n.exec(i[1]):0;return r?SnowPlow.decodeWrapper(r[1]):""}return"translate.googleusercontent.com"===e?(""===o&&(o=t),t=i(t,"u"),e=SnowPlow.getHostName(t)):("cc.bingj.com"===e||"webcache.googleusercontent.com"===e||"74.6."===e.slice(0,5))&&(t=SnowPlow.documentAlias.links[0].href,e=SnowPlow.getHostName(t)),[e,t,o]},SnowPlow.fixupDomain=function(e){var t=e.length;return"."===e.charAt(--t)&&(e=e.slice(0,t)),"*."===e.slice(0,2)&&(e=e.slice(1)),e},SnowPlow.getReferrer=function(){var e="";try{e=SnowPlow.windowAlias.top.document.referrer}catch(t){if(SnowPlow.windowAlias.parent)try{e=SnowPlow.windowAlias.parent.document.referrer}catch(o){e=""}}return""===e&&(e=SnowPlow.documentAlias.referrer),e},SnowPlow.addEventListener=function(e,t,o,i){return e.addEventListener?(e.addEventListener(t,o,i),!0):e.attachEvent?e.attachEvent("on"+t,o):void(e["on"+t]=o)},SnowPlow.getCookie=function(e){var t=new RegExp("(^|;)[ ]*"+e+"=([^;]*)"),o=t.exec(SnowPlow.documentAlias.cookie);return o?SnowPlow.decodeWrapper(o[2]):0},SnowPlow.setCookie=function(e,t,o,i,n,r){var s;o&&(s=new Date,s.setTime(s.getTime()+o)),SnowPlow.documentAlias.cookie=e+"="+SnowPlow.encodeWrapper(t)+(o?";expires="+s.toGMTString():"")+";path="+(i||"/")+(n?";domain="+n:"")+(r?";secure":"")},SnowPlow.executePluginMethod=function(e,t){var o,i,n="";for(o in SnowPlow.plugins)Object.prototype.hasOwnProperty.call(SnowPlow.plugins,o)&&(i=SnowPlow.plugins[o][e],SnowPlow.isFunction(i)&&(n+=i(t)));return n},SnowPlow.sha1=function(e){var t,o,i,n,r,s,a,l,c,d,u=function(e,t){return e<<t|e>>>32-t},p=function(e){var t,o,i="";for(t=7;t>=0;t--)o=e>>>4*t&15,i+=o.toString(16);return i},g=[],h=1732584193,m=4023233417,f=2562383102,y=271733878,v=3285377520,w=[];for(e=SnowPlow.encodeUtf8(e),d=e.length,o=0;d-3>o;o+=4)i=e.charCodeAt(o)<<24|e.charCodeAt(o+1)<<16|e.charCodeAt(o+2)<<8|e.charCodeAt(o+3),w.push(i);switch(3&d){case 0:o=2147483648;break;case 1:o=e.charCodeAt(d-1)<<24|8388608;break;case 2:o=e.charCodeAt(d-2)<<24|e.charCodeAt(d-1)<<16|32768;break;case 3:o=e.charCodeAt(d-3)<<24|e.charCodeAt(d-2)<<16|e.charCodeAt(d-1)<<8|128}for(w.push(o);14!==(15&w.length);)w.push(0);for(w.push(d>>>29),w.push(d<<3&4294967295),t=0;t<w.length;t+=16){for(o=0;16>o;o++)g[o]=w[t+o];for(o=16;79>=o;o++)g[o]=u(g[o-3]^g[o-8]^g[o-14]^g[o-16],1);for(n=h,r=m,s=f,a=y,l=v,o=0;19>=o;o++)c=u(n,5)+(r&s|~r&a)+l+g[o]+1518500249&4294967295,l=a,a=s,s=u(r,30),r=n,n=c;for(o=20;39>=o;o++)c=u(n,5)+(r^s^a)+l+g[o]+1859775393&4294967295,l=a,a=s,s=u(r,30),r=n,n=c;for(o=40;59>=o;o++)c=u(n,5)+(r&s|r&a|s&a)+l+g[o]+2400959708&4294967295,l=a,a=s,s=u(r,30),r=n,n=c;for(o=60;79>=o;o++)c=u(n,5)+(r^s^a)+l+g[o]+3395469782&4294967295,l=a,a=s,s=u(r,30),r=n,n=c;h=h+n&4294967295,m=m+r&4294967295,f=f+s&4294967295,y=y+a&4294967295,v=v+l&4294967295}return c=p(h)+p(m)+p(f)+p(y)+p(v),c.toLowerCase()},SnowPlow.murmurhash3_32_gc=function(e,t){var o,i,n,r,s,a,l,c;for(o=3&e.length,i=e.length-o,n=t,s=3432918353,a=461845907,c=0;i>c;)l=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,l=(65535&l)*s+(((l>>>16)*s&65535)<<16)&4294967295,l=l<<15|l>>>17,l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295,n^=l,n=n<<13|n>>>19,r=5*(65535&n)+((5*(n>>>16)&65535)<<16)&4294967295,n=(65535&r)+27492+(((r>>>16)+58964&65535)<<16);switch(l=0,o){case 3:l^=(255&e.charCodeAt(c+2))<<16;case 2:l^=(255&e.charCodeAt(c+1))<<8;case 1:l^=255&e.charCodeAt(c),l=(65535&l)*s+(((l>>>16)*s&65535)<<16)&4294967295,l=l<<15|l>>>17,l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295,n^=l}return n^=e.length,n^=n>>>16,n=2246822507*(65535&n)+((2246822507*(n>>>16)&65535)<<16)&4294967295,n^=n>>>13,n=3266489909*(65535&n)+((3266489909*(n>>>16)&65535)<<16)&4294967295,n^=n>>>16,n>>>0},SnowPlow.base64encode=function(e){if(!e)return e;if("function"==typeof window.btoa)return btoa(e);var t,o,i,n,r,s,a,l,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d=0,u=0,p="",g=[];do t=e.charCodeAt(d++),o=e.charCodeAt(d++),i=e.charCodeAt(d++),l=t<<16|o<<8|i,n=l>>18&63,r=l>>12&63,s=l>>6&63,a=63&l,g[u++]=c.charAt(n)+c.charAt(r)+c.charAt(s)+c.charAt(a);while(d<e.length);p=g.join("");var h=e.length%3;return(h?p.slice(0,h-3):p)+"===".slice(h||3)},SnowPlow.base64urlencode=function(e){if(!e)return e;var t=SnowPlow.base64encode(e);return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},SnowPlow.base64decode=function(e){var t,o,i,n,r,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a="",l="",c="",d=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do i=s.indexOf(e.charAt(d++)),n=s.indexOf(e.charAt(d++)),r=s.indexOf(e.charAt(d++)),c=s.indexOf(e.charAt(d++)),t=i<<2|n>>4,o=(15&n)<<4|r>>2,l=(3&r)<<6|c,a+=String.fromCharCode(t),64!=r&&(a+=String.fromCharCode(o)),64!=c&&(a+=String.fromCharCode(l)),t=o=l="",i=n=r=c="";while(d<e.length);return unescape(a)},SnowPlow.Tracker=function Tracker(argmap){function constructCollectorUrl(e){return"undefined"==typeof e?null:"cf"in e?collectorUrlFromCfDist(e.cf):"url"in e?asCollectorUrl(e.url):void 0}function ecommerceTransactionTemplate(){return{transaction:{},items:[]}}function purify(e){var t;return configDiscardHashTag?(t=new RegExp("#.*"),e.replace(t,"")):e}function getProtocolScheme(e){var t=new RegExp("^([a-z]+):"),o=t.exec(e);return o?o[1]:null}function resolveRelativeReference(e,t){var o,i=getProtocolScheme(t);return i?t:"/"===t.slice(0,1)?getProtocolScheme(e)+"://"+SnowPlow.getHostName(e)+t:(e=purify(e),(o=e.indexOf("?"))>=0&&(e=e.slice(0,o)),(o=e.lastIndexOf("/"))!==e.length-1&&(e=e.slice(0,o+1)),e+t)}function isSiteHostName(e){var t,o,i;for(t=0;t<configHostsAlias.length;t++){if(o=SnowPlow.fixupDomain(configHostsAlias[t].toLowerCase()),e===o)return!0;if("."===o.slice(0,1)){if(e===o.slice(1))return!0;if(i=e.length-o.length,i>0&&e.slice(i)===o)return!0}}return!1}function getImage(e){if(SnowPlow.isString(configCollectorUrl)){if(null===configCollectorUrl)throw"No SnowPlow collector configured, cannot track";setImage(configCollectorUrl+e)}else if(SnowPlow.isArray(configCollectorUrl))for(var t=0;t<configCollectorUrl.length;t++)setImage(configCollectorUrl[t]+e)}function setImage(e){var t=new Image(1,1);t.onload=function(){},t.src=e}function sendRequest(e,t){var o=new Date;configDoNotTrack||(getImage(e),SnowPlow.expireDateTime=o.getTime()+t)}function getCookieName(e){return configCookieNamePrefix+e+"."+domainHash}function getLegacyCookieName(e){return configCookieNamePrefix+e+"."+configTrackerSiteId+"."+domainHash}function getCookieValue(e){var t=SnowPlow.getCookie(getCookieName(e));return t?t:SnowPlow.getCookie(getLegacyCookieName(e))}function hasCookies(){var e=getCookieName("testcookie");return SnowPlow.isDefined(SnowPlow.navigatorAlias.cookieEnabled)?SnowPlow.navigatorAlias.cookieEnabled?"1":"0":(SnowPlow.setCookie(e,"1"),"1"===SnowPlow.getCookie(e)?"1":"0")}function updateDomainHash(){domainHash=hash((configCookieDomain||domainAlias)+(configCookiePath||"/")).slice(0,4)}function activityHandler(){var e=new Date;lastActivityTime=e.getTime()}function scrollHandler(){updateMaxScrolls(),activityHandler()}function getPageOffsets(){var e=SnowPlow.documentAlias.compatMode&&"BackCompat"!=SnowPlow.documentAlias.compatMode?SnowPlow.documentAlias.documentElement:SnowPlow.documentAlias.body;return[e.scrollLeft||SnowPlow.windowAlias.pageXOffset,e.scrollTop||SnowPlow.windowAlias.pageYOffset]}function resetMaxScrolls(){var e=getPageOffsets(),t=e[0];minXOffset=t,maxXOffset=t;var o=e[1];minYOffset=o,maxYOffset=o}function updateMaxScrolls(){var e=getPageOffsets(),t=e[0];minXOffset>t?minXOffset=t:t>maxXOffset&&(maxXOffset=t);var o=e[1];minYOffset>o?minYOffset=o:o>maxYOffset&&(maxYOffset=o)}function setDomainUserIdCookie(e,t,o,i,n){SnowPlow.setCookie(getCookieName("id"),e+"."+t+"."+o+"."+i+"."+n,configVisitorCookieTimeout,configCookiePath,configCookieDomain)}function loadDomainUserIdCookie(){var e,t=new Date,o=Math.round(t.getTime()/1e3),i=getCookieValue("id");return i?(e=i.split("."),e.unshift("0")):(domainUserId||(domainUserId=hash((SnowPlow.navigatorAlias.userAgent||"")+(SnowPlow.navigatorAlias.platform||"")+JSON2.stringify(browserFeatures)+o).slice(0,16)),e=["1",domainUserId,o,0,o,""]),e}function getTimestamp(){var e=new Date,t=e.getTime();return t}function getRequest(e,t){var o,i,n,r,s,a,l,c,d=new Date,u=Math.round(d.getTime()/1e3),p=getCookieName("id"),g=getCookieName("ses"),h=loadDomainUserIdCookie(),m=getCookieValue("ses"),f=configCustomUrl||locationHrefAlias;if(configDoNotTrack)return SnowPlow.setCookie(p,"",-1,configCookiePath,configCookieDomain),SnowPlow.setCookie(g,"",-1,configCookiePath,configCookieDomain),"";i=h[0],n=h[1],s=h[2],r=h[3],a=h[4],l=h[5],m||(r++,l=a),e.addRaw("dtm",getTimestamp()),e.addRaw("tid",String(Math.random()).slice(2,8)),e.addRaw("vp",detectViewport()),e.addRaw("ds",detectDocumentSize()),e.addRaw("vid",r),e.addRaw("duid",n),e.add("p",configPlatform),e.add("tv",SnowPlow.version),e.add("fp",fingerprint),e.add("aid",configTrackerSiteId),e.add("lang",browserLanguage),e.add("cs",documentCharset),e.add("tz",timezone),e.add("uid",businessUserId),configReferrerUrl.length&&e.add("refr",purify(configReferrerUrl));for(o in browserFeatures)Object.prototype.hasOwnProperty.call(browserFeatures,o)&&(c="res"===o||"cd"===o||"cookie"===o?"":"f_",e.addRaw(c+o,browserFeatures[o]));e.add("url",purify(f));var y=e.build();return setDomainUserIdCookie(n,s,r,u,l),SnowPlow.setCookie(g,"*",configSessionCookieTimeout,configCookiePath,configCookieDomain),y+=SnowPlow.executePluginMethod(t)}function collectorUrlFromCfDist(e){return asCollectorUrl(e+".cloudfront.net")}function asCollectorUrl(e){if(SnowPlow.isString(e))return("https:"==SnowPlow.documentAlias.location.protocol?"https":"http")+"://"+e+"/i";if(SnowPlow.isArray(e)){for(var t=[],o=0;o<e.length;o++)t.push(("https:"==SnowPlow.documentAlias.location.protocol?"https":"http")+"://"+e[o]+"/i");return t}}function requestStringBuilder(e){var t="",o=function(e,o,i){if(void 0!==o&&null!==o&&""!==o){var n=t.length>0?"&":"?";t+=n+e+"="+(i?SnowPlow.encodeWrapper(o):o)}},i=function(e){var t=new RegExp("\\$(.[^\\$]+)$"),o=t.exec(e);return o?o[1]:void 0},n=function(e,t){switch(t){case"tms":return SnowPlow.toTimestamp(e,!0);case"ts":return SnowPlow.toTimestamp(e,!1);case"dt":return SnowPlow.toDatestamp(e);default:return e}},r=function(){function e(t){var o={};for(var r in t){var s=r,a=t[r];t.hasOwnProperty(s)&&(SnowPlow.isDate(a)&&(type=i(s),type||(type="tms",s+="$"+type),a=n(a,type)),SnowPlow.isJson(a)&&(a=e(a))),o[s]=a}return o}return e}(),s=function(e,t){o(e,t,!0)},a=function(e,t){o(e,t,!1)},l=function(t,o,i){if(SnowPlow.isNonEmptyJson(i)){var n=r(i),l=JSON2.stringify(n);e?a(t,SnowPlow.base64urlencode(l)):s(o,l)}};return{add:s,addRaw:a,addJson:l,build:function(){return t}}}function logPageView(e,t,o,i,n,r,s,a){var l=SnowPlow.fixupTitle(e||configTitle),c=requestStringBuilder(configEncodeBase64);c.add("e","pv"),c.add("page",l),c.add("se_ca",o),c.add("se_ac",i),c.add("se_la",n),c.add("se_pr",r),c.add("se_psk",s),c.add("se_va",a),c.addJson("cx","co",t);var d=getRequest(c,"pageView");sendRequest(d,configTrackerPause);var u=new Date;configMinimumVisitTime&&configHeartBeatTimer&&!activityTrackingInstalled&&(activityTrackingInstalled=!0,resetMaxScrolls(),SnowPlow.addEventListener(SnowPlow.documentAlias,"click",activityHandler),SnowPlow.addEventListener(SnowPlow.documentAlias,"mouseup",activityHandler),SnowPlow.addEventListener(SnowPlow.documentAlias,"mousedown",activityHandler),SnowPlow.addEventListener(SnowPlow.documentAlias,"mousemove",activityHandler),SnowPlow.addEventListener(SnowPlow.documentAlias,"mousewheel",activityHandler,supportsPassive()?{passive:!0}:!1),SnowPlow.addEventListener(SnowPlow.windowAlias,"DOMMouseScroll",activityHandler),SnowPlow.addEventListener(SnowPlow.windowAlias,"scroll",scrollHandler),SnowPlow.addEventListener(SnowPlow.documentAlias,"keypress",activityHandler),SnowPlow.addEventListener(SnowPlow.documentAlias,"keydown",activityHandler),SnowPlow.addEventListener(SnowPlow.documentAlias,"keyup",activityHandler),SnowPlow.addEventListener(SnowPlow.windowAlias,"resize",activityHandler),SnowPlow.addEventListener(SnowPlow.windowAlias,"focus",activityHandler),SnowPlow.addEventListener(SnowPlow.windowAlias,"blur",activityHandler),lastActivityTime=u.getTime(),setInterval(function(){var e=new Date;lastActivityTime+configHeartBeatTimer>e.getTime()&&configMinimumVisitTime<e.getTime()&&logPagePing(l,t,o,i,n,r,s,a)},configHeartBeatTimer))}function logPagePing(e,t,o,i,n,r,s,a){var l=requestStringBuilder(configEncodeBase64);l.add("e","pp"),l.add("page",e),l.add("se_ca",o),l.add("se_ac",i),l.add("se_la",n),l.add("se_pr",r),l.add("se_psk",s),l.add("se_va",a),l.addRaw("pp_mix",parseInt(minXOffset)),l.addRaw("pp_max",parseInt(maxXOffset)),l.addRaw("pp_miy",parseInt(minYOffset)),l.addRaw("pp_may",parseInt(maxYOffset)),l.addJson("cx","co",t),resetMaxScrolls();var c=getRequest(l,"pagePing");sendRequest(c,configTrackerPause)}function logStructEvent(e,t,o,i,n,r,s,a){var l=requestStringBuilder(configEncodeBase64);l.add("e","se"),l.add("se_ca",e),l.add("se_ac",t),l.add("se_la",o),l.add("se_pr",i),l.add("se_psk",n),l.add("se_va",r),l.add("se_tg",a),l.addJson("cx","co",s);var c=getRequest(l,"structEvent");sendRequest(c,configTrackerPause)}function logUnstructEvent(e,t,o){var i=requestStringBuilder(configEncodeBase64);i.add("e","ue"),i.add("ue_na",e),i.addJson("ue_px","ue_pr",t),i.addJson("cx","co",o);var n=getRequest(i,"unstructEvent");sendRequest(n,configTrackerPause)}function logTransaction(e,t,o,i,n,r,s,a,l,c){var d=requestStringBuilder(configEncodeBase64);d.add("e","tr"),d.add("tr_id",e),d.add("tr_af",t),d.add("tr_tt",o),d.add("tr_tx",i),d.add("tr_sh",n),d.add("tr_ci",r),d.add("tr_st",s),d.add("tr_co",a),d.add("tr_cu",l),d.addJson("cx","co",c);var u=getRequest(d,"transaction");sendRequest(u,configTrackerPause)}function logTransactionItem(e,t,o,i,n,r,s,a){var l=requestStringBuilder(configEncodeBase64);l.add("e","ti"),l.add("ti_id",e),l.add("ti_sk",t),l.add("ti_na",o),l.add("ti_ca",i),l.add("ti_pr",n),l.add("ti_qu",r),l.add("ti_cu",s),l.addJson("cx","co",a);var c=getRequest(l,"transactionItem");sendRequest(c,configTrackerPause)}function logLink(e,t){var o=requestStringBuilder(configEncodeBase64);o.add("e",t),o.add("t_url",purify(e));var i=getRequest(o,"link");sendRequest(i,configTrackerPause)}function logImpression(e,t,o,i,n){var r=requestStringBuilder(configEncodeBase64);r.add("e","ad"),r.add("ad_ba",e),r.add("ad_ca",t),r.add("ad_ad",o),r.add("ad_uid",i),r.addJson("cx","co",n);var s=getRequest(r,"impression");sendRequest(s,configTrackerPause)}function logConversionEvent(e,t,o,i){var n=requestStringBuilder(configEncodeBase64);n.add("e","tr"),n.add("se_va",e),n.add("tr_id",t),n.add("tr_tt",o),n.add("tr_cu",i);var r=getRequest(n,"conversion_tracking");sendRequest(r,configTrackerPause)}function prefixPropertyName(e,t){return""!==e?e+t.charAt(0).toUpperCase()+t.slice(1):t}function trackCallback(e){var t,o,i,n=["","webkit","ms","moz"];if(!configCountPreRendered)for(o=0;o<n.length;o++)if(i=n[o],Object.prototype.hasOwnProperty.call(SnowPlow.documentAlias,prefixPropertyName(i,"hidden"))){"prerender"===SnowPlow.documentAlias[prefixPropertyName(i,"visibilityState")]&&(t=!0);break}return t?void SnowPlow.addEventListener(SnowPlow.documentAlias,i+"visibilitychange",function r(){SnowPlow.documentAlias.removeEventListener(i+"visibilitychange",r,!1),e()}):void e()}function getClassesRegExp(e,t){var o,i="(^| )(piwik[_-]"+t;if(e)for(o=0;o<e.length;o++)i+="|"+e[o];return i+=")( |$)",new RegExp(i)}function getLinkType(e,t,o){if(!o)return"lnk";var i=getClassesRegExp(configDownloadClasses,"download"),n=getClassesRegExp(configLinkClasses,"link"),r=new RegExp("\\.("+configDownloadExtensions+")([?&#]|$)","i");return n.test(e)?"lnk":i.test(e)||r.test(t)?"dl":0}function processClick(e){for(var t,o,i;null!==(t=e.parentNode)&&SnowPlow.isDefined(t)&&"A"!==(o=e.tagName.toUpperCase())&&"AREA"!==o;)e=t;if(SnowPlow.isDefined(e.href)){var n=e.hostname||SnowPlow.getHostName(e.href),r=n.toLowerCase(),s=e.href.replace(n,r),a=new RegExp("^(javascript|vbscript|jscript|mocha|livescript|ecmascript|mailto):","i");a.test(s)||(i=getLinkType(e.className,s,isSiteHostName(r)),i&&(s=SnowPlow.decodeUrl(s),logLink(s,i)))}}function clickHandler(e){var t,o;e=e||SnowPlow.windowAlias.event,t=e.which||e.button,o=e.target||e.srcElement,"click"===e.type?o&&processClick(o):"mousedown"===e.type?1!==t&&2!==t||!o?lastButton=lastTarget=null:(lastButton=t,lastTarget=o):"mouseup"===e.type&&(t===lastButton&&o===lastTarget&&processClick(o),lastButton=lastTarget=null)}function addClickListener(e,t){t?(SnowPlow.addEventListener(e,"mouseup",clickHandler,!1),SnowPlow.addEventListener(e,"mousedown",clickHandler,!1)):SnowPlow.addEventListener(e,"click",clickHandler,!1)}function addClickListeners(e){if(!linkTrackingInstalled){linkTrackingInstalled=!0;var t,o=getClassesRegExp(configIgnoreClasses,"ignore"),i=SnowPlow.documentAlias.links;if(i)for(t=0;t<i.length;t++)o.test(i[t].className)||addClickListener(i[t],e)}}function generateFingerprint(){var e=[navigator.userAgent,[screen.height,screen.width,screen.colorDepth].join("x"),(new Date).getTimezoneOffset(),SnowPlow.hasSessionStorage(),SnowPlow.hasLocalStorage()],t=[];if(navigator.plugins)for(var o=0;o<navigator.plugins.length;o++){for(var i=[],n=0;n<navigator.plugins[o].length;n++)i.push([navigator.plugins[o][n].type,navigator.plugins[o][n].suffixes]);t.push([navigator.plugins[o].name+"::"+navigator.plugins[o].description,i.join("~")])}return SnowPlow.murmurhash3_32_gc(e.join("###")+"###"+t.sort().join(";"),123412414)}function detectTimezone(){var e=jstz.determine();return"undefined"==typeof e?"":e.name()}function detectViewport(){var e=SnowPlow.windowAlias,t="inner";return"innerWidth"in SnowPlow.windowAlias||(t="client",e=SnowPlow.documentAlias.documentElement||SnowPlow.documentAlias.body),e[t+"Width"]+"x"+e[t+"Height"]}function detectDocumentSize(){var e=SnowPlow.documentAlias.documentElement,t=Math.max(e.clientWidth,e.offsetWidth,e.scrollWidth),o=Math.max(e.clientHeight,e.offsetHeight,e.scrollHeight);return t+"x"+o}function supportsPassive(){try{var e=Object.defineProperty({},"passive",{get:function(){supportsPassive=!0}});window.addEventListener("test",null,e)}catch(t){}return supportsPassive}function detectBrowserFeatures(){var e,t,o={pdf:"application/pdf",qt:"video/quicktime",realp:"audio/x-pn-realaudio-plugin",wma:"application/x-mplayer2",dir:"application/x-director",fla:"application/x-shockwave-flash",java:"application/x-java-vm",gears:"application/x-googlegears",ag:"application/x-silverlight"},i={};if(SnowPlow.navigatorAlias.mimeTypes&&SnowPlow.navigatorAlias.mimeTypes.length)for(e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t=SnowPlow.navigatorAlias.mimeTypes[o[e]],i[e]=t&&t.enabledPlugin?"1":"0");return"unknown"!=typeof navigator.javaEnabled&&SnowPlow.isDefined(SnowPlow.navigatorAlias.javaEnabled)&&SnowPlow.navigatorAlias.javaEnabled()&&(i.java="1"),SnowPlow.isFunction(SnowPlow.windowAlias.GearsFactory)&&(i.gears="1"),i.res=SnowPlow.screenAlias.width+"x"+SnowPlow.screenAlias.height,i.cd=screen.colorDepth,i.cookie=hasCookies(),i}function registerHook(hookName,userHook){var hookObj=null;if(SnowPlow.isString(hookName)&&!SnowPlow.isDefined(registeredHooks[hookName])&&userHook){if(SnowPlow.isObject(userHook))hookObj=userHook;else if(SnowPlow.isString(userHook))try{eval("hookObj ="+userHook)}catch(e){}registeredHooks[hookName]=hookObj}return hookObj}var registeredHooks={},locationArray=SnowPlow.fixupUrl(SnowPlow.documentAlias.domain,SnowPlow.windowAlias.location.href,SnowPlow.getReferrer()),domainAlias=SnowPlow.fixupDomain(locationArray[0]),locationHrefAlias=locationArray[1],configReferrerUrl=locationArray[2],configRequestMethod="GET",configPlatform="web",configCollectorUrl=constructCollectorUrl(argmap),configTrackerSiteId="",configCustomUrl,configTitle=SnowPlow.documentAlias.title,configDownloadExtensions="7z|aac|ar[cj]|as[fx]|avi|bin|csv|deb|dmg|doc|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|ms[ip]|od[bfgpst]|og[gv]|pdf|phps|png|ppt|qtm?|ra[mr]?|rpm|sea|sit|tar|t?bz2?|tgz|torrent|txt|wav|wm[av]|wpd||xls|xml|z|zip",configHostsAlias=[domainAlias],configIgnoreClasses=[],configDownloadClasses=[],configLinkClasses=[],configTrackerPause=500,configMinimumVisitTime,configHeartBeatTimer,configDiscardHashTag,configCookieNamePrefix="_sp_",configCookieDomain,configCookiePath,configDoNotTrack,configCountPreRendered,configVisitorCookieTimeout=63072e6,configSessionCookieTimeout=18e5,configReferralCookieTimeout=15768e6,configEncodeBase64=!0,documentCharset=SnowPlow.documentAlias.characterSet||SnowPlow.documentAlias.charset,browserLanguage=SnowPlow.navigatorAlias.userLanguage||SnowPlow.navigatorAlias.language,browserFeatures=detectBrowserFeatures(),timezone=detectTimezone(),fingerprint=generateFingerprint(),linkTrackingInstalled=!1,activityTrackingInstalled=!1,lastActivityTime,minXOffset,maxXOffset,minYOffset,maxYOffset,lastButton,lastTarget,hash=SnowPlow.sha1,domainHash,domainUserId,businessUserId,ecommerceTransaction=ecommerceTransactionTemplate();return updateDomainHash(),SnowPlow.executePluginMethod("run",registerHook),{hook:registeredHooks,getHook:function(e){return registeredHooks[e]},getUserId:function(){return businessUserId},getDomainUserId:function(){return loadDomainUserIdCookie()[1]},getDomainUserInfo:function(){return loadDomainUserIdCookie()},getVisitorId:function(){return"undefined"!=typeof console&&console.log("SnowPlow: getVisitorId() is deprecated and will be removed in an upcoming version. Please use getDomainUserId() instead."),loadVisitorIdCookie()[1]},getVisitorInfo:function(){return"undefined"!=typeof console&&console.log("SnowPlow: getVisitorInfo() is deprecated and will be removed in an upcoming version. Please use getDomainUserInfo() instead."),loadVisitorIdCookie()},setSiteId:function(e){"undefined"!=typeof console&&console.log("SnowPlow: setSiteId() is deprecated and will be removed in an upcoming version. Please use setAppId() instead."),configTrackerSiteId=e},setAppId:function(e){configTrackerSiteId=e},setLinkTrackingTimer:function(e){configTrackerPause=e},setDownloadExtensions:function(e){configDownloadExtensions=e},addDownloadExtensions:function(e){configDownloadExtensions+="|"+e},setDomains:function(e){configHostsAlias=SnowPlow.isString(e)?[e]:e,configHostsAlias.push(domainAlias)},setIgnoreClasses:function(e){configIgnoreClasses=SnowPlow.isString(e)?[e]:e},setReferrerUrl:function(e){configReferrerUrl=e},setCustomUrl:function(e){configCustomUrl=resolveRelativeReference(locationHrefAlias,e)
},setDocumentTitle:function(e){configTitle=e},setDownloadClasses:function(e){configDownloadClasses=SnowPlow.isString(e)?[e]:e},setLinkClasses:function(e){configLinkClasses=SnowPlow.isString(e)?[e]:e},discardHashTag:function(e){configDiscardHashTag=e},setCookieNamePrefix:function(e){configCookieNamePrefix=e},setCookieDomain:function(e){configCookieDomain=SnowPlow.fixupDomain(e),updateDomainHash()},setCookiePath:function(e){configCookiePath=e,updateDomainHash()},setVisitorCookieTimeout:function(e){configVisitorCookieTimeout=1e3*e},setSessionCookieTimeout:function(e){configSessionCookieTimeout=1e3*e},setReferralCookieTimeout:function(e){configReferralCookieTimeout=1e3*e},setDoNotTrack:function(e){var t=SnowPlow.navigatorAlias.doNotTrack||SnowPlow.navigatorAlias.msDoNotTrack;configDoNotTrack=e&&("yes"===t||"1"===t)},addListener:function(e,t){addClickListener(e,t)},enableLinkTracking:function(e){SnowPlow.hasLoaded?addClickListeners(e):SnowPlow.registeredOnLoadHandlers.push(function(){addClickListeners(e)})},enableActivityTracking:function(e,t){var o=new Date;configMinimumVisitTime=o.getTime()+1e3*e,configHeartBeatTimer=1e3*t},killFrame:function(){SnowPlow.windowAlias.location!==SnowPlow.windowAlias.top.location&&(SnowPlow.windowAlias.top.location=SnowPlow.windowAlias.location)},redirectFile:function(e){"file:"===SnowPlow.windowAlias.location.protocol&&(SnowPlow.windowAlias.location=e)},setCountPreRendered:function(e){configCountPreRendered=e},setUserId:function(e){businessUserId=e},attachUserId:function(){"undefined"!=typeof console&&console.log("SnowPlow: attachUserId() is deprecated and will be removed in an upcoming version. It no longer does anything (because nuid and duid have been separated out).")},setCollectorCf:function(e){configCollectorUrl=collectorUrlFromCfDist(e)},setCollectorUrl:function(e){configCollectorUrl=asCollectorUrl(e)},setPlatform:function(e){configPlatform=e},encodeBase64:function(e){configEncodeBase64=e},trackPageView:function(e,t,o,i,n,r,s,a){trackCallback(function(){logPageView(e,t,o,i,n,r,s,a)})},trackEvent:function(e,t,o,i,n,r){"undefined"!=typeof console&&console.log("SnowPlow: trackEvent() is deprecated and will be removed in an upcoming version. Please use trackStructEvent() instead."),logStructEvent(e,t,o,i,n,r)},trackStructEvent:function(e,t,o,i,n,r,s,a){logStructEvent(e,t,o,i,n,r,s,a)},trackUnstructEvent:function(e,t,o){logUnstructEvent(e,t,o)},addTrans:function(e,t,o,i,n,r,s,a,l,c){ecommerceTransaction.transaction={orderId:e,affiliation:t,total:o,tax:i,shipping:n,city:r,state:s,country:a,currency:l,context:c}},addItem:function(e,t,o,i,n,r,s,a){ecommerceTransaction.items.push({orderId:e,sku:t,name:o,category:i,price:n,quantity:r,currency:s,context:a})},trackTrans:function(){logTransaction(ecommerceTransaction.transaction.orderId,ecommerceTransaction.transaction.affiliation,ecommerceTransaction.transaction.total,ecommerceTransaction.transaction.tax,ecommerceTransaction.transaction.shipping,ecommerceTransaction.transaction.city,ecommerceTransaction.transaction.state,ecommerceTransaction.transaction.country,ecommerceTransaction.transaction.currency,ecommerceTransaction.transaction.context);for(var e=0;e<ecommerceTransaction.items.length;e++){var t=ecommerceTransaction.items[e];logTransactionItem(t.orderId,t.sku,t.name,t.category,t.price,t.quantity,t.currency,t.context)}ecommerceTransaction=ecommerceTransactionTemplate()},trackConversion:function(e,t,o,i){logConversionEvent(e,t,o,i)},trackLink:function(e,t,o){trackCallback(function(){logLink(e,t,o)})},trackImpression:function(e,t,o,i,n){logImpression(e,t,o,i,n)}}},SnowPlow.build=function(){"use strict";function e(){var e,t,o;for(e=0;e<arguments.length;e+=1)o=arguments[e],t=o.shift(),SnowPlow.isString(t)?SnowPlow.asyncTracker[t].apply(SnowPlow.asyncTracker,o):t.apply(SnowPlow.asyncTracker,o)}function t(){var e;if(SnowPlow.executePluginMethod("unload"),SnowPlow.expireDateTime)do e=new Date;while(e.getTimeAlias()<SnowPlow.expireDateTime)}function o(){var e;if(!SnowPlow.hasLoaded)for(SnowPlow.hasLoaded=!0,SnowPlow.executePluginMethod("load"),e=0;e<SnowPlow.registeredOnLoadHandlers.length;e++)SnowPlow.registeredOnLoadHandlers[e]();return!0}function i(){var e;SnowPlow.documentAlias.addEventListener?SnowPlow.addEventListener(SnowPlow.documentAlias,"DOMContentLoaded",function t(){SnowPlow.documentAlias.removeEventListener("DOMContentLoaded",t,!1),o()}):SnowPlow.documentAlias.attachEvent&&(SnowPlow.documentAlias.attachEvent("onreadystatechange",function i(){"complete"===SnowPlow.documentAlias.readyState&&(SnowPlow.documentAlias.detachEvent("onreadystatechange",i),o())}),SnowPlow.documentAlias.documentElement.doScroll&&SnowPlow.windowAlias===SnowPlow.windowAlias.top&&!function n(){if(!SnowPlow.hasLoaded){try{SnowPlow.documentAlias.documentElement.doScroll("left")}catch(e){return void setTimeout(n,0)}o()}}()),new RegExp("WebKit").test(SnowPlow.navigatorAlias.userAgent)&&(e=setInterval(function(){(SnowPlow.hasLoaded||/loaded|complete/.test(SnowPlow.documentAlias.readyState))&&(clearInterval(e),o())},10)),SnowPlow.addEventListener(SnowPlow.windowAlias,"load",o,!1)}function n(){return{push:e}}SnowPlow.addEventListener(SnowPlow.windowAlias,"beforeunload",t,!1),i(),Date.prototype.getTimeAlias=Date.prototype.getTime,SnowPlow.asyncTracker=new SnowPlow.Tracker;for(var r=0;r<_yaq.length;r++)e(_yaq[r]);return _yaq=new n,{addPlugin:function(e,t){SnowPlow.plugins[e]=t},getTrackerCf:function(e){return new SnowPlow.Tracker({cf:e})},getTrackerUrl:function(e){return new SnowPlow.Tracker({url:e})},getAsyncTracker:function(){return SnowPlow.asyncTracker}}},!function(){var e=SnowPlow.build();for(var t in e)e.hasOwnProperty(t)&&void 0===SnowPlow[t]&&(SnowPlow[t]=e[t])}();var yotpo_analytics_version="onsite_v2";return Yotpo.getCookie=SnowPlow.getCookie,Yotpo.setCookie=SnowPlow.setCookie,Analytics.prototype.trackEvent=function(e,t,o,i,n){1==this._firstEvent&&(this.trackPageView(this),this._firstEvent=!1);var r=Yotpo.testingGroupsHandler.getTestingGroupsForAnalytics();trackYotpoEvent.apply(this,[e,t,o,i,this.pageSku,this._controller.getAppKey(),r,n])},Analytics.prototype.trackUniqueEvent=function(e,t,o,i,n){var r=e+t+(i||"")+(JSON.stringify(n)||"");this.trackedObjects[r]||(this.trackEvent(e,t,o,i,n),this.trackedObjects[r]=!0)},Analytics.prototype.trackReview=function(e,t,o,i){var n=e.getAttribute("data-review-id");isTemplateReview(n)||this.trackUniqueEvent(t,o,"review",n,i)},Analytics.prototype.trackPageView=function(){_yaq.push(["trackPageView",null,null,null,null,null,null,this.pageSku,this._controller.getAppKey()])},Analytics.prototype.trackConversion=function(e,t,o,i){_yaq.push(["trackConversion",e,t,o,i])},Analytics.prototype.getYaq=function(){return _yaq},Analytics.prototype.getDomainUserId=function(){return SnowPlow.asyncTracker.getDomainUserId()},Analytics}(Yotpo),Yotpo.Inview=function(e){function t(e){var t=e||{};t.offset=t.offset||0,this.options=t,this.verifyInviewT=s.apply(this,[this.verifyInview,25]),this.saveWinOffsetT=s.apply(this,[this.saveWinOffset,50]),this.objects=[],this.winHeight=0,this.winWidth=0,this.modalObjCounter=0,this.saveWinOffset();var o=this;o.allWidgetsAreReady=!1,e.onAllWidgetsReady(function(){o.allWidgetsAreReady=!0,o.verifyInviewT()})}function o(t){return!(e.isHidden(t)||e.isHidden(t.parentElement)||e.hasClass(t,"yotpo-hidden")||e.hasClass(t,"yotpo-ignore-inview"))}function i(e,t){var o=n(e),i=0,s=this.winHeight+this.options.offset;if(t){var a=r(e),l=n(a);i=l.top,s=l.bottom,0>i&&0>s&&(i+=window.scrollY,s+=window.scrollY)}return o.left>=0&&o.right<=this.winWidth+this.options.offset&&(o.top>=i&&o.top<=s||o.bottom<=s&&o.bottom>=i-this.options.offset)}function n(t){return e.isIEFamily&&null==t.parentElement||t===document?{height:0,width:0,left:0,right:0,top:0,bottom:0}:t.getBoundingClientRect()}function r(e){var t=getComputedStyle(e),o="absolute"===t.position,i=/(auto|scroll)/;if("fixed"===t.position)return document.body;var n=null;for(n=e;n=n.parentElement;)if(t=getComputedStyle(n),(!o||"static"!==t.position)&&i.test(t.overflow+t.overflowY))return n;return document}function s(e,t){var o=0,i=this;return function(){var n=+new Date;t>n-o||(o=n,e.call(i))}}return t.prototype.register=function(e,t){this.objects.push({element:e,callback:t,modalCalc:!1}),1==this.objects.length&&this.bindEvents(),this.verifyInviewT()},t.prototype.registerinModal=function(e,t){if(null!==e){var o=r(e).parentNode;this.objects.push({element:e,callback:t,modalCalc:o}),1==this.objects.length&&this.bindEvents(),o&&(this.modalObjCounter++,1==this.modalObjCounter&&this.bindEvents(e)),this.verifyInviewT()}},t.prototype.bindEvents=function(t){var o=void 0===t?window:r(t);e.addEventListener(o,"scroll",this.verifyInviewT),e.addEventListener(o,"resize",this.verifyInviewT),e.addEventListener(o,"resize",this.saveWinOffsetT),e.addEventListener(o,"pageshow",this.verifyInviewT)},t.prototype.unbindEvents=function(t){var o=void 0===t?window:r(t);e.removeEventListener(o,"scroll",this.verifyInviewT),e.removeEventListener(o,"resize",this.verifyInviewT),e.removeEventListener(o,"resize",this.saveWinOffsetT),e.removeEventListener(o,"pageshow",this.verifyInviewT)},t.prototype.verifyInview=function(){if(this.allWidgetsAreReady)for(var e,t=this.objects.length-1;e=this.objects[t];t--)i.apply(this,[e.element,e.modalCalc])&&o.apply(this,[e.element])&&(e.callback.apply(),this.objects.splice(t,1),e.modalCalc&&this.modalObjCounter--,0==this.modalObjCounter&&this.unbindEvents(e.element),0==this.objects.length&&this.unbindEvents())},t.prototype.saveWinOffset=function(){this.winHeight=window.innerHeight||document.documentElement.clientHeight,this.winWidth=window.innerWidth||document.documentElement.clientWidth},t}(Yotpo),document.getElementsByClassName||(document.getElementsByClassName=function(e){return this.querySelectorAll("."+e)},Element.prototype.getElementsByClassName=document.getElementsByClassName),"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Object.keys||(Object.keys=function(){"use strict";var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),o=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=o.length;return function(n){if("object"!=typeof n&&("function"!=typeof n||null===n))throw new TypeError("Object.keys called on non-object");var r,s,a=[];for(r in n)e.call(n,r)&&a.push(r);if(t)for(s=0;i>s;s++)e.call(n,o[s])&&a.push(o[s]);return a}}()),Yotpo.API=function(e){function t(e){this.instance=e}return t.prototype.changeProductID=function(t,o){var i=!1;e.forEach(this.instance.getWidgets(),function(e){e.settings.pid==t&&(e.settings.pid=o,i=!0)}),i&&this.instance.updateContent()},t.prototype.refreshWidgets=function(){this.instance.refreshWidgets()},t.prototype.openForm=function(t,o){var i=function(){if(o=o||1300,!t)throw"openForm must be passed a type(such as review|question)";var i=this.getWidgetByName("Main");if(!i||!i.get("element").getElementsByClassName("write-"+t+"-button"))throw"openForm must be called on a page with a main widget";i.get("element").getElementsByClassName("write-"+t+"-button")[0].click();for(var n=i.get("forms")[t+"s"].getElement().getBoundingClientRect().top,r=[document.body,document.documentElement],s=0;s<r.length;++s){var a=r[s],l=a.scrollTop;if(e.scrollTo(a,n+l,o,!0),l!==a.scrollTop)break}};"ready"==this.instance.getState()?i.call(this.instance):this.instance.on("ready",i)},t.prototype.setFormOpenCallback=function(t){var o=function(){e.forEach(this.getWidgetsByNames(["Testimonials","Main"]),function(e){e.writeContentCallback=t;var o=e.forms||{};for(var i in o){var n=i.substr(0,i.length-1),r=e.element.getElementsByClassName("write-"+n+"-button");if(r.length>0)for(var s=0;s<r.length;s++)r[s].open=function(){this.click()}}})};"ready"==this.instance.getState()&&o.call(this.instance),this.instance.on("ready",o)},t.prototype.trackConversion=function(t,o,i){var n={orderId:t,orderAmount:o,orderCurrency:i};e.Libraries.Tracker.trackConversionOrder(this.instance.appKey,n)},t}(Yotpo),Yotpo.ShareLink=function(e){function t(e,t){if(!o(e))throw"Type is not valid";this.type=e,i.call(this,t)}function o(t){return l&&(c={facebook:{url:a("facebook","feed_link"),options:function(t){var o={app_key:t.appkey,sku:t.sku,user_email:t.email},i={app_id:a("facebook","application_id"),display:"popup",link:t.social_link,redirect_uri:"http://"+e.hosts.b2b.dynamic+"/shares?"+e.convertHashToQueryStringParams(o)};return i}},twitter:{url:a("twitter","intent_link"),options:function(e){return{url:e.social_link,text:e.review_content,via:"yotpo"}}},google:{url:a("google","share_link"),options:function(e){return{url:e.social_link}}},linkedin:{url:a("linkedin","share_link"),options:function(e){return{mini:!0,url:e.social_link,title:e.review_title,source:"Yotpo",summary:e.review_content}}}},l=!1),c[t]}function i(t){t.social_link=d[this.type].call(this,t);var i=o(this.get("type"));this.link=i.url+"?"+e.convertHashToQueryStringParams(e.compact(i.options(t)))}function n(t){var o={image_url:decodeURIComponent(s(t.product_image_url)),product_url:s(t.product_url),review:t.review_content?t.review_content.replace(e.emojiRegex,""):"",social_title:t.review_title?t.review_title.replace(e.emojiRegex,""):""};return"https://"+e.hosts.reviews_me.dynamic+"/facebook_post?"+e.convertHashToQueryStringParams(o)}function r(t){var o={reference_name:this.get("type")+"_social_share",url:s(t.product_url||document.location.href),app_key:t.appkey,redirect:!0};return"https://"+e.hosts.base.dynamic+"/go?"+e.convertHashToQueryStringParams(o)}function s(e){return e&&/^\/\//i.test(e)?"http:"+e:e&&!/^https?:\/\//i.test(e)?"http://"+e:e}function a(t,o){return e.socialData[t][o]}var l=!0,c={},d={facebook:n,twitter:r,google:r,linkedin:r};return e.socialData={facebook:{application_id:null,consumer_secret:"",feed_link:"https://www.facebook.com/dialog/feed"},twitter:{intent_link:"https://twitter.com/intent/tweet"},google:{share_link:"https://plus.google.com/share"},linkedin:{share_link:"https://www.linkedin.com/shareArticle"}},t.prototype.get=function(e){return this[e]},t}(Yotpo),Yotpo.CustomFields=function(e){function t(t,o){function i(){e.currentAnalytics.trackEvent(l,"clicked_on","crf_free_text_expanded",o)}e.Modules.CollapsibleElement.bind(t,c,"yotpo-question-field-answer",i)}function o(e){var t=e.getElementsByClassName("product-related-fields-footer");if(t.length){var o=t[0],n=o.getElementsByClassName("product-related-fields-see-more")[0];n.onclick=function(){i.call(self,e)};var r=o.getElementsByClassName("product-related-fields-see-less")[0];r.onclick=function(){a.call(self,e)}}}function i(t){for(var o=t,i=o.getElementsByClassName("product-related-fields-column"),n=0;n<i.length;n++)for(var r=i[n],s=r.querySelectorAll(".product-related-fields-item.yotpo-hidden"),a=0;a<s.length;a++)e.show(s[a],"table-row");e.hide(o.getElementsByClassName("product-related-fields-see-more")[0]),e.show(o.getElementsByClassName("product-related-fields-see-less")[0],"block")}function n(t,o){for(var i=0;i<t.length;i++)for(var n=t[i],r=n.getElementsByClassName("product-related-fields-item"),s=o;s<r.length;s++)e.hide(r[s])}function r(e){var t=e.getElementsByClassName("product-related-fields-desktop-layout")[0],o=t.getElementsByClassName("product-related-fields-column");n(o,u)}function s(e){var t=e.getElementsByClassName("product-related-fields-mobile-layout")[0],o=t.getElementsByClassName("product-related-fields-column");n(o,p)}function a(t){var o=t;r(o),s(o),e.hide(o.getElementsByClassName("product-related-fields-see-less")[0]),e.show(o.getElementsByClassName("product-related-fields-see-more")[0],"block")}var l="reviews",c=349,d={},u=1,p=3;return d.bind=function(e,o){for(var i=0;i<e.length;i++){var n=e[i];n.classList.contains("yotpo-question-field")&&t(n,o)}},d.bindProductRelatedFields=function(e){for(var t=0;t<e.length;t++){var i=e[t];o(i)}},d}(Yotpo),Yotpo.CustomFieldsForm=function(e){function t(t){e.addClass(t.querySelector(".yotpo-field-title"),"yotpo-custom-field-error")}function o(t){var o=t.querySelector(".yotpo-custom-field-error");o&&e.removeClass(o,"yotpo-custom-field-error")}function i(t){var o=t.querySelector(".error-text");o&&e.hide(o)}function n(){for(var t=0;t<this.element.length;t++){var o=this.element[t];if(e.hasClass(o,"yotpo-mandatory-custom-field")){var i=o.querySelector("input, textarea").name,n=this.inputParams["custom_fields["+i+"]"];if(!n||n.constructor==Array&&!n.length)throw{message:"FieldNotValid:"+n,field:i,type:"mandatory_field"}}}}function r(){for(var t=0;t<this.element.length;t++){var o=this.element[t];if(e.hasClass(o,"yotpo-input-size-limited")){var i=parseInt(o.getAttribute("data-min-length")),n=parseInt(o.getAttribute("data-max-length")),r=o.querySelector("input, textarea").name,s=this.inputParams["custom_fields["+r+"]"];if(s&&s.length>0&&(s.length>n||s.length<i))throw{message:"FieldNotValid:"+s,field:r,type:"open_question_answer_length",template_vars:{max_length:n}}}}}function s(e,t,o){if("checkbox"===o){for(var i=[],n=e.querySelectorAll('input[name="'+t+'"]:checked'),r=0;r<n.length;r++)i.push(n[r].value);return i}if("textarea"===o){var s=e.querySelector('textarea[name="'+t+'"]');return s.value}var a=e.querySelector('input[name="'+t+'"]'+("hidden"!=o?":checked":""));return a?a.value:""}function a(){for(var e=0;e<this.element.length;e++){var t=this.element[e].getElementsByClassName("yotpo-open-text-field")[0];t&&l.call(t)}}function l(){var e=this.getElementsByClassName("yotpo-text-box")[0],t=parseInt(e.getAttribute("maxlength")),o=this.getElementsByClassName("current-chars")[0];e.onkeyup=function(){var i=e.value.length;i>t&&(e.value=e.value.substring(0,t),i=t),o.innerHTML=i}}var c=function(e){this.element=e,this.inputParams={},this.fieldElements={},a.call(this)};return c.prototype.getFieldElement=function(e){return this.fieldElements[e]?this.fieldElements[e]:null},c.prototype.getValues=function(){this.inputParams={};for(var t=0;t<this.element.length;++t){var o=this.element[t];if(!e.isHidden(o)||e.hasClass(o,"yotpo-product-tag-param")){var i=o.querySelector("input, textarea"),n=i.name,r=i.type,a=s(o,n,r);this.fieldElements[n]=o,"product_tags"==n?this.inputParams[n]=a:e.isEmptyString(a)||(this.inputParams["custom_fields["+n+"]"]=a)}}return this.inputParams},c.prototype.reset=function(){for(var e=0;e<this.element.length;++e){var t=this.element[e].querySelector("input, textarea"),o=t.type;if("textarea"===o)t.value="";else for(var i=this.element[e].querySelectorAll('input[type="'+o+'"]:checked'),n=0;n<i.length;++n)i[n].checked=!1}},c.prototype.cleanErrors=function(){for(var e=0;e<this.element.length;++e){var t=this.element[e];o(t),i(t)}},c.prototype.validate=function(){n.call(this),r.call(this)},c.prototype.showFieldError=function(o,i){t(o);var n=o.getElementsByClassName(i)[0];n&&e.show(n)},c}(Yotpo),Yotpo.CustomFieldsRenderer=function(e){function t(e){var t={};for(var o in e)o.indexOf("custom_fields")>-1&&(t[o]=e[o]);return t}function o(t,o,i){if(!o)return!1;for(var n=!1,r=0;r<i.length;r++){var s=i[r],a=s.querySelector(".yotpo-template-field").cloneNode(!0);a.querySelector(".yotpo-field-description").innerHTML=t+":",a.querySelector(".yotpo-field-answer").innerHTML=o,e.removeClass(a,"yotpo-hidden"),e.removeClass(a,"yotpo-template-field"),s.appendChild(a),n=!0}return n}function i(e,t,o,i,n){var s=e.querySelector(".yotpo-product-related-fields"),l=2;t&&(l=t%2==1?0:1);var c=s.querySelectorAll(".yotpo-product-related-fields-column")[l];r(c,i),a(c,o,n)}function n(t,o,i,n,r,a){var c,d=t.querySelector(".yotpo-product-related-fields");if(o){var p=i%u,g=d.querySelector(".product-related-fields-desktop-layout");c=g.querySelectorAll(".product-related-fields-column")[p]}else{var g=d.querySelector(".product-related-fields-mobile-layout");c=g.querySelector(".product-related-fields-column")}var h=c.querySelector(".product-related-fields-item"),m=h.cloneNode(!0);e.removeClass(m,"yotpo-hidden"),e.removeClass(m,"yotpo-template-field"),s(m,r),l(m,n,a),c.appendChild(m)}function r(t,o){var i=t.querySelector(".yotpo-product-related-fields-names"),n=i.querySelector(".yotpo-product-related-field-name.yotpo-template-field"),r=n.cloneNode(!0);r.innerHTML=o+":",e.removeClass(r,"yotpo-hidden"),e.removeClass(r,"yotpo-template-field");var s=document.createElement("div");s.appendChild(r),i.insertAdjacentHTML("beforeend",s.innerHTML)}function s(e,t){var o=e.querySelector(".product-related-fields-item-title");o.innerHTML=t}function a(t,o,i){var n=t.querySelector(".yotpo-product-related-fields-bars"),r=n.querySelector(".yotpo-"+o.toLowerCase()+"-bars.yotpo-template-field"),s=r.cloneNode(!0);c(i,s,o),e.removeClass(s,"yotpo-hidden"),e.removeClass(s,"yotpo-template-field");var a=document.createElement("div");a.appendChild(s);var l=document.createElement("div");e.addClass(l,"yotpo-clr"),a.appendChild(l),n.insertAdjacentHTML("beforeend",a.innerHTML)}function l(t,o,i){var n,r=t.querySelector(".product-related-fields-item-value"),s=o.toLowerCase();if("rating"==s){var a=t.querySelector(".yotpo-"+s+"-bars.yotpo-template-field");n=a.cloneNode(!0),c(i,n,o),e.removeClass(n,"yotpo-hidden"),e.removeClass(n,"yotpo-template-field")}else"size"==s&&(n=document.createTextNode(i));var l=document.createElement("div");l.appendChild(n);var d=document.createElement("div");e.addClass(d,"yotpo-clr"),l.appendChild(d),r.insertAdjacentHTML("beforeend",l.innerHTML)}function c(t,o,i){var n=parseInt(t),r=o.getElementsByClassName("yotpo-product-related-field-score-bar");switch(i.toLowerCase()){case"rating":for(var s=0;s<r.length&&n>=s+1;s++)e.addClass(r[s],"yotpo-rating-bar-full");break;case"size":var a=r[2*(n-1)],l=2==n?"fit":"offset";e.removeClass(a,"yotpo-size-bar-empty"),e.addClass(a,"yotpo-size-bar-"+l)}}var d={},u=3;return d.render=function(r,s){var a=yotpo.getUserSettings().custom_fields_info,l=yotpo.getUserSettings().new_main_widget_layout,c={".yotpo-product-related-fields":!1,".yotpo-user-related-fields":!1,".yotpo-open-question-fields":!1},d=1,u=t(s);for(var p in u){var g=p.match(/\[(.*?)\]/).pop(),h=a[g].field_type,m=a[g].title,f=u[p];if(["Rating","Size"].indexOf(h)>-1&&f>0){if(l){if("Size"==h){var y=parseInt(f);f=a[g].options[y-1]}n(r,!0,d-1,h,m,f),n(r,!1,null,h,m,f)}else i(r,d,h,m,f),i(r,null,h,m,f);d++,c[".yotpo-product-related-fields"]=!0}else if(["SingleChoice","MultipleChoice"].indexOf(h)>-1){if(f instanceof Array){if(!(f.length>0))continue;f=f.join(", ")}var v=r.querySelectorAll(".yotpo-user-related-fields"),w=o(m,f,v);w&&(c[".yotpo-user-related-fields"]=!0)}else if(["CustomerFreeText","ProductFreeText"].indexOf(h)>-1){var b=r.querySelectorAll(".yotpo-open-question-fields");f&&(f=f.replace(/\n/g,"</br>"));var w=o(m,f,b);w&&(c[".yotpo-open-question-fields"]=!0)}}for(var _ in c)if(!c[_]){var S=r.querySelector(_);S&&e.addClass(S,"yotpo-hidden")}},d}(Yotpo),Yotpo.Libraries=Yotpo.Libraries||{},Yotpo.Libraries.Tracker=function(e){var t={};return t.trackConversionOrder=function(t,o){var i=o.orderId,n=o.orderAmount,r=o.orderCurrency;t&&i&&n&&r&&e.Libraries.YotpoTracker.trackConversionOrder(t,o)},t.fbTracking=function(t,o){var i=new e.Libraries.FacebookAds(t.pixel_id);1==t.page_view&&i.trackPageView(),1==t.purchase&&o&&i.trackPurchase(o)},t}(Yotpo),Yotpo.Libraries=Yotpo.Libraries||{},Yotpo.Libraries.YotpoTracker=function(e){var t=1,o={};return o.adaptConversionOrderObject=function(e){var t=[];if(e.products)for(var o=0;o<e.products.length;++o){var i=e.products[o];t.push({id:i.productId,name:i.productName,url:i.productUrl,image:i.productImage,price:i.productPrice,description:i.productDescription,specs:i.productSpecs})}var n={order_id:e.orderId,order_amount:e.orderAmount,order_currency:e.orderCurrency,order_date:e.orderDate,customer_name:e.customerName,customer_email:e.customerEmail,products:t};return n},o.trackConversionOrder=function(o,i){var n=e.getApiHost()+"/conversion_tracking?app_key="+o+"&v="+t,r=function(t){t=JSON.parse(t),e.currentAnalytics.trackConversion(t.appKey,t.orderId,t.orderAmount,t.orderCurrency)},s=this.adaptConversionOrderObject(i),a=e.removeUndefinedFields(s);e.ajax(n,r,"POST",e.convertComplexObjectToQueryStringParams(a))},o}(Yotpo),Yotpo.Libraries=Yotpo.Libraries||{},Yotpo.Libraries.FacebookAds=function(){function e(e){window.fbq&&t()||(!function(e,t,o,i,n,r,s){e.fbq||(n=e.fbq=function(){n.callMethod?n.callMethod.apply(n,arguments):n.queue.push(arguments)},e._fbq||(e._fbq=n),n.push=n,n.loaded=!0,n.version="2.0",n.queue=[],r=t.createElement(o),r.async=!0,r.src=i,s=t.getElementsByTagName(o)[0],s.parentNode.insertBefore(r,s))}(window,document,"script","//connect.facebook.net/en_US/fbevents.js"),fbq("init",e),fbq.yotpoInited=!0)}function t(){return"undefined"!=typeof yotpoTrackConversionData}var o=.01,i="USD";return e.prototype.trackPageView=function(){fbq("track","PageView")},e.prototype.trackPurchase=function(e){var t={};t.value=e.orderAmount?e.orderAmount:o,t.currency=e.orderCurrency?e.orderCurrency:i,e.orderSkus&&(t.content_ids=e.orderSkus,t.content_type="product"),fbq.yotpoInited&&fbq("track","Purchase",t)},e}(Yotpo),Yotpo.Widgets=Yotpo.Widgets||{},Yotpo.Widgets.Lightbox=function(e){function t(e,t,o,i,n,r){this._controller=e,this.element=t,this.contentProvider=o,this.analyticTracker=i||{track:function(){}},this.wrapperElement=n,this.minImageContainers=r?r+2:b,w.call(this),f.call(this)}function o(){var e=1===this.currImageIndex?this.numLightboxImages-1:this.currImageIndex-2,t=this.currImageIndex-1,o=this.currImageIndex===this.numLightboxImages?0:this.currImageIndex;return{prev:this.imagesInfo[e],current:this.imagesInfo[t],next:this.imagesInfo[o]}}function i(e){c.call(this,e),d.call(this),y.call(this)}function n(){for(var e=0;e<this.numImageContainers;e++)this.lightboxImageContainers[e].style.width=100/this.numImageContainers+"%";this.lightboxContainer.style.width=100*this.numImageContainers+"%"}function r(){for(var t=0;t<this.lightboxImageContainers.length;t++){var o=this.lightboxImageContainers[t];t<this.numImageContainers?e.removeClass(o,"yotpo-hidden"):e.addClass(o,"yotpo-hidden")}}function s(e,t){e.src!==t.src&&(e.src=t.url),e.setAttribute("data-image-id",t.imageId),t.externalImageId&&e.setAttribute("data-external-image-id",t.externalImageId)}function a(t){var o=t.index;y.call(this),e.removeClass(this.lightboxContainer,"yotpo-hidden"),e.addClass(this.loader,"yotpo-hidden"),e.removeClass(this.lightboxImages[o],"yotpo-hidden"),g.call(this),u.call(this);var i=t.id;e.currentAnalytics.trackUniqueEvent(this.analyticTracker.category,"shown","image",i)}function l(){var t=this;this.body_overflow_style=document.body.style.overflow,document.body.style.overflow="hidden",setTimeout(function(){e.addClass(t.modal,"yotpo-modal-active"),e.addClass(t.mask,"yotpo-active-display"),setTimeout(function(){e.addClass(t.modalContainer,"yotpo-active-display")},100)},10),t.wrapperElement&&document.body.appendChild(t.wrapperElement),p.call(this),m.call(this),e.addClass(t.lightboxContainer,"yotpo-hidden"),e.removeClass(t.loader,"yotpo-hidden")}function c(e){this._controller.appKey,this.review=this.contentProvider.getContent(e);for(var t=this.lightboxContentContainer;t.hasChildNodes();)t.removeChild(t.lastChild);t.appendChild(this.review)}function d(){e.Modules.Handle.popup.call(this.lightboxContentContainer)}function u(){this.rightArrow.style.display=this.leftArrow.style.display=1===this.numLightboxImages?"none":"block"}function p(){this.rightArrow.style.display=this.leftArrow.style.display="none"}function g(){var e=this;this.oldKeyDownFunction=document.onkeydown,document.onkeydown=function(t){switch(t=t||window.event,t.keyCode){case 27:e.close();break;case 37:if(1===e.numLightboxImages)break;e.slide(C.PREVIOUS_IMAGE);break;case 39:if(1===e.numLightboxImages)break;e.slide(C.NEXT_IMAGE)}}}function h(){document.onkeydown=this.oldKeyDownFunction}function m(){var t,o,i=this._controller.getWidgetByName("Testimonials"),n=this._controller.getWidgetByName("Main");i&&n&&(t=i.getElement(),o=t.querySelector("#yotpo_testimonials_btn"),e.toggleClass(o,"only-invisible"),e.toggleClass(o,"yotpo-hidden"))}function f(){var e=this;this.mask.onclick=this.modalDialog.onclick=this.closeBtn.onclick=function(){e.close()},this.leftArrow.onclick=function(){e.slide(C.PREVIOUS_IMAGE)},this.rightArrow.onclick=function(){e.slide(C.NEXT_IMAGE)};for(var t=0;t<this.lightboxImages.length;++t)this.lightboxImages[t].onclick=function(e){e&&"undefined"!=typeof e.stopPropagation&&e.stopPropagation()}}function y(){var e=this.lightboxContentContainer.querySelector('.social-link[data-network="facebook"]');if(e){var t,o=e.href.split("&picture")[0];t=o+"&picture="+this.lightboxImages[this.currImageIndex].src,e.href=t}}function v(){this.lightboxImages=this.lightboxContainer.querySelectorAll(".yotpo-lightbox-image"),this.lightboxImageContainers=this.lightboxContainer.querySelectorAll(".yotpo-lightbox-image-container")}function w(){this.currImageIndex=0,this.lightbox=this.element,this.modalContainer=this.lightbox.getElementsByClassName("yotpo-lightbox-container")[0],this.lightboxContentContainer=this.lightbox.getElementsByClassName("yotpo-lightbox-content-container")[0],this.lightboxContainer=this.lightbox.getElementsByClassName("y-slider-container")[0],v.call(this),this.closeBtn=this.lightbox.getElementsByClassName("yotpo-icon-btn-small")[0],this.modal=this.lightbox.getElementsByClassName("yotpo-modal")[0],this.modalDialog=this.modal.getElementsByClassName("yotpo-modal-dialog")[0],this.mask=this.modal.getElementsByClassName("yotpo-modal-mask")[0],this.loader=this.modal.getElementsByClassName("yotpo-image-loader-wrapper")[0],this.leftArrow=this.lightbox.getElementsByClassName("yotpo-icon-left-arrow-thin")[0],this.rightArrow=this.lightbox.getElementsByClassName("yotpo-icon-right-arrow-thin")[0]}var b=5,_=1,S=1,C={NEXT_IMAGE:"next",PREVIOUS_IMAGE:"previous"};return t.prototype.open=function(t,c){var d,u,p=[];this.isOpen=!0,this.isSliding=!1,u=this.contentProvider.getImages(t),this.numLightboxImages=u.length,this.numImageContainers=this.numLightboxImages+2,this.numImageContainers<this.minImageContainers&&(this.numImageContainers=this.minImageContainers),this.slider=new e.Modules.Slide(this.lightboxContainer,{imageCount:this.numLightboxImages,displayWindowCount:_}),this.slider.start();var g=t.getAttribute("data-image-id");for(d=0;d<this.numLightboxImages;d++){var h=u[d].getAttribute("data-original-src"),m=u[d].getAttribute("data-image-id"),f=u[d].getAttribute("data-external-image-id");p.push({url:h,imageId:m,externalImageId:f}),m===g&&(this.currImageIndex=d+1,this.slider.setCurrentPosition(this.currImageIndex))}this.imagesInfo=p,c&&r.call(this),n.call(this),l.call(this);var y=o.call(this),v=this;e.preloadImages([y.prev,y.current,y.next],function(e){a.call(v,e)},{index:v.currImageIndex,id:y.current.imageId}),s(this.lightboxImages[this.currImageIndex],y.current),i.call(this,t),this.analyticTracker.track("loaded",null,this.numLightboxImages)},t.prototype.close=function(){var t=this;this.isOpen&&(this.isOpen=!1,e.removeClass(t.modalContainer,"yotpo-active-display"),setTimeout(function(){e.removeClass(t.mask,"yotpo-active-display"),setTimeout(function(){e.removeClass(t.modal,"yotpo-modal-active"),m.call(t);for(var o=0;o<t.numImageContainers;o++)t.lightboxImages[o].src="#";document.body.style.overflow=t.body_overflow_style,e.Modules.Event.trigger("popupClosed")},300)},300),h.call(this),t.wrapperElement&&document.body.removeChild(t.wrapperElement))},t.prototype.slide=function(t){if(!this.isSliding){this.isSliding=!0,t==C.NEXT_IMAGE?(this.currImageIndex+=1,this.currImageIndex>this.numLightboxImages&&(this.currImageIndex=1),this.slider.right(),this.analyticTracker.track("clicked_on","popup_next_image",null)):(this.currImageIndex+=-1,0==this.currImageIndex&&(this.currImageIndex=this.numLightboxImages),this.slider.left(),this.analyticTracker.track("clicked_on","popup_previous_image",null));var n=this.lightboxImages[this.currImageIndex].attributes.src.value,r=n.length<=S;r&&(e.removeClass(this.loader,"yotpo-hidden"),e.addClass(this.lightboxImages[this.currImageIndex],"yotpo-hidden"));var l=o.call(this),c=this.lightboxImages[this.currImageIndex];s(c,l.current),i.call(this,c);var d=this;e.preloadImages([l.prev,l.current,l.next],function(e){a.call(d,e)},{index:d.currImageIndex,id:l.current.imageId}),setTimeout(function(){d.isSliding=!1},500)}},t}(Yotpo),Yotpo.ReviewContentCreator=function(e){var t={getElement:function(t,o){var i=t.cloneNode(!0);elements=i.querySelectorAll(".yotpo-review-images-wrapper, .yotpo-multiple-rating-fields, .yotpo-user-related-fields");for(var n=0;n<elements.length;n++)elements[n].parentNode.removeChild(elements[n]);e.removeClass(i,"yotpo-regular-box");var r=e.Review.load(i,o);return r.setOriginalElement(t),i
}};return t}(Yotpo),Yotpo.InstagramContentCreator=function(e){var t={getElement:function(t,o){var i=t.cloneNode(!0);return e.InstagramPost.load(i,t,o),i}};return t}(Yotpo),Yotpo.ProductContentCreator=function(e){function t(e){this.contentCreator=e}function o(t,o,i){var n=t.parentElement.querySelector(".yotpo-lightbox-products-container");if(n){var r=n.cloneNode(!0);e.TaggedProducts.load(r,i);var s=document.createElement("div");return s.appendChild(r),s.appendChild(o),s}return o}return t.prototype.getElement=function(e,t){var i=this.contentCreator.getElement(e,t);return o(e,i,t)},t}(Yotpo),Yotpo.SingleReviewContentProvider=function(e){function t(){this.reviewElement=null,this.analyticsCategory="reviews"}return t.prototype.clear=function(){this.reviewElement=null},t.prototype.getImages=function(e){return e.parentNode.getElementsByClassName("image-review")},t.prototype.getContent=function(t){if(!this.reviewElement){var o=e.Modules.Helper.findAncestorByClass(t,"yotpo-review");this.reviewElement=e.ReviewContentCreator.getElement(o,this.analyticsCategory)}return this.reviewElement},t}(Yotpo),Yotpo.SliderContentProvider=function(e){function t(t,o,i){this.images=t,this.contents=o,this.analyticsCategory="pictures_widget_popup",this.reviewContentCreator=i?new e.ProductContentCreator(e.ReviewContentCreator):e.ReviewContentCreator,this.instagramContentCreator=i?new e.ProductContentCreator(e.InstagramContentCreator):e.InstagramContentCreator}function o(t,o,i){var n=this,r=t.querySelector(o);r&&e.addEventListener(r,"click",function(){e.currentAnalytics.trackEvent(n.analyticsCategory,"clicked_on",i)})}function i(e){o.call(this,e,".facebook","share_facebook"),o.call(this,e,".twitter","share_twitter")}return t.prototype.getImages=function(){return this.images},t.prototype.getContent=function(e){var t,o=e.getAttribute("data-image-id"),n=this.contents.querySelector(".yotpo-slider-content-"+o);if("review"===n.getAttribute("data-source")){var r=n.querySelector(".yotpo-review");t=this.reviewContentCreator.getElement(r,this.analyticsCategory)}else if("instagram"===n.getAttribute("data-source")){var s=n.querySelector(".yotpo-instagram");t=this.instagramContentCreator.getElement(s,this.analyticsCategory)}else if("onsite_upload"===n.getAttribute("data-source")||"import"===n.getAttribute("data-source")){var a=n.querySelector(".yotpo-onsite-upload");t=this.instagramContentCreator.getElement(a,this.analyticsCategory)}return i.call(this,t),t},t}(Yotpo),Yotpo.TaggedProducts=function(e){function t(e,t){this.element=e,this.analyticsCategory=t,i.call(this),o.call(this)}function o(){for(var t=this,o=0;o<this.smallProducts.length;o++)e.addEventListener(this.smallProducts[o],"click",function(){t.changeProduct(this)})}function i(){this.smallProducts=this.element.querySelectorAll(".yotpo-lightbox-product-select-image"),this.selectedProduct=this.element.querySelector(".yotpo-lightbox-product-selected"),this.products=this.element.querySelectorAll(".yotpo-lightbox-product")}return t.load=function(t,o){return new e.TaggedProducts(t,o)},t.prototype.changeProduct=function(t){e.removeClass(this.selectedProduct,"yotpo-lightbox-product-selected"),this.selectedProduct=t,e.addClass(this.selectedProduct,"yotpo-lightbox-product-selected");for(var o=this.selectedProduct.getAttribute("data-product-id"),i=0;i<this.products.length;i++)this.products[i].getAttribute("data-product-id")===o?e.removeClass(this.products[i],"yotpo-hidden"):e.addClass(this.products[i],"yotpo-hidden")},t}(Yotpo),Yotpo.ImagesHandler=function(e){function t(e,t){this.imageWidget=t,this.appKey=e}function o(e,t,o){if(o||(o=n),t<e.length){var i=e[t].querySelector(r);if(i)return i.getAttribute(o)}return-1}function i(e,t){for(var o=0;o<e.length;o++)if(e[o].id===t)return!0;return!1}var n="data-image-id",r=".yotpo-image",s=".y-image-overlay",a="data-original-src";return t.prototype.reportInvalidImages=function(t){for(var o=[],i=0;i<t.length;i++)if(t[i].reported!==!0){t[i].reported=!0;var n=t[i].source;o.indexOf(t[i].id)<0&&"instagram"===n&&o.push(t[i].id)}if(o.length>0){var r=.2,s=t.length>this.imageWidget.getImageElements().length*r;e.reportBrokenImages(this.appKey,o,"media",s)}},t.prototype.removeBrokenImages=function(t){for(var i=this.imageWidget.getImageElements(),n=0;n<i.length;n++){var r=o(i,n);t.indexOf(r)>-1&&e.remove(i[n])}},t.prototype.replaceBrokenImages=function(t){for(var n=this.imageWidget.getImageElements(),l=e.getDefualtImage(),c=0;c<n.length;c++){var d=o(n,c);if(i(t,d)){var u=n[c].querySelector(r);u.setAttribute("src",l.size_180);var p=n[c].querySelector(s);p.setAttribute(a,l.size_656)}}},t.prototype.getImageSource=function(e){var t=null,o=this.imageWidget.element.querySelector('.yotpo-single-image-container [data-image-id="'+e+'"]');if(o){var i=o.parentElement.querySelector(".y-image-overlay");t=i.getAttribute("data-source")}return t},t.prototype.loadImages=function(t,i,n){for(var r=this.imageWidget.getImageElements(),s=[],a=0;a<r.length;a++){var l=o(r,a,"src"),c=o(r,a);s.push({url:l,imageId:c})}e.preloadImages(s,t,this.imageWidget,i,this.imageWidget,n)},t}(Yotpo),Yotpo.ImagesAnalyticsHandler=function(e){function t(e,t,o){this.element=e,this.imageElements=t,this.tracker=o}function o(e){var t=e.querySelector(".y-image-overlay"),o=t?t.getAttribute("data-source"):"source",i=t?t.getAttribute("data-image-id"):"unkown";return o+"_image_"+i}return t.prototype.bindBaseImagesAnalytics=function(){var t=this;e.currentInview.register(this.element,function(){t.tracker.track("shown",null,null)});for(var i=0;i<this.imageElements.length;i++){var n=this.imageElements[i];e.currentInview.register(n,function(e){return function(){t.tracker.track("shown","image",o(e))}}(n)),e.addEventListener(n,"click",function(){t.tracker.track("clicked_on","image",o(this))})}},t}(Yotpo),Yotpo.AnalyticsTracker=function(e){function t(e,t){this.category=e,this.eventContext=t}return t.prototype.track=function(t,o,i){e.currentAnalytics.trackEvent(this.category,t,o,i,this.eventContext)},t}(Yotpo),Yotpo.ShoppableProductsSlider=function(e){function t(t,o,i){this._controller=t,this.element=i,this.titleElement=document.createElement("div"),e.addClass(this.titleElement,"yotpo-shoppable-tagged-products-title"),this.element.appendChild(this.titleElement),this.productsElement=document.createElement("div"),e.addClass(this.productsElement,"yotpo-shoppable-products-elements"),this.element.appendChild(this.productsElement),this.analyticsTracker=o,r.call(this)}function o(t){this.mobileSlider=new e.Modules.MobileSlide(this.productsElement,t||{})}function i(t,i,r,a){var l=[{method:"promoted_products",params:{domain_key:t[0].domainKey,widget:"shoppable_instagram"},format:"json"}];this.currentOpenViewImageId=i,this._controller.getBatch(function(l){if(this.currentOpenViewImageId===i){this.currentOpenViewImageId=null;var c=JSON.parse(l);c=c[0].result;for(var u=[],p=0;p<c.promoted_products.length;p++)n(t,c.promoted_products[p].products_app_id)||u.push({id:c.promoted_products[p].products_app_id,name:c.promoted_products[p].name,link:c.promoted_products[p].url,imageUrl:c.promoted_products[p].image,score:c.promoted_products[p].average_score,reviewsCount:c.promoted_products[p].total_review});u.length>0&&(e.removeClass(this.element,"yotpo-hidden"),s.call(this,u,r,a,!0),o.call(this,{separatorSize:20,separatorClass:d}),t.length>1?this.titleElement.innerHTML+=" and related products":this.titleElement.innerHTML="Related products")}}.bind(this),l)}function n(e,t){for(var o=0;o<e.length;o++)if(t==e[o].id)return!0}function r(){var t=document.createElement("div");e.addClass(t,"yotpo-mobile-slides-container"),this.mobileSliderElement=document.createElement("div"),e.addClass(this.mobileSliderElement,"yotpo-mobile-slider"),this.mobileSliderElement.appendChild(t),this.productsElement.appendChild(this.mobileSliderElement)}function s(t,o,i,n){for(var r=this.mobileSliderElement.querySelector(".yotpo-mobile-slides-container"),s=0;s<t.length;s++){var l=a.call(this,t[s],o,i);r.appendChild(l),n&&0==s&&e.addClass(l,d)}}function a(t,o,i){var n=this,r=document.createElement("span");e.addClass(r,"yotpo-mobile-slide"),e.addClass(r,"yotpo-shoppable-product");var s=document.createElement("a");s.href=t.link,e.addEventListener(s,"click",function(){n.analyticsTracker.track("clicked_on","shop_now")});var a=document.createElement("img");a.src=t.imageUrl,e.addClass(a,"yotpo-shoppable-product-image"),s.appendChild(a);var d=document.createElement("div");if(d.innerHTML=t.name,e.addClass(d,"yotpo-shoppable-product-name"),s.appendChild(d),o){var u=l(t.score,t.reviewsCount);s.appendChild(u)}if(i){var p=c(i);s.appendChild(p)}return r.appendChild(s),r}function l(t,o){var i=document.createElement("div");e.addClass(i,"yotpo-shoppable-gallery-header-reviews-stars");var n=e.getStars(t);o||(o=0);var r=document.createElement("span");return e.addClass(r,"yotpo-shoppable-product-reviews-count"),r.innerHTML="("+o+")",n.appendChild(r),i.appendChild(n),i}function c(t){var o=document.createElement("button");return e.addClass(o,"yotpo-shoppable-product-button"),o.innerHTML=t,o}var d="yotpo-shoppable-separator";return t.prototype.adjustSize=function(){this.mobileSlider.adjustSize()},t.prototype.showElement=function(t,n,r,a,l){return this.titleElement.innerHTML="",t.length>1?(e.removeClass(this.element,"yotpo-hidden"),this.titleElement.innerHTML="Tagged products",s.call(this,t,n,r),o.call(this)):e.addClass(this.element,"yotpo-hidden"),a&&i.call(this,t,l,n,r),this.element},t.prototype.destroy=function(){for(var e=this.element;e.hasChildNodes();)e.removeChild(e.firstChild);this.mobileSlider&&this.mobileSlider.destroy()},t}(Yotpo),Yotpo.SuggestedTopics=function(e){function t(t,o){for(var i=t.getElementsByClassName("suggested-topic"),n=t.getElementsByClassName("suggested-topics-row"),r=null,s=null,a=null,l=null,c=0;c<i.length;c++)e.addEventListener(i[c],"click",function(){if(r=t.querySelector(".active-topic"),null!==r){var i=r.querySelector(".suggested-topic-text");i&&(s=i.innerHTML.trim()),e.removeClass(r,"active-topic")}l=this===r,l?a=null:(a=this.querySelector(".suggested-topic-text").innerHTML.trim(),e.addClass(this,"active-topic")),o(s,a)});var d=t.querySelector(".suggested-topic-expand");d&&e.addEventListener(d,"click",function(){for(var t=0;t<i.length;t++)e.removeClass(i[t],"yotpo-hidden");for(var t=0;t<n.length;t++)e.removeClass(n[t],"yotpo-hidden");e.addClass(this,"yotpo-hidden")})}var o={};return o.bind=function(e,o){for(var i=0;i<e.length;i++)t(e[i],o)},o.resetSelectedTopic=function(t){for(var o=0;o<t.length;o++)e.removeClass(t[o],"active-topic")},o}(Yotpo),Yotpo.Modules=Yotpo.Modules||{},Yotpo.Modules.CollapsibleElement=function(e){function t(e,t,o){var i=e.getAttribute("yotpo-content-collapsed");if(null!==i)return!1;var n=e.getElementsByClassName(o)[0],r=n.innerHTML;return r.length>t}function o(t,o,i){var n=t.getElementsByClassName(i)[0],r=n.innerHTML,s=r.substr(o-10,20),a=s.search(/(<[^>]*>)/);o=a>0?o-10+a:o;var l=r.substring(0,o)+"<span class='yotpo-read-more' data-position='closed'>..."+e.texts.read_more+"</span>",c='<p class="rest-content-collapsed">'+r.substring(o)+"<span class='yotpo-read-more' data-position='opened'>"+e.texts.read_less+"</span></p>";return n.innerHTML=l+c,!0}function i(t,o){var i=t.getElementsByClassName("rest-content-collapsed")[0],n=t.getElementsByClassName("yotpo-read-more"),r=!1;"function"==typeof o&&(r=!0);for(var s=0;s<n.length;++s)n[s].onclick=function(){if("closed"==this.getAttribute("data-position"))this.style.display="none",e.Animations.fadeIn(i,"1000"),r&&o();else{var t=this.parentNode.parentNode.querySelector(".yotpo-read-more[data-position=closed]");e.Animations.fadeOut(i,"500"),setTimeout(function(){t.style.display="inline"},500)}}}var n={};return n.bind=function(e,n,r,s){t(e,n,r)&&(o(e,n,r),i(e,s),e.setAttribute("yotpo-content-collapsed",!0))},n}(Yotpo),Yotpo.Modules=Yotpo.Modules||{},Yotpo.Modules.DynamicLayout=function(e){function t(t,r){this.elementsContainer=t,this.settings=r,o.call(this),e.isMobile()?i.call(this):n.call(this),r.animation&&s.call(this)}function o(){this.clickableElements=this.elementsContainer.querySelectorAll(this.settings.clickable_elements_selector||a),this.expandableElementContainer=this.elementsContainer.querySelector(this.settings.expandable_element_container_selector||l)}function i(){this.mobileSlider=new e.Modules.MobileSlide(this.elementsContainer,{slidesSelector:this.settings.clickable_elements_selector||a,fixedSlideWidth:this.settings.mobile_slides_fixed_width||d})}function n(){this.expandableElementContainer&&(this.expandableElementContainer.onclick=r.bind(this))}function r(){for(var t=0;t<this.clickableElements.length;t++)e.removeClass(this.clickableElements[t],"yotpo-hidden");e.addClass(this.expandableElementContainer,"yotpo-hidden")}function s(){for(var e=0;e<this.clickableElements.length;e++)this.clickableElements[e].complete?(this.clickableElements[e].style.transition="opacity 1s",this.clickableElements[e].style.opacity="1"):this.clickableElements[e].onload=function(){this.style.transition="opacity 1s",this.style.opacity="1"};if(this.expandableElementContainer){var t=this.expandableElementContainer.querySelector(this.settings.expandable_element_selector||c);t.onload=function(){this.style.transition="opacity 1s",this.style.opacity="0.8"}}}var a=".image-review",l=".expandable-image-container",c=".expandable-image",d=80;return t}(Yotpo),Yotpo.Modules=Yotpo.Modules||{},Yotpo.Modules.ButtonEndlessScroll=function(e){function t(t,o,i,n,r){var s=EndlessScroll(e);return new s(t,o,i,n,!0,r)}return t}(Yotpo),Yotpo.Modules.InviewEndlessScroll=function(e){function t(t,o,i,n){var r=EndlessScroll(e);return new r(t,o,i,n,!1)}return t}(Yotpo),Yotpo.Modules=Yotpo.Modules||{},Yotpo.Modules.Event=function(e){var t={};return t.on=function(e,t){this.callbacks=this.callbacks||{},this.callbacks[e]=this.callbacks[e]||[],this.callbacks[e].push(t)},t.trigger=function(t,o,i){var n=this;e.forEach(n.callbacks&&n.callbacks[t]||[],function(e){e.call(n,o,i)})},t.removeEvent=function(e){var t=this;t.callbacks[e]&&delete t.callbacks[e]},t}(Yotpo),Yotpo.Modules=Yotpo.Modules||{},Yotpo.Modules.GallerySettings=function(e){function t(){}function o(e,t){t.use_div_settings=e.hasAttribute("data-source")||e.classList.contains("yotpo-pictures-widget")}function i(e,t){var o=e.getAttribute("data-album-id");o&&(t.album_id=o,t.sorting_enabled=!1)}function n(e,t){t.source=e.getAttribute("data-source")||t.source,"all"===t.source&&(t.source=["yotpo_reviews","instagram","onsite_upload","import"]),t.sort=e.getAttribute("data-sort")||t.sort}function r(e,t){t.title=t.title||{},t.title.show_title=e.getAttribute("data-title")?"1"===e.getAttribute("data-title"):t.title.show_title,t.title.text=e.getAttribute("data-title-text")||t.title.text,t.title.color=e.getAttribute("data-title-color")||t.title.color,t.title.alignment=e.getAttribute("data-title-alignment")||t.title.alignment,t.title.font_size=(e.getAttribute("data-title-font-size")||t.title.font_size)+"px",t.title.mobile_font_size=(e.getAttribute("data-title-mobile-font-size")||t.title.mobile_font_size)+"px"}function s(e,t){t.button={},t.button.show_button=e.getAttribute("data-upload-button")?"1"===e.getAttribute("data-upload-button"):!1,t.button.text=e.getAttribute("data-upload-button-text"),t.button.text_color=e.getAttribute("data-upload-button-text-color"),t.button.background_color=e.getAttribute("data-upload-button-background-color"),t.button.font_family=e.getAttribute("data-upload-button-font-family"),t.title.alignment=!t.title.alignment||!t.title.show_title&&t.button.show_button?"left":t.title.alignment,t.button.alignment="right"===t.title.alignment.toLowerCase()?"left":"left"===t.title.alignment.toLowerCase()?"right":"center"}function a(e,t){t.hover=t.hover||{},t.hover.background_color=e.getAttribute("data-hover-color")||t.hover.background_color,t.hover.opacity=e.getAttribute("data-hover-opacity")||t.hover.opacity,t.hover.show_icon=e.getAttribute("data-hover-icon")?"true"===e.getAttribute("data-hover-icon"):t.hover.show_icon}function l(e,t){t.cta=e.getAttribute("data-cta")||t.cta||"1",t.cta_text=e.getAttribute("data-cta-text")||t.cta_text,t.cta_color=e.getAttribute("data-cta-color")||t.cta_color}function c(e,t){t.use_full_width=e.getAttribute("data-full-width")?"1"===e.getAttribute("data-full-width"):t.use_full_width,t.auto_play=e.getAttribute("data-auto-slide")?"1"===e.getAttribute("data-auto-slide"):t.auto_play,t.per_page=e.getAttribute("data-number-of-images")||t.per_page,t.spacing=e.getAttribute("data-spacing")||t.spacing,t.rounded_corners="1"===String(t.spacing)?"3px":"0",t.layout_settings=t.layout_settings||{},t.layout_settings.mode=e.getAttribute("data-layout")||t.layout_settings.mode,e.getAttribute("data-layout-rows")&&(t.layout_settings.rows=e.getAttribute("data-layout-rows"),t.layout_settings.mode="num_of_rows"),e.getAttribute("data-layout-scroll")&&(t.layout_settings.load_more_button="1"===e.getAttribute("data-layout-scroll")?0:1)}function d(e,t){t.load_lightbox_sync=e.getAttribute("data-preview")?"true"===e.getAttribute("data-preview"):!1}return t.prototype.overrideSettingsFromDiv=function(e,t){o(e,t),n(e,t),r(e,t),a(e,t),l(e,t),c(e,t),d(e,t),i(e,t),s(e,t)},t.prototype.getWidgetClass=function(e){var t=["yotpo-pictures-widget","yotpo-pictures-gallery","yotpo-slider","yotpo-visual-carousel"],o=null;return t.forEach(function(t){e.classList.contains(t)&&(o=t)}),o},t.prototype.getGallerySettings=function(t){var o=t.querySelector("#generic_gallery_settings");if(!o)return null;try{return JSON.parse(o.innerHTML)}catch(i){return e.safeConsole("Failed to parse gallery settings: "+i,"error"),null}},t}(Yotpo),Yotpo.Modules=Yotpo.Modules||{},Yotpo.Modules.Handle=function(e){var t={};return t.write=function(t){function o(t,o,i,n,r,s,a,l,c){t.push({type:i,initiators:t[0].affected.querySelectorAll(o),action:function(){if(("function"!=typeof l||l())&&(e.currentAnalytics.trackEvent(n,r,s,c),1==a))for(var t,o=0;t=this.initiators[o];++o)e.removeEventListener(t,this.type,this.handler)}})}function i(e){for(var t=0;t<r.length;t++)if(r[t].name==e)return r[t]}var n=this,r=[],s=n.element.getElementsByClassName("write-"+t+"-wrapper")[0];if(s){var a=t+"s";"reviews"==a&&(a=n.analyticsCategory);var l=n._controller.getUserSetting("vendor_review_creation")?n._controller.getUserSetting("vendor_review_creation").settings:null,c=!1;if(l&&(c=function(){return 0!=Object.keys(n._controller.getTrustedVendorsData()).length}),n.forms=n.forms||{},n.forms[t+"s"]=new e.Form(n,s),r.push({name:"show_resource_content_field",type:"click",initiators:n.element.getElementsByClassName("write-"+t+"-button"),affected:s,validate:null!=l,skipAnimation:function(){return l&&"1"==l.require_external_sign_in&&"review"==t&&0==Object.keys(n._controller.getTrustedVendorsData()).length},effect:"slideDown",action:function(){n.get("messages").hideAll();var o=n.get("tabs").getTab(t+"s");o&&e.simulateClickEvent(o);var i=n.forms[t+"s"];if(!i.visible()){i.trigger("opened"),e.currentAnalytics.trackEvent(a,"clicked_on","write");var r=this.affected.querySelector(".form-group").getAttribute("data-custom-form-id");r&&e.currentAnalytics.trackEvent(a,"shown","custom_form",r)}}}),r[0].affected){r.push({name:"show_name_input_field",type:["keyup","paste"],initiators:r[0].affected.querySelectorAll(".write-"+t+"-content .form-element .y-input"),affected:r[0].affected.getElementsByClassName("yotpo-footer")[0],skipAnimation:function(){return l&&!("1"==l.show_name_field)},effect:"fadeIn",action:function(){if(l){var e=n._controller.getTrustedVendorsData(),o=n.forms[t+"s"],r=o.getInputField("display_name");if(e.display_name&&""==r.value&&o.setInputField("display_name",e.display_name),Object.keys(e).length>0||"function"==typeof o.writeContentCallback){var s=i("enable_form_submit");s&&s.handler()}}}}),r.push({name:"show_social_sign_in",type:["keyup","paste"],initiators:r[1].initiators,affected:r[1].affected.getElementsByClassName("socialize-wrapper")[0],skipAnimation:c,effect:"fadeIn"}),r.push({name:"show_email_input_field",type:["keyup","paste"],initiators:r[1].affected?r[1].affected.getElementsByClassName("name-input"):[],affected:r[1].affected?r[1].affected.getElementsByClassName("email-input")[0]:[],effect:"fadeIn",skipAnimation:c,action:function(){n.forms[t+"s"].submitButton.style.marginTop="15px"}});var d=r.length-1;r.push({name:"enable_form_submit",type:["keyup","paste"],initiators:[r[d].affected],affected:null,action:function(){n.forms[t+"s"].activate()}}),o(r,".write-review .y-input[name=review_title]","click",a,"clicked_on","title_field",!1),o(r,".write-review .y-input[name=review_title]","keydown",a,"typed","title_field",!0),o(r,".write-review .y-input[name=review_content]","click",a,"clicked_on","body_field",!1),o(r,".write-review .y-input[name=review_content]","keydown",a,"typed","body_field",!0),o(r,".write-review .y-input[name=display_name]","click",a,"clicked_on","name_field",!1),o(r,".write-review .y-input[name=display_name]","keydown",a,"typed","name_field",!0),o(r,".write-review .y-input[name=email]","click",a,"clicked_on","email_field",!1),o(r,".write-review .y-input[name=email]","keydown",a,"typed","email_field",!0),o(r,".yotpo-submit","click",a,"clicked_on","post_button",!0),o(r,".write-review .y-input[name=content]","click",a,"clicked_on","name_field",!1);var u=function(){return l&&Object.keys(n._controller.getTrustedVendorsData()).length>0};o(r,".yotpo-submit","click",a,"clicked_on","post_button",!0,u,"verified")}e.forEach(r,function(t){for(var o=0;o<t.initiators.length;++o)t.handler=function(o){return function(){if(t.validate&&"function"==typeof n.writeContentCallback&&0===Object.keys(n._controller.getTrustedVendorsData()).length)return void n.writeContentCallback(this);"function"==typeof t.action&&t.action.call(t,this);var i=t.skipAnimation?t.skipAnimation():!1;i||!o||e.hasClass(o,"visible")&&"toggleSlide"!=t.effect||(e.toggleClass(o,"visible"),t.effect&&(e.Animations[t.effect](o),e.hasClass(n.getElement(),"testimonials")&&e.scrollTo(n.getElement().querySelectorAll(".yotpo-modal-body")[0],0,1300)))}}(t.affected),t.type instanceof Array||(t.type=[t.type]),e.forEach(t.type,function(i){e.addEventListener(t.initiators[o],i,t.handler)})})}},t.action=function(){for(var t=this.querySelectorAll(".yotpo-action[data-type]"),o=0;o<t.length;++o)t[o].onclick=function(){e.bindAnimation(this)}},t.tooltip=function(){for(var t=this.querySelectorAll(".yotpo-action-hover[data-type]"),o=0;o<t.length;++o)t[o].onmouseover=function(){e.bindAnimation(this,"fadeIn")},t[o].onmouseout=function(){e.bindAnimation(this,"fadeOut")}},t.sources=function(){var t=this,o=t.get("sources");for(var i in o)o.hasOwnProperty(i)&&"function"==typeof o[i].getType&&o[i].on("updated",function(o){return function(){var i=o.getType(),n=t.get("messages");if(o.getTemplate()){t.get("forms")[i].clean(),n.show("share");var r=i.substring(0,i.length-1),s=t.getElement().querySelector(".write-"+r+"-button"),a=t.getElement().querySelector(".yotpo-first-"+r);a&&(e.removeClass(s,"yotpo-hidden"),e.addClass(a,"yotpo-hidden"))}e.Modules.Handle.popup.call(o)}}(o[i]));for(var n,r=t.element.querySelectorAll(".yotpo-icon-yotpo-logo"),s=0;n=r[s];s++)e.addEventListener(n,"click",function(){e.currentAnalytics.trackEvent(t.analyticsCategory,"clicked_on","widget_branding_link")})},t.desktopDropDown=function(t,o){for(var i=this,n=i.getElement().getElementsByClassName(o),r=0;r<n.length;++r){var s=new e.Select(n[r]);s.on("change",function(e){this.previousSelectedItem=this.currentSelectedItem,this.previousSelectedItem||(this.previousSelectedItem=this.getElement().querySelector(".selected-item").parentElement),this.currentSelectedItem=e.element,t.call(i,this.element,this.currentSelectedItem,this.previousSelectedItem)})}},t.select=function(){for(var t=this,o=t.getElement().getElementsByClassName("yotpo-nav-dropdown"),i=0;i<o.length;++i){var n=new e.Select(o[i]);n.on("change",function(o){return function(){for(var i=t.getActiveSource(),n=o.getType().split(" "),r=o.getValue().split(" "),s=0;s<n.length;++s)i.settings[n[s]]=r[s];i.settings[o.getType()]=o.getValue().split(","),i.settings.page=1,i.refresh(),e.togglePreLoader(i.getElement())}}(n))}},t.mobileMenu=function(){var t=this.getElement().getElementsByClassName("yotpo-visible-mobile")[0];if(t){var o=t.parentNode.getElementsByClassName("yotpo-menu-mobile-collapse");e.addEventListener(t,"click",function(){for(var t=0;t<o.length;++t)e.Animations.toggleSlide(o[t])})}},t.popup=function(){for(var t=this,o="function"==typeof t.getElement?t.getElement():t,i=o.getElementsByClassName("popup-link"),n=0;n<i.length;++n){var r=void 0!=window.screenLeft?window.screenLeft:screen.left,s=void 0!=window.screenTop?window.screenTop:screen.top,a={height:parseInt(i[n].getAttribute("data_height")||400),width:parseInt(i[n].getAttribute("data_width")||580),top:parseInt(i[n].getAttribute("data_top")||200),left:parseInt(i[n].getAttribute("data_left")||400)},l=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,c=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;a.left=l/2-a.width/2+r,a.top=c/2-a.height/2+s,i[n].onclick=function(t){return function(){for(var o="",i=this.className.split(" "),n=0;n<i.length;n++)("yotpo-custom-badge-link"===i[n]||"yotpo-toa-link"===i[n])&&(o+=i[n]);if(o){var r=e.globals[o];(!r||r.closed)&&(r=e.globals[o]=window.open(this.href,"","status=no,toolbar=no,location=no,menubar=no,directories=no,scrollbars=yes,resizeable=yes,height="+t.height+",width="+t.width+",top="+t.top+",left="+t.left)),window.focus&&r.focus()}else window.open(this.href,"","status=no,toolbar=no,location=no,menubar=no,directories=no,scrollbars=yes,resizeable=yes,height="+t.height+",width="+t.width+",top="+t.top+",left="+t.left);return!1}}(a)}},t.semiWhiteLabel=function(){var e=this.getElement().querySelector(".yotpo-semi-label");e&&t.tooltip.call(e)},t}(Yotpo),Yotpo.Modules=Yotpo.Modules||{},Yotpo.Modules.Helper=function(e){var t={},o={initialized:function(){return this.getElement().getElementsByClassName("yotpo-display-wrapper").length>0}};return t.state=function(e){return"undefined"!=typeof e&&(this._state=e),this._state},t.is=function(e){return o[e]?o[e].call(this):this.state()==e},t.findAncestorByClass=function(t,o){do if(t=t.parentElement,!t)break;while(!e.hasClass(t,o));return t},t}(Yotpo),Yotpo.Modules=Yotpo.Modules||{},Yotpo.Modules.MobileSlide=function(e){function t(e,t){this.touchStartX=void 0,this.touchMoveX=void 0,this.moveX=0,this.eventListeneres=[],this.element=e,this.slider=this.element.querySelector(t.sliderSelector||w),this.slidesContainer=this.element.querySelector(t.slidesContainerSelector||b),this.slides=this.element.querySelectorAll(t.slidesSelector||_),this.settings=o(t),i.call(this),this.slides.length>this.settings.visibleSlidesCount&&a.call(this)}function o(e){return{debug:e.debug||!1,slideMargin:e.slideMargin||f,visibleSlidesCount:e.visibleSlidesCount||y,animateClass:e.animateClass||v,separatorSize:e.separatorSize||0,separatorClass:e.separatorClass,fixedSlideWidth:e.fixedSlideWidth}}function i(){this.slidesContainer.style.margin=0,this.slider.style.margin=0,n.call(this)}function n(){r.call(this),s.call(this)}function r(){var e=this.slider.offsetWidth,t=this.slides.length,o=this.settings.fixedSlideWidth||Math.min(parseInt(e/(this.settings.visibleSlidesCount+.4)),S),i=(t+1)*this.settings.slideMargin,n=t*o+i,r=n-e;this.slideWidth=o,this.sliderWidth=e,this.slidesContainerWidth=n+this.settings.separatorSize,this.slidesContainerOffset=r+this.settings.separatorSize}function s(){for(var t=0;t<this.slides.length;t++){var o=this.slides[t];o.style.width=this.slideWidth+"px",o.style.marginRight=this.settings.slideMargin+"px",this.settings.separatorClass&&!e.hasClass(o,this.settings.separatorClass)&&(o.style.marginLeft=0)}this.slides[0].style.marginLeft=this.settings.slideMargin+"px",this.slidesContainer.style.width=this.slidesContainerWidth+"px"}function a(){var e=this;l.call(this,this.slidesContainer,"touchstart",function(t){d.call(e,t)}),l.call(this,this.slidesContainer,"touchmove",function(t){g.call(e,t)}),l.call(this,this.slidesContainer,"touchend",function(t){p.call(e,t)}),l.call(this,this.slidesContainer,"mousedown",function(t){c.call(e,t)}),l.call(this,this.slidesContainer,"mousemove",function(t){g.call(e,t)}),l.call(this,this.slidesContainer,"mouseup",function(t){u.call(e,t)})}function l(t,o,i){e.addEventListener(t,o,i),this.eventListeneres.push({element:t,type:o,func:i})}function c(e){this.mousedown=!0,d.call(this,e)}function d(t){this.touchStartX=t.touches?t.touches[0].pageX:t.pageX,this.touchMoveX=void 0,e.removeClass(this.slidesContainer,this.settings.animateClass)}function u(e){p.call(this,e),this.mousedown=!1}function p(t){var o=this.moveX/this.slideWidth,i=this.slidesContainerWidth-this.moveX-this.settings.slideMargin<=this.sliderWidth,n=o%1;if(0!=n){var r=o*this.settings.slideMargin,s=this.moveX;if(!i&&.4>n){var a=Math.round(this.slideWidth*n-r);this.moveX=h.call(this,this.moveX-a)}else{var a=Math.round(this.slideWidth*(1-n)+r);this.moveX=h.call(this,this.moveX+a)}e.addClass(this.slidesContainer,this.settings.animateClass),m.call(this),Math.abs(s-this.moveX)>1&&t.preventDefault()}}function g(e){if(!(e instanceof MouseEvent)||this.mousedown){var t=this.touchMoveX||this.touchStartX;this.touchMoveX=e.touches?e.touches[0].pageX:e.pageX;var o=this.moveX+t-this.touchMoveX;this.moveX=h.call(this,o),m.call(this),e.preventDefault()}}function h(e){return 0>e?0:e>=this.slidesContainerOffset?this.slidesContainerOffset:e}function m(){this.slidesContainer.style.transform="translate3d(-"+this.moveX+"px,0,0)"}var f=5,y=2,v="yotpo-mobile-slide-animation",w=".yotpo-mobile-slider",b=".yotpo-mobile-slides-container",_=".yotpo-mobile-slide",S=150;return t.prototype.adjustSize=function(){n.call(this),this.moveX>this.slidesContainerOffset&&(this.moveX=this.slidesContainerOffset,m.call(this))},t.prototype.destroy=function(){for(var t=0;t<this.eventListeneres.length;t++){var o=this.eventListeneres[t];e.removeEventListener(o.element,o.type,o.func)}},t}(Yotpo),Yotpo.Modules=Yotpo.Modules||{},Yotpo.Modules.Pagination=function(e){var t={};return t.init=function(){for(var o=this,i=function(e){for(var o in t.actions)if(e.classList.contains(o))return o;return null},n=function(e,t){var o="prev"==e?"yoReviewsPrev":"yoReviewsNext",i=document.getElementById(o);if(i)i.href=t;else{var n=document.getElementsByTagName("head")[0];i=document.createElement("link"),i.rel=e,i.href=t,i.id=o,n.appendChild(i)}},r=function(e){var t="prev"==e?"yoReviewsPrev":"yoReviewsNext",o=document.getElementById(t);if(o){var i=document.getElementsByTagName("head")[0];i.removeChild(o)}},s=function(t,o,i){if(!e.hasClass(t,"yotpo-disabled")&&i){if("prev"==o&&1==i)return;var s="next"==o?i+1:i-1,a=e.updateQueryStringParameter(window.location.href,"yoReviewsPage",s);t.href=a,n(o,a)}else t.removeAttribute("href"),r(o)},a=o.element.getElementsByClassName("yotpo-pager"),l=0;l<a.length;++l)for(var c=a[l].children,d=0;d<c.length;++d){var u=c[d],p=i(u),g=null;"goTo"==p?g=+u.getAttribute("data-page"):"yotpo_next"==p?this instanceof e.Widgets.Basic&&this.supportsPagination()&&s(u,"next",this.settings.page):"yotpo_previous"==p&&this instanceof e.Widgets.Basic&&this.supportsPagination()&&s(u,"prev",this.settings.page),u.onclick=function(i,n,r){return function(){if(!e.hasClass(this,"yotpo-disabled")){e.togglePreLoader(o.getElement());var s=t.actions[n].call(i,r);return s&&"function"==typeof i.trigger&&i.trigger("pageChanged",n),e.currentAnalytics.trackEvent("reviews","clicked_on","widget_next_page"),!1}}}(o,p,g)}},t.actions={yotpo_next:function(){return++this.settings.page,!0},yotpo_previous:function(){return 1==this.settings.page?!1:(--this.settings.page,!0)},goTo:function(e){return e=+e,1>e?!1:(this.settings.page=e,!0)}},t}(Yotpo),Yotpo.Modules=Yotpo.Modules||{},Yotpo.Modules.PopupWindow=function(e){function t(e,t){o.call(this,e),i.call(this,t)}function o(e){this.element=e,this.modal=this.element.getElementsByClassName("yotpo-modal-base")[0]}function i(e){if(e.closeWhenPressedOutside){var t=this.element.getElementsByClassName("yotpo-modal-mask")[0];if(t){var o=this;t.onclick=function(){o.close()}}}}return t.prototype.open=function(){e.addClass(this.modal,"yotpo-modal-active"),document.body.appendChild(this.element),this.trigger("open")},t.prototype.close=function(t){e.removeClass(this.modal,"yotpo-modal-active");var o=document.body.getElementsByClassName("yotpo-image-upload-container")[0];o&&o.appendChild(this.element),this.trigger("close",t)},t.prototype.on=function(t,o){e.Modules.Event.on.call(this,t,o)},t.prototype.trigger=function(t,o){e.Modules.Event.trigger.call(this,t,o)
},t}(Yotpo),Yotpo.Modules=Yotpo.Modules||{},Yotpo.Modules.Refresh=function(e){var t={};return t.perform=function(){var t=this;t._controller.getBatch(function(o){var i=[];try{i=JSON.parse(o),i=i.shift().result,"undefined"!=typeof t.getElement()&&(t.getElement().innerHTML=i),"function"==typeof t.trigger&&(t.trigger("refreshed"),t.trigger("ready"))}catch(n){e.safeConsole(n.message)}},[{method:t.getMethod(),params:t.getSettings()}])},t}(Yotpo),Yotpo.Modules=Yotpo.Modules||{},Yotpo.Modules.Slide=function(e){function t(e,t){this.element=e,this.imageCount=t.imageCount,this.displayWindowCount=t.displayWindowCount,this.position=t.initialPosition||r(t.imageCount,t.displayWindowCount),this.offset=t.useOffset?n(this.displayWindowCount):u,this.autoSlide=!!t.autoSlide&&t.imageCount>t.displayWindowCount,this.interval=t.delayInterval||a,this.direction=t.slideDirection||l,this.percentage=100/parseFloat(this.displayWindowCount),this.isSliding=!1,this.animationDuration=t.animationDuration||d,this.displayDirection=t.rtl?"right":"left",this.directionVector=this.displayDirection==l?-1:1,this.onSlideCallbacks=[]}function o(t){var o=this,n=0;this.isSliding||(this.isSliding=!0,this.position+=t,s.call(this),0===this.position?n=this.imageCount:this.position===this.imageCount+1&&(n=-this.imageCount),setTimeout(function(){0!==n&&(e.removeClass(o.element,c),o.position+=n,s.call(o)),setTimeout(function(){e.addClass(o.element,c),o.isSliding=!1,i.call(o)},50)},this.animationDuration))}function i(){for(var e=0;e<this.onSlideCallbacks.length;e++)this.onSlideCallbacks[e].call(this.position)}function n(e){return 100/e/2}function r(e,t){return t>=e?0:t}function s(){this.element.style[this.displayDirection]=-(this.position*this.percentage+this.offset)+"%"}var a=3e3,l="left",c="y-slide-left-animations",d=450,u=0;return t.prototype.left=function(){o.call(this,this.directionVector)},t.prototype.right=function(){o.call(this,-this.directionVector)},t.prototype.setCurrentPosition=function(e){this.position=e,s.call(this)},t.prototype.start=function(){s.call(this),this.autoSlide&&this.play()},t.prototype.play=function(){var e=this;!this.timerID&&this.autoSlide&&(this.timerID=setInterval(function(){e[e.direction]()},this.interval))},t.prototype.pause=function(){this.timerID&&this.autoSlide&&(clearInterval(this.timerID),delete this.timerID)},t.prototype.onSlide=function(e){this.onSlideCallbacks.push(e)},t}(Yotpo),Yotpo.Modules=Yotpo.Modules||{},Yotpo.Modules.UserAllocation=function(e){var t=parseInt("FFFFFFFFFFFFFFFF",16),o={};return o.getUserAllocation=function(){var o=e.currentAnalytics.getDomainUserId();return parseInt(o,16)/t*99+1},o}(Yotpo),Yotpo.Modules=Yotpo.Modules||{},Yotpo.Modules.Vote=function(e){function t(t){for(var o=0;o<t.length;o++)e.removeClass(t[o],"yotpo-disabled")}function o(t){for(var o=0;o<t.length;o++)e.addClass(t[o],"yotpo-disabled")}var i={};return i.perform=function(o,i){var n=this,r=n.params.id,s=n.getType(),a=e.getApiHost()+"/"+s+"s/"+r+"/vote/"+o;i=i||!1,i&&(a+="/true"),function(o){e.ajax(a,function(e){var i,r;n.data=JSON.parse(e),n.trigger("vote"),r=document.querySelectorAll("[data-"+o+'-id="'+n.params.id+'"]');for(var s=0;s<r.length;s++)i=r[s].getElementsByClassName("vote-btn"),t(i)})}(s)},i.bind=function(t){for(var i=e.localStorage.getItem(t.getType()+"-"+t.get("id")),n=this.getElementsByClassName("yotpo-footer")[0],r=n.getElementsByClassName("vote-btn"),s=0;s<r.length;++s)r[s].getAttribute("data-type")==i&&e.addClass(r[s],"voted"),r[s].onclick=function(){function i(){var o=this.getAttribute("data-type"),i=e.hasClass(this,"voted"),n=this.parentNode.querySelector(".vote-sum[data-type="+o+"]");return i?(n.innerHTML=+n.innerHTML-1,e.localStorage.removeItem(t.getType()+"-"+t.get("id"))):(n.innerHTML=+n.innerHTML+1,e.localStorage.setItem(t.getType()+"-"+t.get("id"),o)),t.updateOriginalVote&&t.updateOriginalVote(o,i?-1:1),e.toggleClass(this,"voted"),t.vote(o,i),!0}if(e.hasClass(this,"yotpo-disabled"))return!1;var n=this.parentNode.getElementsByClassName("vote-btn");o(n);var r=this.parentNode.getElementsByClassName("voted")[0],s=!0;r&&r!=this&&(s=i.call(r)),s&&i.call(this)}},i}(Yotpo),Yotpo.Helpers=Yotpo.Helpers||{},Yotpo.Helpers.FileValidator=function(e){function t(e,t){this.file=e,this.validations=t,this.validated=!1,this.errors=[]}function o(e){for(var t=!1,o=this.file.type,i=0;i<e.length;i++)if(e[i]===o){t=!0;break}return t}function i(e,o){var i=new FileReader,r=new Image,s=this;i.onload=function(i){var a;a=i.target.result,r.src=a,r.onload=function(){(e&&this.width<e||o&&this.height<o)&&s.errors.push(t.ERROR_TYPES.INVALID_IMAGE_DIMENSIONS),n.call(s)},r.onerror=function(){s.errors.push(t.ERROR_TYPES.INVALID_IMAGE_FILE),n.call(s)}},i.readAsDataURL(this.file)}function n(){this.validated=!0,this.trigger("validated",this.errors)}return t.ERROR_TYPES={INVALID_TYPE:1,INVALID_SIZE:2,INVALID_IMAGE_DIMENSIONS:3,INVALID_IMAGE_FILE:4},t.prototype.on=function(t,o){e.Modules.Event.on.call(this,t,o)},t.prototype.trigger=function(t,o){e.Modules.Event.trigger.call(this,t,o)},t.prototype.validate=function(){if(this.validated)return void this.trigger("validated",this.errors);var e,r;for(var s in this.validations)switch(s){case"maxFileSize":var a=this.validations[s];this.file.size>a&&this.errors.push(t.ERROR_TYPES.INVALID_SIZE);break;case"fileTypes":o.call(this,this.validations[s])||this.errors.push(t.ERROR_TYPES.INVALID_TYPE);break;case"minImageWidth":e=this.validations[s];break;case"minImageHeight":r=this.validations[s]}e||r?i.call(this,e,r):n.call(this)},t}(Yotpo),Yotpo.Helpers=Yotpo.Helpers||{},Yotpo.Helpers.ImageUtils=function(){var e=Object.create(null);return e.ROTATION_TYPES={1:"rotate(0deg)",3:"rotate(180deg)",6:"rotate(90deg)",8:"rotate(270deg)"},e.getImageOrientation=function(t,o){new FileReader,EXIF.getData(t,function(){var i=t.exifdata||{},n=i.Orientation||1;o(e.ROTATION_TYPES[n])})},e}(Yotpo),function(){function e(e){return!!e.exifdata}function t(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var o=atob(e),i=o.length,n=new ArrayBuffer(i),r=new Uint8Array(n),s=0;i>s;s++)r[s]=o.charCodeAt(s);return n}function o(e,t){var o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="blob",o.onload=function(){(200==this.status||0===this.status)&&t(this.response)},o.send()}function i(e,i){function r(t){var o=n(t);e.exifdata=o||{},i&&i.call(e)}if(e.src)if(/^data\:/i.test(e.src)){var s=t(e.src);r(s)}else if(/^blob\:/i.test(e.src)){var a=new FileReader;a.onload=function(e){r(e.target.result)},o(e.src,function(e){a.readAsArrayBuffer(e)})}else{var l=new XMLHttpRequest;l.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";r(l.response),l=null},l.open("GET",e.src,!0),l.responseType="arraybuffer",l.send(null)}else if(self.FileReader&&(e instanceof self.Blob||e instanceof self.File)){var a=new FileReader;a.onload=function(e){c&&console.log("Got file of length "+e.target.result.byteLength),r(e.target.result)},a.readAsArrayBuffer(e)}}function n(e){var t=new DataView(e);if(c&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return c&&console.log("Not a valid JPEG"),!1;for(var o,i=2,n=e.byteLength;n>i;){if(255!=t.getUint8(i))return c&&console.log("Not a valid marker at offset "+i+", found: "+t.getUint8(i)),!1;if(o=t.getUint8(i+1),c&&console.log(o),225==o)return c&&console.log("Found 0xFFE1 marker"),l(t,i+4,t.getUint16(i+2)-2);i+=2+t.getUint16(i+2)}}function r(e,t,o,i,n){var r,a,l,d=e.getUint16(o,!n),u={};for(l=0;d>l;l++)r=o+12*l+2,a=i[e.getUint16(r,!n)],!a&&c&&console.log("Unknown tag: "+e.getUint16(r,!n)),u[a]=s(e,r,t,o,n);return u}function s(e,t,o,i,n){var r,s,l,c,d,u,p=e.getUint16(t+2,!n),g=e.getUint32(t+4,!n),h=e.getUint32(t+8,!n)+o;switch(p){case 1:case 7:if(1==g)return e.getUint8(t+8,!n);for(r=g>4?h:t+8,s=[],c=0;g>c;c++)s[c]=e.getUint8(r+c);return s;case 2:return r=g>4?h:t+8,a(e,r,g-1);case 3:if(1==g)return e.getUint16(t+8,!n);for(r=g>2?h:t+8,s=[],c=0;g>c;c++)s[c]=e.getUint16(r+2*c,!n);return s;case 4:if(1==g)return e.getUint32(t+8,!n);for(s=[],c=0;g>c;c++)s[c]=e.getUint32(h+4*c,!n);return s;case 5:if(1==g)return d=e.getUint32(h,!n),u=e.getUint32(h+4,!n),l=new Number(d/u),l.numerator=d,l.denominator=u,l;for(s=[],c=0;g>c;c++)d=e.getUint32(h+8*c,!n),u=e.getUint32(h+4+8*c,!n),s[c]=new Number(d/u),s[c].numerator=d,s[c].denominator=u;return s;case 9:if(1==g)return e.getInt32(t+8,!n);for(s=[],c=0;g>c;c++)s[c]=e.getInt32(h+4*c,!n);return s;case 10:if(1==g)return e.getInt32(h,!n)/e.getInt32(h+4,!n);for(s=[],c=0;g>c;c++)s[c]=e.getInt32(h+8*c,!n)/e.getInt32(h+4+8*c,!n);return s}}function a(e,t,o){for(var i="",n=t;t+o>n;n++)i+=String.fromCharCode(e.getUint8(n));return i}function l(e,t){if("Exif"!=a(e,t,4))return c&&console.log("Not valid EXIF data! "+a(e,t,4)),!1;var o,i,n,s,l,d=t+6;if(18761==e.getUint16(d))o=!1;else{if(19789!=e.getUint16(d))return c&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;o=!0}if(42!=e.getUint16(d+2,!o))return c&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var u=e.getUint32(d+4,!o);if(8>u)return c&&console.log("Not valid TIFF data! (First offset less than 8)",e.getUint32(d+4,!o)),!1;if(i=r(e,d,d+u,g,o),i.ExifIFDPointer){s=r(e,d,d+i.ExifIFDPointer,p,o);for(n in s){switch(n){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":s[n]=m[n][s[n]];break;case"ExifVersion":case"FlashpixVersion":s[n]=String.fromCharCode(s[n][0],s[n][1],s[n][2],s[n][3]);break;case"ComponentsConfiguration":s[n]=m.Components[s[n][0]]+m.Components[s[n][1]]+m.Components[s[n][2]]+m.Components[s[n][3]]}i[n]=s[n]}}if(i.GPSInfoIFDPointer){l=r(e,d,d+i.GPSInfoIFDPointer,h,o);for(n in l){switch(n){case"GPSVersionID":l[n]=l[n][0]+"."+l[n][1]+"."+l[n][2]+"."+l[n][3]}i[n]=l[n]}}return i}var c=!1,d=this,u=function(e){return e instanceof u?e:this instanceof u?void(this.EXIFwrapped=e):new u(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=u),exports.EXIF=u):d.EXIF=u;var p=u.Tags={36864:"ExifVersion"},g=u.TiffTags={274:"Orientation"},h=u.GPSTags={},m=(u.IFD1Tags={},u.StringValues={ExposureProgram:{},MeteringMode:{},LightSource:{},Flash:{},SensingMethod:{},SceneCaptureType:{},SceneType:{},CustomRendered:{},WhiteBalance:{},GainControl:{},Contrast:{},Saturation:{},Sharpness:{},SubjectDistanceRange:{},FileSource:{},Components:{}});u.getData=function(t,o){return(self.Image&&t instanceof self.Image||self.HTMLImageElement&&t instanceof self.HTMLImageElement)&&!t.complete?!1:(e(t)?o&&o.call(t):i(t,o),!0)},u.readFromBinaryFile=function(e){return n(e)},"function"==typeof define&&define.amd&&define("exif-js",[],function(){return u})}.call(this),Yotpo.Helpers=Yotpo.Helpers||{},Yotpo.Helpers.WidthClass=function(){var e,t={},o=[];e=[{name:"yotpo-size-7",fit:function(e){return e>=1280}},{name:"yotpo-size-6",fit:function(e){return 1280>e&&e>=960}},{name:"yotpo-size-5",fit:function(e){return 960>e&&e>=768}},{name:"yotpo-size-4",fit:function(e){return 768>e&&e>=600}},{name:"yotpo-size-3",fit:function(e){return 600>e&&e>=480}},{name:"yotpo-size-2",fit:function(e){return 480>e&&e>=320}},{name:"yotpo-size-1",fit:function(e){return 320>e}}];for(var i=0;i<e.length;i++)o.push(e[i].name);return t.getWidgetWidthClass=function(t){for(var o,i,n=0;n<e.length;n++)if(i=e[n],i.fit(t)){o=i.name;break}return o},t.getWidgetWidthClasses=function(){return o},t}(Yotpo),Yotpo.Flows=Yotpo.Flows||{},Yotpo.Flows.ImageUpload=function(e){function t(e,t,i,n,r,s,a){this.flowSteps={},this.source_widget=n,this.product_id=r,this.trustedVendorsData=s,this.appKey=i,this.analyticsCategory=a,o.call(this,e,t,i)}function o(t,o,a){function l(e){e&&n.call(d)}var d=this,u={};e.forEach(c,function(e){u[e]=t.getElementsByClassName(e)[0]}),this.flowSteps.thankYou=new e.Flows.ImageUpload.ThankYou(u.thank_you),this.flowSteps.uploadError=new e.Flows.ImageUpload.UploadError(u.upload_error),this.flowSteps.uploadImages=new e.Flows.ImageUpload.UploadImages(u.upload_images,o,a,r.bind(this),this.trustedVendorsData),this.flowSteps.userDetails=new e.Flows.ImageUpload.UserDetails(u.user_details,s.bind(this),i.bind(this)),this.flowSteps.uploadImages.on("close",l),this.flowSteps.userDetails.on("close",l)}function i(){this.flowSteps.userDetails.close(),this.flowSteps.uploadImages.open()}function n(){this.flowSteps.userDetails.resetModalContent(),this.flowSteps.uploadImages.resetModalContent()}function r(t){this.imagesData=t,null===this.trustedVendorsData?(e.currentAnalytics.trackUniqueEvent(this.analyticsCategory,"clicked on","next"),this.flowSteps.uploadImages.close(),this.flowSteps.userDetails.open()):s.call(this,this.trustedVendorsData.display_name,this.trustedVendorsData.email)}function s(t,o){var i=this.product_id?[this.product_id]:null;e.forEach(this.imagesData,function(e){e.user_name=t,e.user_email=o,i&&(e.tagged_products=i)}),a.call(this)}function a(){var t={images:this.imagesData,source_widget:this.source_widget},o={images_count:t.images.length,is_trusted_vendor:null!==this.trustedVendorsData};e.currentAnalytics.trackUniqueEvent(this.analyticsCategory,"clicked on","submit",o);var i=e.getApiHost()+"/v1/widget/"+this.appKey+"/images/create_batch",n=JSON.stringify(t);e.ajax(i,l.bind(this),"POST",n,void 0,{requestHeaders:{"Content-type":"application/json"}})}function l(e){this.flowSteps.uploadImages.close(),this.flowSteps.userDetails.close(),e.length>0&&200===JSON.parse(e).status.code?(n.call(this),this.flowSteps.thankYou.open()):this.flowSteps.uploadError.open()}var c=["thank_you","upload_error","upload_images","user_details"];return t.prototype.start=function(e){this.flowSteps.uploadImages.upload(e)},t}(Yotpo),Yotpo.Flows=Yotpo.Flows||{},Yotpo.Flows.ImageUpload=Yotpo.Flows.ImageUpload||{},Yotpo.Flows.ImageUpload.ThankYou=function(e){function t(t){this.modalElement=t,e.Modules.PopupWindow.call(this,t,{closeWhenPressedOutside:!1}),o.call(this)}function o(){var e=this,t=this.modalElement.querySelector(".close-button");t.onclick=function(){e.close(!0)}}return t.prototype=Object.create(e.Modules.PopupWindow.prototype),t}(Yotpo),Yotpo.Flows=Yotpo.Flows||{},Yotpo.Flows.UploadButton=function(e){function t(){var e=this.controller.getUserSetting("vendor_review_creation");if(e){var t=this.controller.getTrustedVendorsData();if(Object.keys(t).length>0)return t}return null}function o(t){var o=this;this.uploadPhotosButton.onclick=function(){e.currentAnalytics.trackUniqueEvent(o.analyticsCategory,"clicked on","upload_button",void 0,{is_trusted_vendor:null!==t})}}var i={};return i.initUploadButton=function(i,n,r,s){var a=i.getUserSetting("upload_photos");if(this.uploadPhotosButton=n.querySelector(".yotpo-pictures-gallery-upload-button"),this.controller=i,this.fileInput=n.querySelector(".yotpo-file-image-upload"),this.analyticsCategory=s,a&&this.fileInput&&this.uploadPhotosButton){var l=n.querySelector(".yotpo-image-upload-container"),c=this.controller.getAppKey(),d=t.call(this);o.call(this,d),this.fileInput.onchange=function(){if(this.files.length>0){var t=new e.Flows.ImageUpload(l,a,c,r.widget_name,r.product_id,d,s);t.start(this.files),this.value=""}}}},i}(Yotpo),Yotpo.Flows=Yotpo.Flows||{},Yotpo.Flows.ImageUpload=Yotpo.Flows.ImageUpload||{},Yotpo.Flows.ImageUpload.UploadError=function(e){function t(t){this.modalElement=t,e.Modules.PopupWindow.call(this,t,{closeWhenPressedOutside:!1}),o.call(this)}function o(){var e=this,t=this.modalElement.querySelector(".close-button");t.onclick=function(){e.close(!1)}}return t.prototype=Object.create(e.Modules.PopupWindow.prototype),t}(Yotpo),Yotpo.Flows=Yotpo.Flows||{},Yotpo.Flows.ImageUpload=Yotpo.Flows.ImageUpload||{},Yotpo.Flows.ImageUpload.UploadImages=function(e){function t(t,o,i,n,r){var s=o.settings||{};b=s.max_photos||_,this.modalElement=t,this.successCallback=n,this.trustedVendorsData=r,this.uuid=e.generateUUID(),this.appKey=i,e.Modules.PopupWindow.call(this,t,{closeWhenPressedOutside:!1})}function o(){var t=this,o=this.modalElement.querySelector(".yotpo-icon-cross"),i=t.modalElement.querySelector(".submit-label"),n=t.modalElement.querySelector(".yotpo-submit-loader");this.nextOrSubmitButton=this.modalElement.querySelector(".yotpo-next-button"),this.addMoreInput=this.modalElement.querySelector(".upload-more-photos"),this.addMorePhotos=this.modalElement.querySelector(".yotpo-add-more"),this.nextOrSubmitButton.onclick=function(){null!==t.trustedVendorsData&&(e.addClass(i,"yotpo-hidden"),e.removeClass(n,"yotpo-hidden")),t.successCallback(a.call(t))},o.onclick=function(){t.close(!0)},this.addMoreInput.onchange=function(){u.call(t,this.files)}}function i(){this.itemsArray=[];for(var e=this,t=this.modalElement.querySelectorAll(".yotpo-upload-photos"),o=0;o<t.length;o++){var i=t[o],n=i.querySelector(".yotpo-file-input"),r=i.querySelector(".yotpo-circle");n.setAttribute("index",o.toString()),r.setAttribute("index",o.toString());var s={itemElement:i,crossElement:r,captionElement:i.querySelector(".yotpo-caption-modal-textarea"),uploadLabel:i.querySelector(".uploaded-background-image"),fileInput:n,active:!1};n.onchange=function(){var t=parseInt(this.getAttribute("index"));this.files.length>0&&(p.call(e,this.files[0],e.itemsArray[t]),this.value="")},r.onclick=function(t){var o=parseInt(this.getAttribute("index"));v.call(e,e.itemsArray[o]),t.preventDefault()},this.itemsArray.push(s)}}function n(t){function o(e){E=JSON.parse(e),E.originalPath=E.path,t()}var i=e.getApiHost("dynamic")+"/s3_signature",n=e.convertHashToQueryStringParams({policy_name:"OnsiteUploadedImages",app_key:this.appKey}),r={withCredentials:!1};e.ajax(i,o,"POST",n,null,r)}function r(){var e=E.originalPath;"/"!==e.charAt(e.length-1)&&(e+="/"),e+=this.uuid+"/",E.path=e}function s(){null===this.trustedVendorsData?e.addClass(this.modalElement,"display-next-button"):e.addClass(this.modalElement,"display-submit-button")}function a(){for(var e=[],t=0;b>t;t++)if(this.itemsArray[t].active){var o=this.itemsArray[t].image_url;o.startsWith("http")||(o="https:"+o),e.push({image_url:o,caption:this.itemsArray[t].captionElement.value})}return e}function l(){for(var e=[],t=0;b>t;t++)this.itemsArray[t].active||e.push(this.itemsArray[t]);return e}function c(){for(var t=!1,o=!1,i=0;b>i;i++)this.itemsArray[i].active&&(t=!0),e.hasClass(this.itemsArray[i].itemElement,"image-loader")&&(o=!0);return t&&!o}function d(){0===l.call(this).length?(e.addClass(this.addMorePhotos,"yotpo-add-more-disabled"),this.addMoreInput.disabled=!0):(e.removeClass(this.addMorePhotos,"yotpo-add-more-disabled"),this.addMoreInput.disabled=!1),c.call(this)?(e.removeClass(this.nextOrSubmitButton,"yotpo-next-submit-disabled"),this.nextOrSubmitButton.disabled=!1):(e.addClass(this.nextOrSubmitButton,"yotpo-next-submit-disabled"),this.nextOrSubmitButton.disabled=!0)}function u(e){for(var t=l.call(this),o=Array.prototype.slice.call(e,0,t.length),i=o.length>t.length?t.length:o.length,n=0;i>n;n++)p.call(this,o[n],t[n]);this.value=""}function p(t,o){g.call(this,o);var i=this,n=new e.FileUploader(t,C);n.on("complete",function(n){if(null!==n.url&&0===n.errors.length)o.active=!0,e.Helpers.ImageUtils.getImageOrientation(t,h.bind(i,o,n));else{var r={failure_reason:n.errors,is_trusted_vendor:null!==i.trustedVendorsData};e.currentAnalytics.trackUniqueEvent(i.analyticsCategory,"picture_uploaded","upload_picture_error",void 0,r),f.call(i,o,n.errors,n.file)}});var r="//"+E.bucket+"."+e.awsS3Domain;n.validateAndUpload(r,E,e.FileUploader.TYPE.S3)}function g(t){t.fileInput.disabled=!0,t.captionElement.disabled=!1,this.nextOrSubmitButton.disabled=!0,m(t),e.removeClass(t.itemElement,"image-empty"),e.addClass(t.itemElement,"image-loader"),e.addClass(this.nextOrSubmitButton,"yotpo-next-submit-disabled")}function h(t,o,i){var n=this;w(o.file,function(r){t.image_url=o.url,t.uploadLabel.setAttribute("style","background-image: url("+r+") !important;transform: "+i),e.removeClass(t.itemElement,"image-loader"),e.addClass(t.itemElement,"active-placeholder"),d.call(n)})}function m(t){e.hasClass(t.itemElement,"image-error")&&(e.removeClass(t.itemElement,"image-error"),t.captionElement.value="")}function f(t,o,i){e.removeClass(t.itemElement,"image-loader"),t.active=!1,e.addClass(t.itemElement,"image-error"),e.removeClass(t.itemElement,"active-placeholder");var n=i.name.length>S?"\u2026"+i.name.slice(i.name.length-S,i.name.length):i.name;t.captionElement.disabled=!0,t.captionElement.value=n+"\r\n"+y(o),d.call(this)}function y(t){switch(t[0]){case e.Helpers.FileValidator.ERROR_TYPES.INVALID_TYPE:return e.texts.upload_photos_invalid_type;case e.Helpers.FileValidator.ERROR_TYPES.INVALID_SIZE:return e.texts.upload_photos_invalid_size;case e.Helpers.FileValidator.ERROR_TYPES.INVALID_IMAGE_DIMENSIONS:return e.texts.upload_photos_invalid_image_dimensions;case e.Helpers.FileValidator.ERROR_TYPES.INVALID_IMAGE_FILE:return e.texts.upload_photos_invalid_image_file;default:return e.texts.upload_photos_invalid_image_file}}function v(t){t.active=!1,t.captionElement.disabled=!0,t.fileInput.disabled=!1,t.uploadLabel.setAttribute("style","background-image: none !important"),m(t),e.removeClass(t.itemElement,"active-placeholder"),e.addClass(t.itemElement,"image-empty"),d.call(this)}function w(e,t){var o=new FileReader;o.onload=function(e){t(e.target.result)},o.readAsDataURL(e)}var b,_=3,S=19,C={maxFileSize:15728640,fileTypes:["image/png","image/gif","image/jpg","image/jpeg"],minImageWidth:400,minImageHeight:400},E=null;return t.prototype=Object.create(e.Modules.PopupWindow.prototype),t.prototype.upload=function(e){function t(){r.call(this),this.open(),i.call(this),o.call(this),s.call(this),u.call(this,a)}var a=Array.prototype.slice.call(e,0,b);null===E?n.call(this,t.bind(this)):t.call(this)},t.prototype.resetModalContent=function(){s.call(this);for(var e=0;b>e;e++)v.call(this,this.itemsArray[e]),this.itemsArray[e].captionElement.value=""},t}(Yotpo),Yotpo.Flows=Yotpo.Flows||{},Yotpo.Flows.ImageUpload=Yotpo.Flows.ImageUpload||{},Yotpo.Flows.ImageUpload.UserDetails=function(e){function t(t,i,n){this.modalElement=t,this.successCallback=i,this.backCallback=n,this.validUserName=!1,this.validUserEmail=!1,e.Modules.PopupWindow.call(this,t,{closeWhenPressedOutside:!1}),o.call(this)}function o(){var t=this,o=this.modalElement.querySelector(".yotpo-icon-cross"),s=this.modalElement.querySelector(".user_details_back");this.submitLabel=this.modalElement.querySelector(".yotpo-modal-submit-label"),this.loader=this.modalElement.querySelector(".yotpo-submit-loader"),this.userName=this.modalElement.querySelector("#user-name"),this.userEmail=this.modalElement.querySelector("#user-email"),this.submitButton=this.modalElement.querySelector(".yotpo-modal-submit-button"),this.userName.onblur=n.bind(this),this.userEmail.onblur=r.bind(this),o.onclick=function(){t.close(!0)},s.onclick=this.backCallback,this.userName.onkeyup=function(){t.validUserName=0!==t.userName.value.trim().length,i.call(t),n.call(t)},this.userEmail.onkeyup=function(){t.validUserEmail=0!==t.userEmail.value.trim().length&&e.validateEmail(t.userEmail.value)?!0:!1,i.call(t),r.call(t)},this.submitButton.onclick=function(){e.removeClass(t.loader,"yotpo-hidden"),e.addClass(t.submitLabel,"yotpo-hidden"),t.successCallback(t.userName.value,t.userEmail.value)}}function i(){this.validUserName&&this.validUserEmail?(this.submitButton.disabled=!1,e.removeClass(this.submitButton,"yotpo-next-submit-disabled")):(this.submitButton.disabled=!0,e.addClass(this.submitButton,"yotpo-next-submit-disabled"))}function n(){this.validUserName?e.removeClass(this.userName,"yotpo-input-invalid"):e.addClass(this.userName,"yotpo-input-invalid")}function r(){this.validUserEmail?e.removeClass(this.userEmail,"yotpo-input-invalid"):e.addClass(this.userEmail,"yotpo-input-invalid")}return t.prototype=Object.create(e.Modules.PopupWindow.prototype),t.prototype.resetModalContent=function(){e.addClass(this.loader,"yotpo-hidden"),e.removeClass(this.submitLabel,"yotpo-hidden"),e.removeClass(this.userName,"yotpo-input-invalid"),e.removeClass(this.userEmail,"yotpo-input-invalid"),this.userName.value="",this.userEmail.value="",this.validUserName=!1,this.validEmail=!1,i.call(this)},t}(Yotpo),Yotpo.BaseAggregator=function(){function e(){this.baseObject=null}return e.prototype.addFilter=function(e){this.baseObject=e},e.prototype.removeFilter=function(){this.baseObject=null},e.prototype.deepCopy=function(){return this.baseObject},e.prototype.setFilters=function(e){this.baseObject=e},e.prototype.toJson=function(){return this.baseObject},e}(Yotpo),Yotpo.CrfsAggregator=function(e){function t(){this.crfFilters={}}return t.prototype.addFilter=function(t){var o=new e.CrfFilter(t.id,t.value);this.crfFilters[t.id]=o},t.prototype.removeFilter=function(e){delete this.crfFilters[e.id]},t.prototype.deepCopy=function(){var e={};for(var t in this.crfFilters){var o=this.crfFilters[t].deepCopy();e[t]=o}return e},t.prototype.setFilters=function(e){this.crfFilters=e},t.prototype.toJson=function(){var e=[];for(var t in this.crfFilters){var o=this.crfFilters[t];e.push(o.toJson())}return 0!==e.length?e:null},t}(Yotpo),Yotpo.ScoresAggregator=function(e){function t(){e.BaseAggregator.call(this)}return t.prototype=Object.create(e.BaseAggregator.prototype),t.prototype.toJson=function(){return this.baseObject?[this.baseObject]:null},t}(Yotpo),Yotpo.SortsAggregator=function(e){function t(){this.sortByFilters={}}return t.prototype.addFilter=function(t){var o=new e.SortByFilter(t.value.fieldName,t.value.isAscending);this.sortByFilters[t.id]=o},t.prototype.removeFilter=function(e){delete this.sortByFilters[e.id]},t.prototype.deepCopy=function(){var e={};for(var t in this.sortByFilters){var o=this.sortByFilters[t].deepCopy();e[t]=o}return e},t.prototype.setFilters=function(e){this.sortByFilters=e},t.prototype.toJson=function(){var e=[];for(var t in this.sortByFilters){var o=this.sortByFilters[t];e.push(o.toJson())}return 0!==e.length?e:null},t}(Yotpo),Yotpo.TopicsAggregator=function(e){function t(){e.BaseAggregator.call(this)}return t.prototype=Object.create(e.BaseAggregator.prototype),t.prototype.toJson=function(){return this.baseObject?[this.baseObject]:null},t}(Yotpo),Yotpo.DropDownFilterHandler=function(e){function t(t){e.addClass(t,"non-selected-item"),e.removeClass(t,"selected-item")}function o(t){for(var o=t.querySelectorAll(".yotpo-stars > .rating-star"),i=0;i<o.length;i++)e.addClass(o[i],"non-selected-star"),e.removeClass(o[i],"selected-stars")}function i(e,t){var o={type:l.sorts,is_default_answer:!0,value:{}};return t!==d&&(o.is_default_answer=!1,o.value.id=e.getAttribute("data-sort-name"),o.value.value={fieldName:t,isAscending:"true"===e.getAttribute("data-ascending")}),o}function n(e,t){var o={type:l.crfs,is_default_answer:!0,value:{}};return t!==c&&(o.is_default_answer=!1,o.value.id=parseInt(e.getAttribute("data-question-id")),o.value.value=t),o}function r(e){var t={type:l.images,is_default_answer:!0,value:!1};return e!==c&&(t.is_default_answer=!1,t.value=!0),t}function s(e){var t={type:l.scores,is_default_answer:!0,value:0};return e!==c&&(t.is_default_answer=!1,t.value=parseInt(e)),t}function a(e){var t=e.querySelector(".yotpo-stars");t&&t.remove()}var l,c,d,u,p={};return p.init=function(){l=e.filterAndSearch.filters_state_manager.aggregators_types,c=e.filterAndSearch.filters_drop_down_default_answer,d=e.filterAndSearch.sorts_drop_down_default_answer,u=e.filterAndSearch.images_drop_down_answer},p.parseChosenFilter=function(e,t){var o=t.getAttribute("data-type"),a=t.getAttribute("data-value");switch(o){case l.images:return r(a);case l.scores:return s(a);case l.crfs:return n(e,a);case l.sorts:return i(t,a)}},p.resetAllDropDowns=function(){for(var t=this,o=t.getElement().querySelectorAll(".filters-dropdown, .sort-drop-down"),i=0;i<o.length;i++){var n=o[i],r=n.querySelector("[data-is-default-answer=true]");r&&e.simulateClickEvent(r)}},p.resetDropDownButtonValue=function(t){var o=t.querySelector(".yotpo-dropdown-button"),i=o.querySelector(".selected");e.removeClass(i,"non-default-item-selected"),i.innerText=t.getAttribute("data-default-button-display-value"),a(o)},p.setDropDownButtonStars=function(t,o){var i=t.querySelector(".yotpo-dropdown-button");a(i);var n=o.querySelector(".yotpo-stars"),r=n.cloneNode(!0);e.addClass(r,"selected"),i.appendChild(r)},p.unmarkAnswer=function(e){var i=e.querySelector(".selected-item");i?t(i):o(e)},p.markTextualAnswer=function(t){var o=t.querySelector(".non-selected-item");o&&(e.addClass(o,"selected-item"),e.removeClass(o,"non-selected-item"))},p.markStarsAnswer=function(t){for(var o=t.querySelectorAll(".yotpo-stars > .rating-star"),i=0;i<o.length;i++)e.addClass(o[i],"selected-stars"),e.removeClass(o[i],"non-selected-star")},p}(Yotpo),Yotpo.CrfFilter=function(e){function t(e,t){this.questionId=e,this.value=t}return t.prototype.toJson=function(){return{question_id:this.questionId,answers:[this.value]}},t.prototype.deepCopy=function(){return new e.CrfFilter(this.questionId,this.value)},t}(Yotpo),Yotpo.SortByFilter=function(e){function t(e,t){this.fieldName=e,this.isAscending=t}return t.prototype.toJson=function(){return{sort_by:this.fieldName,ascending:this.isAscending}},t.prototype.deepCopy=function(){return new e.SortByFilter(this.fieldName,this.isAscending)},t}(Yotpo),Yotpo.FiltersState=function(e){function t(){this.aggregatorItems={},i=e.filterAndSearch.filters_state_manager.aggregators_types,o.call(this)}function o(){this.aggregatorItems[i.crfs]={aggregator:new e.CrfsAggregator,requestKey:"crfs",type:i.crfs},this.aggregatorItems[i.scores]={aggregator:new e.ScoresAggregator,requestKey:"scores",type:i.scores},this.aggregatorItems[i.topics]={aggregator:new e.TopicsAggregator,requestKey:"topic_names",type:i.topics},this.aggregatorItems[i.images]={aggregator:new e.BaseAggregator,requestKey:"pictured",type:i.images},this.aggregatorItems[i.sorts]={aggregator:new e.SortsAggregator,requestKey:"sortings",type:i.sorts},this.aggregatorItems[i.free_text_search]={aggregator:new e.BaseAggregator,requestKey:"free_text_search",type:i.free_text_search}}var i;return t.prototype.addFilter=function(e,t){this.aggregatorItems[e].aggregator.addFilter(t)},t.prototype.removeFilter=function(e,t){this.aggregatorItems[e].aggregator.removeFilter(t)},t.prototype.deepCopy=function(){var e={};for(var t in this.aggregatorItems)e[t]=this.aggregatorItems[t].aggregator.deepCopy();return e},t.prototype.setAggregators=function(e){for(var t in e)this.aggregatorItems[t].aggregator.setFilters(e[t])},t.prototype.toJson=function(){var e={};for(var t in this.aggregatorItems){var o=this.aggregatorItems[t],i=o.aggregator.toJson();null!==i&&(e[o.requestKey]=i)}return e},t.prototype.getFilters=function(){var e={};for(var t in this.aggregatorItems){var o=this.aggregatorItems[t],i=o.aggregator.toJson();null!==i&&(e[o.type]=i)}return e},t}(Yotpo),Yotpo.FiltersStateManager=function(e){function t(t,o,i){this.coreContoller=t,this.widget=o,this.widgetSettings={},e.copy(i,this.widgetSettings),this.states={},this.observers=[],s.call(this)}function o(t,o){var i={};i.method="filtered_reviews",i.params={},e.copy(this.widgetSettings,i.params),i.params.page=o||1;var n;return n=t?this.states[a].toJson():this.states[l].toJson(),e.copy(n,i.params),i}function i(t,i){var r=this,s=o.call(this,t,i);this.coreContoller.getBatch(function(o){var i=n(o);r.observers.forEach(function(o){t?e.isMethodExists(o.OnSubmittedFiltersChange)&&o.OnSubmittedFiltersChange(i):e.isMethodExists(o.OnPendingFiltersChange)&&o.OnPendingFiltersChange(i)})},[s])}function n(e){var t=JSON.parse(e);return t.shift().result}function r(e){return e?a:l}function s(){this.states[a]=new e.FiltersState,this.states[l]=new e.FiltersState}var a="submitted",l="pending",c=e.debounce(i,400,!1);return t.prototype.addFilter=function(e,t,o){var i=r(e);this.states[i].addFilter(t,o),c.call(this,e)},t.prototype.removeFilter=function(e,t,o){var i=r(e);this.states[i].removeFilter(t,o),c.call(this,e)},t.prototype.approvePendingFilters=function(){var e=this.states[l].deepCopy();this.states[a].setAggregators(e),c.call(this,!0)},t.prototype.resetAllPendingToSubmitted=function(){var e=this.states[a].deepCopy();this.states[l].setAggregators(e)},t.prototype.resetAllPendingToDefault=function(){this.states[l]=new e.FiltersState},t.prototype.clearAllFilters=function(){s.call(this),c.call(this,!0)},t.prototype.subscribeToFiltersUpdate=function(e){this.observers.push(e)},t.prototype.fetchPage=function(e){c.call(this,!0,e)},t.prototype.getCurrentSubmittedFilters=function(){return this.states[a].getFilters()},t.prototype.getCurrentPendingFilters=function(){return this.states[l].getFilters()},t}(Yotpo),Yotpo.FreeTextSearch=function(e){var t={};
return t.bind=function(t,o,i){var n=this,r=n.getElement().querySelector(".free-text-search-input");if(r){n.freeTextSearchInput=r;var s=n.getElement().querySelector(".clear-text-icon");s&&(n.clearTextSearchInput=s,e.addEventListener(r,"input",function(){this.value?e.show(s):e.hide(s)}),e.addEventListener(s,"click",function(){r.placeholder=t,r.value="",i.call(n),e.hide(this)})),e.addEventListener(r,"focus",function(){this.placeholder=""}),e.addEventListener(r,"blur",function(){""==this.placeholder&&(this.placeholder=t)}),n.previousTextSearched=null,e.addEventListener(r,"keyup",function(e){var t=e.which||e.keyCode;13===t&&o.call(n,r.value)})}},t.clearSearchedText=function(){this.freeTextSearchInput&&this.clearTextSearchInput&&(this.freeTextSearchInput.value="",e.hide(this.clearTextSearchInput))},t}(Yotpo),Yotpo.MobileFilterHandler=function(e){function t(){a=e.filterAndSearch.filters_state_manager.aggregators_types,l=e.filterAndSearch.filters_drop_down_default_answer,d=e.filterAndSearch.images_drop_down_answer,c=e.filterAndSearch.imagesMobileFilterDefaultAnswer}function o(e,t){var o={type:a.crfs,is_default_answer:!0,value:{}};return t!==l&&(o.is_default_answer=!1,o.value.id=e,o.value.value=t),o}function i(e){var t={type:a.images,is_default_answer:!0,value:!1};return e!==c&&(t.is_default_answer=!1,t.value=!0),t}function n(e){var t={type:a.scores,is_default_answer:!0,value:0};return e!==l&&(t.is_default_answer=!1,t.value=parseInt(e)),t}function r(t){for(var o=t.length,i=0;o>i;i++)e.addClass(t[0],"radio-non-selected-color"),e.removeClass(t[0],"radio-selected-star-color")}function s(t){for(var o=0;o<t.length;o++)e.addClass(t[o],"radio-selected-star-color"),e.removeClass(t[o],"radio-non-selected-color")}var a,l,c,d;return t.prototype.parseChosenFilter=function(t){var r=t.selected.getAttribute("data-value");r=e.toTitleCase(r);var s=t.containerElement||t.element,l=s.getAttribute("data-type");if(l===a.scores)return n(r);if(l===a.images)return i(r);if(l===a.crfs){var c=t.selected.getAttribute("data-question-id");return o(c,r)}},t.prototype.resetSelectedToDefault=function(e,t){if(t===a.scores){var o=e.containerElement.getElementsByClassName("radio-selected-star-color");r(o)}else this.unmarkTextualAnswer(e.prevSelected)},t.prototype.unmarkTextualAnswer=function(e){var t=e.parentElement.querySelector(".radio-label");t.classList.add("radio-non-selected-color"),t.classList.remove("radio-selected-color")},t.prototype.markTextualAnswer=function(e){var t=e.parentElement.querySelector(".radio-label");t.classList.add("radio-selected-color"),t.classList.remove("radio-non-selected-color")},t.prototype.setSelectedStarsUI=function(e,t){var o=e.selected.parentElement.querySelector(".yotpo-stars"),i=e.containerElement.getElementsByClassName("radio-selected-star-color");if(i.length>0&&r(i),t.value!==l){var n=o.getElementsByClassName("yotpo-icon");s(n)}},t.prototype.loadWithCurrentFilters=function(t){var o,i;o=document.getElementById(t[a.scores]?"radio-score-"+t.scores:"radio-score-all"),o.click(),i=document.getElementById(t[a.images]?"radio-images-only":"radio-images-all-reviews"),i.click();var n=document.querySelectorAll('div.mobile-single-filter[name^="radio-crf-"'),r=Array.from(n);t[a.crfs]&&e.forEach(t.crfs,function(e){var t="radio-crf-answer-"+e.answers[0],o="radio-crf-"+e.question_id,i=document.querySelector('[id="'+t+'"][name="'+o+'"]');i.click();var n=document.querySelector('div.mobile-single-filter[name="'+i.name+'"'),s=r.indexOf(n);s>-1&&r.splice(s,1)});for(var s=0;s<r.length;s++){var l=r[s].getElementsByClassName("mobile-filter-radio-button")[0];l.getElementsByTagName("input")[0].click()}},t}(Yotpo),Yotpo.MobileFilterModal=function(e){function t(t){this.context=t,this.filtersManager=t.filtersManager,this.filtersManager.subscribeToFiltersUpdate(this),this.radioBtnFiltersRadio=[],this.filterHandler=new e.MobileFilterHandler,c=e.filterAndSearch.filters_state_manager.aggregators_types,o.call(this,t,n,"mobile-single-filter"),i.call(this)}function o(t,o,i){for(var n=this,r=t.getElement().getElementsByClassName(i),s=0;s<r.length;++s){var a=new e.MobileFiltersRadio(r[s]);a.on("change",function(e){o.call(n,e)}),n.radioBtnFiltersRadio.push(a)}}function i(){var t=this,o=t.context.element.getElementsByClassName("mobile-filters-modal")[0],i=t.context.element.getElementsByClassName("more-filters-btn")[0],n=t.context.element.getElementsByClassName("mobile-clear-all-btn")[0],s=o.querySelector(".yotpo-icon-cross"),a=new e.Modules.PopupWindow(o,{closeWhenPressedOutside:!1});this.submitAllBtn=t.context.element.getElementsByClassName("mobile-filters-footer-btn")[0],e.addEventListener(s,"click",function(){t.filtersManager.resetAllPendingToSubmitted(),a.close(!0)}),e.addEventListener(i,"click",function(){var e=t.filtersManager.getCurrentSubmittedFilters();t.filterHandler.loadWithCurrentFilters(e),a.open()}),e.addEventListener(n,"click",function(){t.filtersManager.resetAllPendingToDefault();var e=t.filtersManager.getCurrentPendingFilters();t.filterHandler.loadWithCurrentFilters(e)}),e.addEventListener(this.submitAllBtn,"click",function(){t.context.switchSearchInProgressView(!0),t.filtersManager.approvePendingFilters(),r.call(t),a.close()})}function n(e){var t=this.filterHandler.parseChosenFilter(e);this.filtersManager.removeFilter(!1,t.type,t.value),t.is_default_answer?(this.filterHandler.resetSelectedToDefault(e,t.type),this.filterHandler.markTextualAnswer(e.selected)):(this.filtersManager.addFilter(!1,t.type,t.value),this.filterHandler.unmarkTextualAnswer(e.prevSelected),t.type===c.scores?this.filterHandler.setSelectedStarsUI(e,t):this.filterHandler.markTextualAnswer(e.selected))}function r(){var e=this.context.filtersManager.getCurrentSubmittedFilters(),t=Object.keys(e);a.call(this),t.length>0&&s.call(this,e,t)}function s(t,o){for(var i=this.context.getElement().getElementsByClassName("filter-tag")[0],n={},r=this,s=0;s<o.length;s++){var a=o[s];switch(a){case c.scores:n.value=t[a][0],n.name="score",n.displayText=n.name+": "+n.value,l.call(r,i,n);break;case c.images:n.value=t[a][0],n.name="image",n.displayText=e.filterAndSearch.withImagesOnly,l.call(r,i,n);break;case c.crfs:e.forEach(t[a],function(e){n.value=e.answers[0],n.name="crf-"+e.question_id;var t=document.querySelector('[name="radio-crf-'+e.question_id+'"'),o=t.getAttribute("data-question-title");n.displayText=o+": "+n.value,l.call(r,i,n)})}}}function a(){for(var e=Array.from(this.context.getElement().getElementsByClassName("filter-tag")),t=e.length,o=0;t>o;o++){var i=e.pop();i.classList.contains("yotpo-hidden")||i.remove()}}function l(t,o){var i=this,n=t.cloneNode(!0),r=n.getElementsByClassName("yotpo-icon-cross")[0],s=t.parentElement;n.classList.remove("yotpo-hidden"),e.addEventListener(r,"click",function(){var t=this.parentElement.getAttribute("name");this.parentElement.remove(),e.forEach(i.radioBtnFiltersRadio,function(e){if(e.elementName.includes(t)){i.context.switchSearchInProgressView(!0);var o=i.filterHandler.parseChosenFilter(e);i.filtersManager.removeFilter(!0,o.type,o.value)}})}),n.setAttribute("name",o.name),n.getElementsByClassName("filter-tag-text")[0].innerText=e.toTitleCase(o.displayText),s.appendChild(n)}var c;return t.prototype.OnPendingFiltersChange=function(t){if(t){var o=new DOMParser,i=o.parseFromString(t,"text/html"),n=i.querySelector(".total-reviews-search").getAttribute("total-reviews-search");this.submitAllBtn.getElementsByClassName("footer-text")[0].innerText=e.filterAndSearch.show+" "+n+" "+e.filterAndSearch.filtered_reviews_title}},t}(Yotpo),Yotpo.MobileFiltersRadio=function(e){function t(e){this.element=e,this.elementName=this.element.getAttribute("name"),this.btns=this.element.getElementsByClassName("mobile-filter-radio-buttons")[0].getElementsByClassName("mobile-filter-radio-button"),this.selected=this.element.querySelector("input[name="+this.elementName+"]:checked"),this.selectedValue=this.selected.parentElement.getElementsByTagName("label")[0].innerHTML,o.call(this)}function o(){for(var t=this,o=0;o<t.btns.length;o++)e.addEventListener(t.btns[o],"change",function(){var e=this,o=e.getElementsByTagName("input")[0];if(o.id!==t.selected.id){t.updateSelected(e);var i={selected:t.selected,selectedValue:t.selectedValue,containerElement:t.element,prevSelected:t.prevSelected};t.trigger("change",i)}})}return t.prototype.on=function(t,o){e.Modules.Event.on.call(this,t,o)},t.prototype.trigger=function(t,o){e.Modules.Event.trigger.call(this,t,o)},t.prototype.updateSelected=function(e){e.getElementsByTagName("input")[0].checked=!0,this.prevSelected=this.selected,this.selected.checked=!1,this.selected=this.element.querySelector("input[name="+this.elementName+"]:checked"),this.selectedValue=this.selected.parentElement.getElementsByTagName("label")[0].innerHTML},t}(Yotpo),Yotpo.SearchInProgress=function(e){var t={};return t.switchMode=function(t,o){var i=t.querySelector(".search-in-progress"),n=t.querySelector(".yotpo-reviews");i&&n&&(o?(e.show(i),e.hide(n)):(e.hide(i),e.show(n,"block")))},t}(Yotpo),Yotpo.HoverIntervalEvent=function(e){function t(e){this.interval=e.interval,this.objects=[]}function o(e){var t=this;return function(){var o=this,i=t.mouseenterTimeStamp;if(i){var n=new Date-i;n>=e&&t.callback.call(o)}}}return t.prototype.register=function(t,i){if(t){var n={callback:i};e.addEventListener(t,"mouseenter",function(){n.mouseenterTimeStamp=new Date}),e.addEventListener(t,"mouseleave",o.call(n,this.interval))}},t}(Yotpo),Yotpo.TestingGroupsHandler=function(e){function t(e){this.settings=e||{},this.seoClient=!1,this.initialized=!1}t.prototype.getUserAllocation=function(){return this.userAllocation=this.userAllocation||s(this.settings),this.userAllocation},t.prototype.setSeoClient=function(e){this.seoClient=e},t.prototype.initialize=function(){this.initialized=!0},t.prototype.getTestingGroupsForAnalytics=function(){return a.call(this)?(this.testingGroupParams=this.testingGroupParams||n(e.feature_testing_groups,this.getUserAllocation()),this.testingGroupParams):void 0},t.prototype.getTestingGroupsForServer=function(){return a.call(this)?(this.featureTestingGroups=this.featureTestingGroups||i(e.feature_testing_groups,this.getUserAllocation()),this.featureTestingGroups):void 0};var o=function(e,t){var o={};for(var i in e)if(e.hasOwnProperty(i)){var n=r(e[i],t);n&&(o[n.feature_id]=n.group_id)}return o},i=function(e,t){var i={},n=!1,r=o(e,t);for(var s in r)r.hasOwnProperty(s)&&(n=!0,i["ftg_fi_"+s]=r[s]);return n?i:void 0},n=function(e,t){var i="",n=o(e,t);for(var r in n)n.hasOwnProperty(r)&&(i+="f"+r+"_g"+n[r]+":");return""!=i?"ftg_"+i.substring(0,i.length-1):void 0},r=function(e,t){for(var o in e)if(e.hasOwnProperty(o)){var i=o.split(".."),n=i[0],r=i[1];if(t>n&&r>=t)return e[o]}return null},s=function(t){var o;return t.userSettings.ab_testing&&(o=e.Modules.UserAllocation.getUserAllocation()),o},a=function(){return this.initialized?this.seoClient?!1:!0:(e.safeConsole("TestingGroupsHandler had not yet initialized","error"),!1)};return t}(Yotpo),Yotpo.Widgets=Yotpo.Widgets||{},Yotpo.Widgets.Badge=function(e){function t(e,t){var o=this;o._controller=e,o.element=t,o.settings={pid:o.element.getAttribute("data-product-id")};for(var n in i)i.hasOwnProperty(n)&&o.on(n,i[n])}function o(){var t=this,o=this.getElement().getElementsByClassName("y-badge")[0];o&&(o.onclick=function(){var e=t._controller.getWidgetByName("Testimonials");e&&e.open()});var i=t.element.querySelector(".yotpo-display-wrapper"),n=this.settings.pid,r=null===n?"Reviews_Badge":"Product_Badge";e.currentAnalytics.trackUniqueEvent(r,"loaded","productId",n),e.currentInview.register(t.element,function(){e.currentAnalytics.trackUniqueEvent(r,"shown","productId",n)}),e.addEventListener(i,"click",function(){e.currentAnalytics.trackUniqueEvent(r,"clicked_on","productId",n)}),e.hoverAnalytics.register(i,function(){e.currentAnalytics.trackUniqueEvent(r,"hovered","productId",n)})}var i={};return t.prototype.getMethod=function(){return"badge"},t.prototype.getSettings=function(){return this.settings},t.selector=e.widgets.badge.selector,t.prototype.getElement=function(){return this.element},t.prototype.trigger=function(t,o){e.Modules.Event.trigger.call(this,t,o)},t.prototype.on=function(t,o){e.Modules.Event.on.call(this,t,o)},t.prototype.state=function(t){return e.Modules.Helper.state.call(this,t)},t.prototype.is=function(t){return e.Modules.Helper.is.call(this,t)},t.prototype.getLayout=function(){return"old"},i={ready:function(){o.call(this)}},t}(Yotpo),Yotpo.Widgets=Yotpo.Widgets||{},Yotpo.Widgets.Basic=function(e){function t(t,o,i,n){var r=this;r._controller=t,r.element=o,r.type=(i||"reviews").toLowerCase(),r.settings={page:n||1},r.query_mode=!1;var s=o.getAttribute("data-host-widget");s&&(r.settings["host-widget"]=s);var a=o.getAttribute("data-product-id");a&&(r.settings.pid=a);var l=r._controller.userSettings.review_with_pictures;if(l)if(r.settings.is_mobile=e.isMobile(),l.settings.number_of_pictures_per_review){var p=parseInt(l.settings.number_of_pictures_per_review);r.settings.pictures_per_review=Math.min(p,u)}else r.settings.pictures_per_review=d;for(var g in c)c.hasOwnProperty(g)&&r.on(g,c[g])}function o(){var t=this.getType().substring(0,this.type.length-1),o=e[e.capitalize(t)];if(o&&"function"==typeof o.load){this.content=[];for(var i=this.getElement().getElementsByClassName("yotpo-"+t),n=0;n<i.length;++n){var r=o.load(i[n]);this.content.push(r)}}}function i(){var t,o,i=this,r=this._controller.getAppKey(),s=i.element.querySelectorAll(".yotpo-review .social-link");for(t=0,o;o=s[t];t++)e.addEventListener(o,"click",function(){var t=this.getAttribute("data-network");e.currentAnalytics.trackEvent(i.analyticsCategory,"clicked_on","share_published_"+t)});var a,l=i.element.querySelectorAll(".yotpo-review .yotpo-footer .yotpo-syndication-reference .syndication-reference-link");for(t=0,a;a=l[t];t++)e.addEventListener(a,"click",function(){e.currentAnalytics.trackEvent("reviews","clicked_on","syndication_link","onsite_v2",r)});n.call(this);var c,d,u,p,g;for(c=this.getElement().getElementsByClassName("yotpo-review-images-wrapper"),d=this.getElement().getElementsByClassName("image-review"),t=0;p=c[t];t++)g=p.getElementsByClassName("image-review"),e.currentAnalytics.trackEvent("reviews","loaded","review_image",g.length),e.currentInview.register(p,function(){e.currentAnalytics.trackEvent("reviews","shown","review_image","onsite_v2",r)});for(t=0;u=d[t];t++){var h=d[t].getAttribute("data-image-id");!function(t){e.currentAnalytics.trackUniqueEvent("pictures_in_reviews","loaded","image",t),e.currentInview.registerinModal(u,function(){e.currentAnalytics.trackUniqueEvent("pictures_in_reviews","shown","image",t)},!0),e.hoverAnalytics.register(u,function(){e.currentAnalytics.trackUniqueEvent("pictures_in_reviews","hovered","image",this.getAttribute("data-image-id"))}),e.addEventListener(u,"click",function(){e.currentAnalytics.trackUniqueEvent("pictures_in_reviews","clicked_on","image",t)})}(h)}}function n(){for(var t,o=["review","question"],i=this._controller.getAppKey(),n=0;t=o[n];n++)for(var r,s=this.getElement().getElementsByClassName("write-first-"+t+"-button"),a=0;r=s[a];a++)e.currentInview.register(r,function(t){return function(){e.currentAnalytics.trackEvent(t+"s","shown","be_the_first_button","onsite_v2",i)}}(t)),e.addEventListener(r,"click",function(t){return function(){e.currentAnalytics.trackEvent(t+"s","clicked_on","be_the_first_button","onsite_v2",i)}}(t))}function r(){this.reviewImageWrappers=this.element.getElementsByClassName("yotpo-review-images-wrapper");var t=this.element.querySelector(".yotpo-lightbox");t&&(this.contentProvider=new e.SingleReviewContentProvider,this.lightbox=new e.Widgets.Lightbox(this._controller,t,this.contentProvider,p,t,this.settings.pictures_per_review));for(var o=0;o<this.reviewImageWrappers.length;o++)s.call(this,this.reviewImageWrappers[o])}function s(e){if(a(e),this.lightbox){var t=e.getElementsByClassName("image-review");l.call(this,t)}}function a(t){new e.Modules.DynamicLayout(t,{animation:!0})}function l(e){for(var t=this,o=0;o<e.length;o++)e[o].onclick=function(){t.contentProvider.clear(),t.lightbox.open(this)}}var c={},d=3,u=15;t.prototype.getMethod=function(){return"reviews"===this.type&&this.query_mode?"queried_reviews":this.type},t.prototype.getSettings=function(){return this.settings},t.prototype.getElement=function(){return this.element},t.prototype.getType=function(){return this.type},t.prototype.getContent=function(){return this.content||[]},t.prototype.on=function(t,o){e.Modules.Event.on.call(this,t,o)},t.prototype.trigger=function(t,o){e.Modules.Event.trigger.call(this,t,o)},t.prototype.refresh=function(){e.Modules.Refresh.perform.call(this)},t.prototype.state=function(t){return e.Modules.Helper.state.call(this,t)},t.prototype.is=function(t){return e.Modules.Helper.is.call(this,t)},t.prototype.getTemplate=function(){return this.template=this.template||(this.getElement().getElementsByClassName("yotpo-template")||[])[0],this.template},t.prototype.supportsPagination=function(){return!isNaN(this.settings.page)&&"main_widget"==this.settings["host-widget"]&&"reviews"==this.type},c={ready:function(){e.Modules.Pagination.init.call(this),i.call(this),r.call(this),o.call(this),e.Modules.Handle.popup.call(this)},pageChanged:function(){this.is_filtered_reviews||this.refresh()}};var p={track:function(t,o,i){"loaded"==t&&e.currentAnalytics.trackEvent("reviews","loaded","review_image_gallery",i)},category:"pictures_in_reviews_popup"};return t}(Yotpo),Yotpo.Widgets=Yotpo.Widgets||{},Yotpo.Widgets.Bottomline=function(e){function t(t,o){var i=this;i.analyticsCategory="star_rating",i._controller=t,i.element=o,i.settings={pid:o.getAttribute("data-product-id"),link:o.getAttribute("data-url"),skip_average_score:o.getAttribute("data-skip-average-score")||!e.getMainWidget(i._controller)},e.getMainWidget(i._controller)&&(i.settings.main_widget_pid=e.getMainWidget(i._controller).settings.pid);var n={lang:"locale",demo:"demo","product-readonly":"product-readonly"};for(var s in n)i.element.getAttribute("data-"+s)&&(i.settings[n[s]]=i.element.getAttribute("data-"+s));for(var a in r)r.hasOwnProperty(a)&&i.on(a,r[a]);var l=i.element.querySelectorAll(".aggregated-product-related-fields");e.CustomFields.bindProductRelatedFields(l),e.hoverAnalytics.register(i.element,function(){e.currentAnalytics.trackUniqueEvent(i.analyticsCategory,"hovered")})}function o(){for(var t,o=this,i=o.element.querySelectorAll(".standalone-bottomline"),n=0;t=i[n];n++)e.addEventListener(t,"click",function(){e.currentAnalytics.trackEvent(o.analyticsCategory,"clicked_on",null,o.settings.pid)});var r=o.element.getElementsByClassName("yotpo-star-distribution");if(r.length){for(var s=e.getMainWidget(o._controller).getActiveSource(),a=s.getSettings().pid,l=["review-stars","yotpo-sum-reviews","yotpo-star-distribution-graph"],n=0;n<l.length;n++)for(var c=r[0].getElementsByClassName(l[n]),d=0;d<c.length;d++){var u=c[d];if(e.hasClass(u,"yotpo-distribution-clickable")){var p=parseInt(u.getAttribute("data-score-distribution"));e.addEventListener(u,"click",function(t){return function(){e.currentAnalytics.trackEvent("reviews","clicked_on","star_distribution",a+":"+t)}}(p))}}var g=r[0].getElementsByClassName("yotpo-star-distribution-footer")[0].getElementsByTagName("span")[0];e.addEventListener(g,"click",function(){e.currentAnalytics.trackEvent("reviews","clicked_on","star_distribution_show_all",a)})}}function i(){var t=this,o=t.element.getElementsByClassName("yotpo-star-distribution");if(o.length){for(var i=0,n=["review-stars","yotpo-sum-reviews","yotpo-star-distribution-graph"],r=0;r<n.length;r++)for(var s=o[0].getElementsByClassName(n[r]),a=0;a<s.length;a++){var l=s[a];e.hasClass(l,"yotpo-distribution-clickable")&&(l.onclick=function(){e.show(o[0].getElementsByClassName("yotpo-star-distribution-footer")[0]),t.trigger("starDistributionClicked",this)},"yotpo-sum-reviews"==n[r]&&(i+=parseInt(l.innerHTML.replace(/[()]/g,""))))}o[0].getElementsByClassName("yotpo-star-distribution-show-all")[0].onclick=function(){t.trigger("showAllReviews",i)}}}function n(){var e=this,t=e.element.getElementsByClassName("yotpo-product-related-fields");if(t.length){var o=t[0].getElementsByClassName("yotpo-product-related-show-all")[0];o.onclick=function(){e.trigger("showCustomdFields")};var o=t[0].getElementsByClassName("yotpo-product-related-show-less")[0];o.onclick=function(){e.trigger("hideCustomdFields")}}}var r={};return t.selector=e.widgets.bottomline.selector,t.prototype.getElement=function(){return this.element},t.prototype.getSettings=function(){return this.settings},t.prototype.getMethod=function(){return"bottomline"},t.prototype.on=function(t,o){e.Modules.Event.on.call(this,t,o)},t.prototype.trigger=function(t,o){e.Modules.Event.trigger.call(this,t,o)},t.prototype.refresh=function(){e.Modules.Refresh.perform.call(this)},t.prototype.state=function(t){return e.Modules.Helper.state.call(this,t)},t.prototype.is=function(t){return e.Modules.Helper.is.call(this,t)},t.prototype.getLayout=function(){return"old"},r={ready:function(){var t=this;i.call(t),n.call(t),o.call(t);var r=e.getMainWidget(t._controller);if(t.settings.pid&&this.element.querySelectorAll(".standalone-bottomline").length>0){var s=this.settings.pid;r?e.currentAnalytics.trackEvent("star_rating","loaded","product_page",s):e.currentAnalytics.trackEvent("star_rating","loaded","category_page",s),e.currentInview.register(t.element,function(){e.currentAnalytics.trackEvent("star_rating","shown",null,s)})}t.getElement().querySelectorAll(".star-clickable").length>0&&e.addEventListener(t.getElement(),"click",function(){e.scrollToReviewsTabInMainWidget(t._controller)})},starDistributionClicked:function(t){var o=this;e.scrollToReviewsTabInMainWidget(o._controller);var i=parseInt(t.getAttribute("data-score-distribution")),n=(e.getMainWidget(o._controller),e.getMainWidget(o._controller).getActiveSource());n.getSettings().star=i,this.getElement().getAttribute("data-demo")&&(n.getSettings().demo=!0),n.getSettings().page=1,e.togglePreLoader(n.getElement()),n.refresh();for(var r=["review-stars","yotpo-sum-reviews","yotpo-star-distribution-graph"],s=0;s<r.length;s++)for(var a=this.getElement().getElementsByClassName(r[s]),l=0;l<a.length;l++){var t=a[l];if(parseInt(t.getAttribute("data-score-distribution"))!=i)e.addClass(t,"yotpo-distribution-unactive");else if(e.removeClass(t,"yotpo-distribution-unactive"),"yotpo-sum-reviews"==r[s]){var c=t.innerHTML;document.getElementsByClassName("yotpo-reviews-nav-tab-sum")[0].innerHTML=c}}},showAllReviews:function(t){var o=this;e.scrollToReviewsTabInMainWidget(o._controller);var i=e.getMainWidget(o._controller);e.hide(document.getElementsByClassName("yotpo-star-distribution-footer")[0]);var n=i.getActiveSource();delete n.getSettings().star,n.getSettings().page=1,this.getElement().getAttribute("data-demo")&&(n.getSettings().demo=!0),e.togglePreLoader(n.getElement()),n.refresh(),document.getElementsByClassName("yotpo-reviews-nav-tab-sum")[0].innerHTML="("+t+")";for(var r=this.getElement().getElementsByClassName("yotpo-star-distribution-graph"),s=0;s<r.length;s++){var a=r[s];e.removeClass(a,"yotpo-distribution-unactive")}},showCustomdFields:function(){for(var t=this.getElement(),o=t.getElementsByClassName("yotpo-product-related-fields-column")[0],i=o.querySelectorAll(".yotpo-product-related-field-name.yotpo-hidden"),n=0;n<i.length;n++)e.show(i[n],"block");for(var r=o.querySelectorAll(".yotpo-rating-bars.yotpo-hidden, .yotpo-size-bars.yotpo-hidden"),n=0;n<r.length;n++)e.show(r[n],"block");e.hide(t.getElementsByClassName("yotpo-product-related-show-all")[0]),e.show(t.getElementsByClassName("yotpo-product-related-show-less")[0],"block")},hideCustomdFields:function(){for(var t=this.getElement(),o=t.getElementsByClassName("yotpo-product-related-fields-column")[0],i=o.getElementsByClassName("yotpo-product-related-field-name"),n=5;n<i.length;n++)e.hide(i[n]);for(var r=o.querySelectorAll(".yotpo-product-related-fields-bars > .yotpo-field-bars-container > .yotpo-rating-bars, .yotpo-product-related-fields-bars > .yotpo-field-bars-container > .yotpo-size-bars"),n=5;n<r.length;n++)e.hide(r[n]);e.hide(t.getElementsByClassName("yotpo-product-related-show-less")[0]),e.show(t.getElementsByClassName("yotpo-product-related-show-all")[0],"block")}},t}(Yotpo),Yotpo.Widgets=Yotpo.Widgets||{},Yotpo.Widgets.Carousels=function(e){function t(t,o){var i=this;i._controller=t,i.element=o,i.autoplay_enabled=i.element.getAttribute("data-autoplay-enabled"),i.settings={images_to_display:u(i.element.clientWidth)};for(var n in q){var r=q[n],s=i.element.getAttribute(r);"undefined"!=typeof s&&(i.settings[n]=s)}"site"==i.element.getAttribute("data-type")?i.settings.pid="yotpo_site_reviews":"both"==i.element.getAttribute("data-type")&&(i.settings.include_site_reviews=!0),"top_rated"==i.element.getAttribute("data-mode")&&(i.settings.best=!0),"manual"==i.element.getAttribute("data-mode")&&(i.settings.manual=!0),i.element.getAttribute("data-review-ids")&&(i.settings.id=i.element.getAttribute("data-review-ids").split(",")),i.element.getAttribute("data-count")&&(i.settings.per_page=parseInt(i.element.getAttribute("data-count")),i.settings.per_page>9&&(i.settings.per_page=9)),i.carouselSpeed=parseInt(i.settings.autoplay_speed||I),i.carouselSpeed<T&&(i.carouselSpeed=T);for(var a in M)M.hasOwnProperty(a)&&i.on(a,M[a]);e.hoverAnalytics.register(i.element,function(){e.currentAnalytics.trackUniqueEvent("carousel","hovered")})}function o(){function e(e){if(o.autoplay_enabled){var i,n="visible",r="hidden",s={focus:n,focusin:n,pageshow:n,blur:r,focusout:r,pagehide:r};e=e||window.event,i=e.type in s?s[e.type]:this[t]?"hidden":"visible","hidden"==i?o.slider.pause():o.slider.play()}}var t="hidden",o=this;t in document?document.addEventListener("visibilitychange",e):(t="mozHidden")in document?document.addEventListener("mozvisibilitychange",e):(t="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",e):(t="msHidden")in document?document.addEventListener("msvisibilitychange",e):"onfocusin"in document?document.onfocusin=document.onfocusout=e:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=e,void 0!==document[t]&&e({type:document[t]?"blur":"focus"})}function i(){this.settings.data_show_navigation&&(u(this.getCarouselContainerWidth())>=this.carouselReviewsCount?e.hide(this.getElement().querySelector(".carousel-arrows")):e.show(this.getElement().querySelector(".carousel-arrows")))}function n(){return this.autoplay_enabled&&u(this.getCarouselContainerWidth())<this.carouselReviewsCount}function r(){var t=this.getElement(),o=this,i=0,n=0;t.querySelector(".yotpo-icon-left-arrow-thin").onclick=function(){new Date-i<x||(i=new Date,o.slider.left(),e.currentAnalytics.trackEvent("carousel","clicked_on","previous"))},t.querySelector(".yotpo-icon-right-arrow-thin").onclick=function(){new Date-n<x||(n=new Date,o.slider.right(),e.currentAnalytics.trackEvent("carousel","clicked_on","next"))}}function s(){var t=this.getElement(),o=this;t.onmouseover=function(){o.slider.pause()},t.onmouseout=function(){o.slider.play()};for(var i=function(t,o){for(var i=t.querySelectorAll(".product-link-container"),n=0;n<i.length;n++)i[n].querySelector(".carousel-review-product-text")&&(i[n].onmouseover=function(){this.querySelector(".carousel-review-product-text").style.textDecoration="underline"},i[n].onmouseout=function(){this.querySelector(".carousel-review-product-text").style.textDecoration="none"}),i[n].onclick=function(){return e.currentAnalytics.trackEvent("carousel","clicked_on","review",o),!0}},n=t.querySelectorAll(".single-carousel.review"),r=0;r<n.length;r++){var s=n[r];i(s,s.getAttribute("data-review-id")),e.currentAnalytics.trackReview(s,"carousel","loaded"),e.hoverAnalytics.register(s,function(){e.currentAnalytics.trackReview(this,"carousel","hovered")}),e.currentInview.register(s,function(t){return function(){e.currentAnalytics.trackReview(t,"carousel","shown")}}(s))}}function a(e){for(var t=e.querySelectorAll(".carousel-review-title"),o=0;o<t.length;o++)t[o].setAttribute("full-headline",t[o].innerHTML.trim()),t[o].innerHTML.trim().length>y&&(t[o].innerHTML=t[o].innerHTML.trim().substring(0,y-3)+"...")}function l(t){function o(o,i,n,r){"icon-yotpo-top-corner"==r?(n-=E,i+=f/2):"icon-yotpo-right-corner"==r?(n+=S,i+=f):(n+=S,i-=k),o.style.left=i+"px",o.style.top=n+"px",e.removeClassList(o,["icon-yotpo-top-corner","icon-yotpo-right-corner","icon-yotpo-left-corner"]),e.addClass(o,r),e.show(t.querySelector(".yotpo-corner"))}var i,n,r=t.querySelector(".carousel-tool-tip");r.querySelector(".tool-tip-header-span").innerHTML=this.reviewTitle,r.querySelector(".tool-tip-content").innerHTML=this.reviewBody;var s=e.getPosition(this),a=e.getPosition(t),l=s.x-a.x,c=s.y-a.y,d=u(t.clientWidth);3==d?(t.querySelector(".yotpo .scroller").getBoundingClientRect().right-this.getBoundingClientRect().right<f?(l-=f+_,i="icon-yotpo-right-corner"):(l+=w,i="icon-yotpo-left-corner"),n=-b):(n=b,l-=f/2-w,i="icon-yotpo-top-corner"),0>l&&(l=0),c+=n;var p=t.querySelector(".carousel-tool-tip .yotpo-tool-tip");p.style.left=l+"px",p.style.top=c+"px",o(t.querySelector(".yotpo-corner"),l,c,i),p.style.display="block"}function c(t){var o=this,i=document.createElement("div"),n=this.getElement();return i.className="carousel-read-more",i.innerHTML=n.querySelector(".carousel-read-more-text").getAttribute("data-text"),i.reviewTitle=t.querySelector(".carousel-review-title").getAttribute("full-headline"),i.reviewBody=t.querySelector(".carousel-review-body").fullReview.substring(0,h),i.onmouseover=function(){o.slider.pause(),l.call(this,n)},i.onmouseout=function(){n.querySelector(".carousel-tool-tip .yotpo-tool-tip").style.display="none",e.hide(n.querySelector(".yotpo-corner"))},i.onclick=function(e){e.stopPropagation()},i}function d(t){for(var o=0;o<t.length;o++)for(var i=t[o].querySelectorAll(".carousel-review-body"),n=0;n<i.length;n++)i[n].innerHTML=i[n].innerHTML.trim(),i[n].fullReview=i[n].innerHTML,i[n].innerHTML.length>=v&&(i[n].innerHTML=i[n].innerHTML.substring(0,v)+"...",i[n].appendChild(c.call(this,t[o])),e.show(this.getElement().querySelector(".yotpo-reviews-carousel .carousel-tool-tip")))}function u(e){var t;return e>=960?t=3:e>=600&&960>e?t=2:600>e&&(t=1),t}function p(){"undefined"!=typeof this.slider&&delete this.slider;var t=this.element.getElementsByClassName("yotpo-carousel")[0],o=this.settings.images_to_display+1,i=this.carouselReviewsCount<o?0:o;this.slider=new e.Modules.Slide(t,{imageCount:this.settings.per_page||this.carouselReviewsCount,displayWindowCount:u(this.getCarouselContainerWidth()),initialPosition:i,slideDirection:A,delayInterval:this.carouselSpeed,autoSlide:n.call(this),rtl:"rtl"==this._controller.userSettings.direction,animationDuration:P}),this.slider.onSlide(function(){e.currentInview.verifyInview()})}var g=403,h=400,m=300,f=298,y=57,v=130,w=90,b=20,_=15,S=20,C=30,E=10,k=9,A="right",x=1e3,I=3e3,T=1500,P=1450,q={autoplay_speed:"data-autoplay-speed",data_show_navigation:"data-show-navigation",data_show_bottomline:"data-show-bottomline",data_header_customisation_enabled:"data-header-customisation-enabled",data_header_customisation_text:"data-header-customisation-text",data_header_customisation_font_size:"data-header-customisation-font-size",data_header_customisation_color:"data-header-customisation-color",data_header_customisation_alignment:"data-header-customisation-alignment",data_background_color:"data-background-color",data_testimonials_page_enabled:"data-testimonials-page-enabled",data_testimonials_page_link:"data-testimonials-page-link",data_testimonials_page_text:"data-testimonials-page-text",demo:"data-demo",pid:"data-product-id"},M={};return t.prototype.getCarouselContainerWidth=function(){return this.getElement().clientWidth},t.prototype.getMethod=function(){return"carousels"},t.selector=e.widgets.carousels.selector,t.prototype.getSettings=function(){return this.settings},t.prototype.getElement=function(){return this.element},t.prototype.on=function(t,o){e.Modules.Event.on.call(this,t,o)},t.prototype.trigger=function(t,o){e.Modules.Event.trigger.call(this,t,o)},t.prototype.state=function(t){return e.Modules.Helper.state.call(this,t)},t.prototype.is=function(t){return e.Modules.Helper.is.call(this,t)},t.prototype.refresh=function(){e.Modules.Refresh.perform.call(this)},t.prototype.getLayout=function(){return"new"},M={ready:function(){if(this.is("initialized")){var t=this,i=this.getElement();this.carouselReviewsCount=parseInt(i.querySelector(".carousel-display-wrapper").getAttribute("data-attr-total-reviews")),p.call(this),this.slider.start(),o.call(t),e.currentInview.register(t.element,function(){e.currentAnalytics.trackEvent("carousel","shown",null,null)}),i.querySelector(".all-reviews")&&(i.querySelector(".all-reviews").onclick=function(){e.currentAnalytics.trackEvent("carousel","clicked_on","read_more",null)
}),t.settings.direction=e.getComputedStyle(t.element,"direction"),this.settings.data_show_navigation&&r.call(this),s.call(this);for(var n=i.querySelectorAll(".single-carousel"),l=0;l<n.length;l++)a(n[l]);d.call(this,n)}},pageChanged:function(){var e=this;e.refresh()},sizeCalculated:function(t){if(this.is("initialized")){var o,n,r,s=this.getCarouselContainerWidth(),a=u(s),l=this.getElement();if("undefined"!=typeof this.slider){this.slider.pause(),p.call(this),this.slider.start(),l.style.maxWidth=window.innerWidth-C+"px","yotpo-size-7"===t||"yotpo-size-3"===t?(o="big-version",n="small-version",r=g):(o="small-version",n="big-version",r=m);var c=(s-a*r)/a,d=l.querySelector(".carousel-display-wrapper"),h=l.querySelectorAll(".single-carousel");!this.settings.data_testimonials_page_enabled||"yotpo-size-1"!==t&&"yotpo-size-2"!==t&&"yotpo-size-3"!==t||e.addClass(d,"has-testimonials-link");for(var f=0;f<h.length;f++)e.show(h[f].querySelector("."+o)),e.hide(h[f].querySelector("."+n)),h[f].style.marginRight=c+"px";this.slider.play(),i.call(this),this.getElement().querySelector(".scroller").style.width=s+"px";var y=this.carouselReviewsCount-1,v=y>0?"has_reviews":"no_reviews";e.currentAnalytics.trackUniqueEvent("carousel","loaded",v)}}}},t}(Yotpo),Yotpo.Widgets=Yotpo.Widgets||{},Yotpo.Widgets.Embedded=function(e){function t(t,o){var n=this;n.analyticsCategory="embed",n._controller=t,n.element=o,n.sources={},n.settings={per_page:n.element.getAttribute("data-reviews"),view:{type:n.element.getAttribute("data-product-id"),layout:n.element.getAttribute("data-layout"),width:n.element.getAttribute("data-width"),headerText:n.element.getAttribute("data-header-text"),transparency:n.element.getAttribute("data-transparency"),headerBackgroundColor:n.element.getAttribute("data-header-background-color"),bodyBackgroundColor:n.element.getAttribute("data-body-background-color"),fontSize:n.element.getAttribute("data-font-size"),fontColor:n.element.getAttribute("data-font-color")}};for(var r in i)i.hasOwnProperty(r)&&n.on(r,i[r]);e.hoverAnalytics.register(n.element,function(){e.currentAnalytics.trackUniqueEvent(n.analyticsCategory,"hovered")})}function o(){for(var t,o=this,i=o.element.querySelectorAll(".embedded-item-link"),n=0;t=i[n];n++){var r=t.getAttribute("data-widget-type"),s=t.getAttribute("data-product-id");e.addEventListener(t,"click",function(){e.currentAnalytics.trackEvent(o.analyticsCategory,"clicked_on",r,s)})}}var i={};return t.selector=e.widgets.embedded.selector,t.prototype.getMethod=function(){var e=null;return"yotpo_global_reviews"==this.settings.view.type?e="reviews":"top_rated_products"==this.settings.view.type&&(e="products"),"embedded_widget_"+e},t.prototype.getSettings=function(){return this.settings},t.prototype.getElement=function(){return this.element},t.prototype.on=function(t,o){e.Modules.Event.on.call(this,t,o)},t.prototype.trigger=function(t,o){e.Modules.Event.trigger.call(this,t,o)},t.prototype.state=function(t){return e.Modules.Helper.state.call(this,t)},t.prototype.is=function(t){return e.Modules.Helper.is.call(this,t)},t.prototype.getLayout=function(){return"old"},i={ready:function(){var t=this,i=this.getMethod();t.sources[i]=new e.Widgets.Basic(t._controller,t.getElement(),i),e.copy(t.settings,t.sources[i]),o.call(this),e.Modules.Handle.tooltip.call(this.getElement());var n;"embedded_widget_reviews"==i?n="recent_reviews":"embedded_widget_products"==i&&(n="top_products"),e.currentAnalytics.trackEvent("embed","loaded",n),e.currentInview.register(t.element,function(){e.currentAnalytics.trackEvent("embed","shown",n)})}},t}(Yotpo),Yotpo.Widgets=Yotpo.Widgets||{},Yotpo.Widgets.Main=function(e){function t(t,o){var i=this;i._controller=t,i.element=o,i.sources={},i.query,i.settings={pid:i.element.getAttribute("data-product-id")};var n=e.getURLParameter(location.search,"yoReviewsPage");n&&Number.isInteger(Number(n))&&(i.settings.page=parseInt(n)),e.getURLParameter(location.search,"yo_intentions")&&(i.settings.force_intentions=e.getURLParameter(location.search,"yo_intentions")),i.element.getAttribute("data-product-tags")&&(i.settings.tags=i.element.getAttribute("data-product-tags"));var r=i._controller.getUserSettings(),s={lang:"locale",demo:"demo",mode:"mode","product-readonly":"product-readonly","write-only":"write-only"};"undefined"!==i.element.getAttribute("data-per_page")&&(s.per_page="per_page");for(var a in s)i.element.getAttribute("data-"+a)&&(i.settings[s[a]]=i.element.getAttribute("data-"+a));var l="undefined"!=typeof r.questions_and_answers_standalone&&r.questions_and_answers_standalone!==!1;l||delete i.settings.mode,i.analyticsCategory="reviews",i.isWriteOnly()&&(i.analyticsCategory+="_write_only");for(var c in q)q.hasOwnProperty(c)&&i.on(c,q[c]);e.hoverAnalytics.register(i.element,function(){e.currentAnalytics.trackUniqueEvent(i.analyticsCategory,"hovered")}),_.call(i)}function o(){function t(e,t){o.switchSearchInProgressView(!0),e&&o.filtersManager.removeFilter(!0,x.topics,e.toLowerCase()),t&&o.filtersManager.addFilter(!0,x.topics,t.toLowerCase())}var o=this;if(void 0!=o.sources.reviews){o.filtersManager=new e.FiltersStateManager(o._controller,"Main",o.sources.reviews.settings),o.filtersManager.subscribeToFiltersUpdate(o),o.mobileFiltersModal=new e.MobileFilterModal(this);var r=o.getElement().querySelector(".suggested-topics");if(r){var s=r.querySelectorAll(".suggested-topics-desktop-layout, .suggested-topics-mobile-layout");e.SuggestedTopics.bind(s,t)}for(var l=o.getElement().querySelectorAll(".desktop-clear-all-btn, .mobile-clear-filters-btn"),c=0;c<l.length;c++)e.addEventListener(l[c],"click",function(){a.call(o)});e.FreeTextSearch.bind.call(this,T,i,n)}}function i(e){this.previousTextSearched&&(this.switchSearchInProgressView(!0),this.filtersManager.removeFilter(!0,x.free_text_search,this.previousTextSearched)),e?(this.switchSearchInProgressView(!0),this.filtersManager.addFilter(!0,x.free_text_search,e),this.previousTextSearched=e):this.previousTextSearched=null}function n(){this.previousTextSearched&&(this.switchSearchInProgressView(!0),this.filtersManager.removeFilter(!0,x.free_text_search,this.previousTextSearched),this.previousTextSearched=null)}function r(t,o,i){this.switchSearchInProgressView(!0);var n=e.DropDownFilterHandler.parseChosenFilter(t,i),r=e.DropDownFilterHandler.parseChosenFilter(t,o);e.DropDownFilterHandler.unmarkAnswer(i),this.filtersManager.removeFilter(!0,n.type,n.value),r.is_default_answer?(e.DropDownFilterHandler.resetDropDownButtonValue(t),e.DropDownFilterHandler.markTextualAnswer(o)):(this.filtersManager.addFilter(!0,r.type,r.value),r.type===x.scores?(e.DropDownFilterHandler.markStarsAnswer(o),e.DropDownFilterHandler.setDropDownButtonStars(t,o)):e.DropDownFilterHandler.markTextualAnswer(o))}function s(t,o,i){if(this.switchSearchInProgressView(!0),i){e.DropDownFilterHandler.unmarkAnswer(i);var n=e.DropDownFilterHandler.parseChosenFilter(t,i);this.filtersManager.removeFilter(!0,n.type,n.value)}var r=e.DropDownFilterHandler.parseChosenFilter(t,o);r.is_default_answer||(this.filtersManager.addFilter(!0,r.type,r.value),e.DropDownFilterHandler.markTextualAnswer(o))}function a(){this.switchSearchInProgressView(!0),this.filtersManager.clearAllFilters(),e.DropDownFilterHandler.resetAllDropDowns.call(this);var t=this.getElement().querySelector(".suggested-topics"),o=t.querySelectorAll(".active-topic");e.SuggestedTopics.resetSelectedTopic(o),e.FreeTextSearch.clearSearchedText.call(this),this.previousTextSearched=null}function l(){var t=this,o=t.getElement().getElementsByClassName("yotpo-searchable-widget");if(o&&o[0]){var i=o[0],n=i.getElementsByClassName("search-input")[0],r=i.getElementsByClassName("suggested-topic-expand"),s=i.getElementsByClassName("clear-topic")[0];t.searchLoader=i.getElementsByClassName("yotpo-search-loader")[0],t.searchRelatedTopics=i.getElementsByClassName("yotpo-related-topics-container")[0],t.suggestedTopicElements=i.getElementsByClassName("suggested-topic");for(var a=0;a<t.suggestedTopicElements.length;a++)e.addEventListener(t.suggestedTopicElements[a],"click",function(){for(var o=0;o<t.suggestedTopicElements.length;o++)e.removeClass(t.suggestedTopicElements[o],"active-topic");e.addClass(this,"active-topic"),e.removeClass(s,"yotpo-hidden"),e.addClass(t.searchRelatedTopics,"yotpo-hidden"),n.value=this.getElementsByClassName("suggested-topic-text")[0].innerHTML,t.query=n.value;var i="clicked_on";c.call(t,i)});if(r&&r[0]){var l=r[0];e.addEventListener(l,"click",function(){for(var o=0;o<t.suggestedTopicElements.length;o++)e.removeClass(t.suggestedTopicElements[o],"yotpo-hidden");e.addClass(this,"yotpo-hidden")})}s&&e.addEventListener(s,"click",function(){n.value="",e.addClass(this,"yotpo-hidden"),t.query=n.value;for(var o=0;o<t.suggestedTopicElements.length;o++)e.removeClass(t.suggestedTopicElements[o],"active-topic");e.addClass(t.searchRelatedTopics,"yotpo-hidden"),c.call(t)}),n&&e.addEventListener(n,"keydown",function(o){var i=o.which||o.keyCode;if(e.removeClass(s,"yotpo-hidden"),(""==n.value||1==n.value.length&&(8===i||46===i))&&e.addClass(s,"yotpo-hidden"),13===i){t.query=n.value,e.addClass(t.searchRelatedTopics,"yotpo-hidden");for(var r=0;r<t.suggestedTopicElements.length;r++)e.removeClass(t.suggestedTopicElements[r],"active-topic");var a="searched";c.call(t,a)}});var d="true"===i.getAttribute("data-met-requirements"),u=!d||"true"===i.getAttribute("data-is-dummy");e.currentAnalytics.trackEvent("searchable_widget",u?"loaded_dummy":"loaded",null,t.query,{tags_count:t.suggestedTopicElements.length,requirements_met:d}),e.currentInview.register(i,function(){e.currentAnalytics.trackEvent("searchable_widget",u?"shown_dummy":"shown",null,t.query,{tags_count:t.suggestedTopicElements.length,requirements_met:d})})}}function c(t){var o=this,i={};i.params=o.sources.reviews.getSettings(),""==o.query?(o.sources.reviews.query_mode=!1,i.method="reviews"):(o.sources.reviews.query_mode=!0,i.method="queried_reviews",i.params.query=o.query),e.removeClass(o.searchLoader,"yotpo-hidden"),o.sources.reviews.settings.page=1,i.params.page=o.sources.reviews.settings.page,i.params.query_mode=o.sources.reviews.query_mode,o._controller.getBatch(function(i){var n=[];try{n=JSON.parse(i),n=n.shift().result;var r=new DOMParser,s=r.parseFromString(n,"text/html"),a=s.querySelector(".total-reviews-search").getAttribute("total-reviews-search");"undefined"!=typeof o.sources.reviews.getElement()&&(o.sources.reviews.getElement().innerHTML=n,o.tabs.element.getElementsByClassName("nav-tab-sum")[0].innerHTML=" ("+a+")"),"function"==typeof o.sources.reviews.trigger&&(o.sources.reviews.trigger("refreshed"),o.sources.reviews.trigger("ready")),""!=o.query&&e.currentAnalytics.trackEvent("searchable_widget",t,null,o.query,{results_count:a}),d.call(o,s),e.addClass(o.searchLoader,"yotpo-hidden"),e.removeClass(o.searchRelatedTopics,"yotpo-hidden")}catch(l){e.safeConsole(l.message)}},[i])}function d(e){for(var t=[],o=e.querySelectorAll(".yotpo-data-related-topic"),i=0;i<o.length;i++)t[i]=o[i].dataset.topic;if(t=t.slice(0,5),this.searchRelatedTopics.textContent="",0!=t.length){var n=document.createElement("span");n.setAttribute("class","yotpo-related-topics-label"),n.textContent="Also showing result for ",this.searchRelatedTopics.appendChild(n);var r,s;for(i=0;i<t.length;i++)r=document.createElement("span"),r.setAttribute("class","yotpo-related-topic"),r.textContent=t[i],this.searchRelatedTopics.appendChild(r),s=document.createElement("span"),s.setAttribute("class","yotpo-related-topic-separator"),i<t.length-2?(s.textContent=", ",this.searchRelatedTopics.appendChild(s)):i==t.length-2&&(s.textContent=" and ",this.searchRelatedTopics.appendChild(s))}}function u(){var t=this,o={reviews:t.analyticsCategory,questions:"questions"==t.get("settings").mode?"questions_widget":"questions"};e.forEach(["yotpo-reviews","yotpo-questions"],function(i){var n=t.getElement().getElementsByClassName(i)[0];if("undefined"!=typeof n){i=i.split("-")[1],t.sources[i]=new e.Widgets.Basic(t._controller,n,i,t.settings.page),t.sources[i].settings.pid=t.settings.pid,t.settings.demo&&(t.sources[i].settings.demo=t.settings.demo),e.forEach(["locale","mode"],function(e){t.settings[e]&&(t.sources[i].settings[e]=t.settings[e])}),t.sources[i].on("ready",function(){C.call(t)}),t.sources[i].trigger("ready");var r=A(t.sources[i].content)?"has_reviews":"no_reviews";e.currentAnalytics.trackUniqueEvent(o[i],"loaded",r,t._controller.getUserSetting("version")),t.sources[i].on("pageChanged",function(){t.sources[i].is_filtered_reviews&&(t.switchSearchInProgressView(!0),t.filtersManager.fetchPage(t.sources[i].settings.page)),setTimeout(function(){e.scrollToTop((t.get("tabs")||t.sources[i]).getElement())},300)})}})}function p(){var t=this,o=t.getElement().getElementsByClassName("promoted-products-box")[0];"undefined"!=typeof o&&(t.promotedProducts=new e.Widgets.PromotedProducts(t._controller,o),t.promotedProducts.trigger("ready"))}function g(){var t=this,o=t.getElement().getElementsByClassName("yotpo-nav-primary")[0];o&&(t.tabs=new e.Tabs(o),t.tabs.on("changed",function(e){h.call(t,e)}))}function h(t){var o=this,i=o.getActiveSource();i.getElement().innerHTML.trim()||i.refresh();for(var n in o.forms)n!=i.getType()&&o.forms[n].clean();(0!=t.event.clientX||0!=t.event.clientY)&&e.currentAnalytics.trackEvent(i.getType(),"clicked_on","tab")}function m(){var t=this.getElement().getElementsByClassName("yotpo-messages");t.length>0&&(this.messages=new e.Messages(t))}function f(){for(var t,o=this,i=o.element.querySelectorAll(".yotpo-thank-you .social-link"),n=0;t=i[n];n++)e.addEventListener(t,"click",function(){var t=this.getAttribute("data-network");e.currentAnalytics.trackEvent(o.analyticsCategory,"clicked_on","share_"+t)});for(var r,s=o.element.querySelectorAll(".yotpo-thank-you .yotpo-icon-cross"),n=0;r=s[n];n++)e.addEventListener(r,"click",function(){e.currentAnalytics.trackEvent(o.analyticsCategory,"clicked_on","close_review_posted")})}function y(){var e=this._controller,t=e.getUserSetting("ads"),o=e.getUserSetting("facebook_ads");t&&o&&"0"!=o.settings.pixel_id&&"0"!=o.settings.init_pixel&&this.settings.pid&&fbq("track","ViewContent",{content_ids:[this.settings.pid],content_type:"product"})}function v(){var t=this.getElement().querySelector(".yotpo-bottomline");t&&(e.Modules.Handle.tooltip.call(t),this.bottomline=new e.Widgets.Bottomline(this,t),this.bottomline.trigger("ready"))}function w(){var t=this.getElement().querySelector(".questions");t&&(this.questionsBottomline=new e.Widgets.QuestionsBottomline(this._controller,t),this.questionsBottomline.trigger("ready"))}function b(){window.setInterval(function(){e.currentInview.verifyInview()},1e3)}function _(){var t=this,o="questions"==t.get("settings").mode?"questions_widget":t.analyticsCategory;e.currentInview.register(t.element,function(){e.currentAnalytics.trackEvent(o,"shown"),t.trigger("sizeCalculated")})}function S(){var e=this,t=e.getElement().querySelector(".yotpo-nav .status-bar .current");if(t){var o=e.getActiveSource(),i=o.getElement().querySelector(".yotpo-pager"),n=i?+i.getAttribute("data-per-page"):P;o.on("ready",function(){var e=+(o.settings.page||1),i=(e-1)*n+1,r=i-1+o.getContent().length;o.getTemplate()&&--r,t.innerHTML=i+" - "+r})}}function C(){for(var t=this,o=t.getElement().getElementsByClassName("yotpo-review"),i=0;i<o.length;i++){var n=o[i];e.currentAnalytics.trackReview(n,"reviews","loaded"),e.hoverAnalytics.register(n,function(){e.currentAnalytics.trackReview(this,"reviews","hovered")}),e.currentInview.register(n,function(o){return function(){E(t)?e.currentAnalytics.trackReview(o,"reviews","shown",{source:"shoppers_say"}):t.query?e.currentAnalytics.trackReview(o,"reviews","shown",{source:"searchable_widget"}):e.currentAnalytics.trackReview(o,"reviews","shown")}}(n))}}function E(e){var t=k(e,"yotpo-shoppers-say");return t?t.moreReviewsClicked:!1}function k(e,t){for(var o=e._controller.widgets,i=0;i<o.length;i++)if(o[i].element.classList.contains(t))return o[i];return null}function A(e){return e&&e.length>1}var x,I,T,P=10,q={};return t.selector=e.widgets.main.selector,t.prototype.getMethod=function(){return"main_widget"},t.prototype.getSettings=function(){return this.settings},t.prototype.getElement=function(){return this.element},t.prototype.getSource=function(e){return this.sources[e]},t.prototype.getActiveSource=function(){return this.get("tabs")?this.sources[this.get("tabs").getActive().getAttribute("data-type")]:null},t.prototype.getAppKey=function(){return this._controller.getAppKey()},t.prototype.get=function(e){return this[e]},t.prototype.getProductInfo=function(){if("undefined"==typeof this.productInfo){this.productInfo={sku:this.get("settings").pid,product_title:this.getElement().getAttribute("data-name"),product_description:this.getElement().getAttribute("data-description"),product_url:this.getElement().getAttribute("data-url"),product_image_url:this.getElement().getAttribute("data-image-url"),product_specs:this.getProductSpecs()};var e=this.get("settings").demo;"undefined"!=typeof e&&(this.productInfo.demo=e);for(var t in this.productInfo)this.productInfo.hasOwnProperty(t)&&!this.productInfo[t]&&delete this.productInfo[t]}return this.productInfo},t.prototype.on=function(t,o){e.Modules.Event.on.call(this,t,o)},t.prototype.trigger=function(t,o){e.Modules.Event.trigger.call(this,t,o)},t.prototype.state=function(t){return e.Modules.Helper.state.call(this,t)},t.prototype.is=function(t){return e.Modules.Helper.is.call(this,t)},t.prototype.isWriteOnly=function(){return"undefined"!=typeof(this.getSettings()||{})["write-only"]},t.prototype.getLayout=function(){return"old"},t.prototype.getProductSpecs=function(){var e,t=this,o=["brand","isbn","mpn","upc"],i={};for(var n in o)e=o[n],t.element.getAttribute("data-product-spec-"+e)&&(i["product_specs["+e+"]"]=t.element.getAttribute("data-product-spec-"+e));var r=[];for(var s in i)r.push(s);return r.length>0?i:null},q={ready:function(){x=e.filterAndSearch.filters_state_manager.aggregators_types,I=e.filterAndSearch.filters_drop_down_default_answer,T=e.filterAndSearch.free_text_search_input_placeholder,e.DropDownFilterHandler.init(),u.call(this),g.call(this),m.call(this),p.call(this),v.call(this),w.call(this),b.call(this),S.call(this),l.call(this),e.Modules.Handle.write.call(this,"review"),e.Modules.Handle.write.call(this,"question"),e.Modules.Handle.sources.call(this),this._controller.userSettings.new_main_widget_layout?(o.call(this),e.Modules.Handle.desktopDropDown.call(this,s,"sorting"),e.Modules.Handle.desktopDropDown.call(this,r,"filters-dropdown")):e.Modules.Handle.select.call(this),e.Modules.Handle.mobileMenu.call(this),e.Modules.Handle.semiWhiteLabel.call(this),f.call(this),y.call(this)},resize:function(){this.promotedProducts&&this.promotedProducts.trigger("resize")},sizeCalculated:function(e){this.promotedProducts&&this.promotedProducts.trigger("sizeCalculated",{className:e})}},t.prototype.switchSearchInProgressView=function(t){var o=this.element;e.SearchInProgress.switchMode(o,t)},t.prototype.OnSubmittedFiltersChange=function(t){try{if("undefined"!=typeof this.sources.reviews.getElement()){this.sources.reviews.is_filtered_reviews=!0,this.sources.reviews.getElement().innerHTML=t;var o=this.element.querySelector(".reviews-header");if(o){var i=new DOMParser,n=i.parseFromString(t,"text/html"),r=n.querySelector(".total-reviews-search").getAttribute("total-reviews-search");o.querySelector(".reviews-amount").innerHTML=r+" "+e.filterAndSearch.filtered_reviews_title}var s=this.sources.reviews.getElement().querySelector(".empty-search-results-clear-all-btn");if(s){var l=this;e.addEventListener(s,"click",function(){a.call(l)})}"function"==typeof this.sources.reviews.trigger&&(this.sources.reviews.trigger("refreshed"),this.sources.reviews.trigger("ready")),this.switchSearchInProgressView(!1)}}catch(c){e.safeConsole(c.message)}},t}(Yotpo),Yotpo.Widgets=Yotpo.Widgets||{},Yotpo.Widgets.PicturesCollage=function(e){function t(t,o){var i=this;i._controller=t,i.element=o,i.analyticsContext={layout:"collage"};var n=o.getAttribute("data-source");i.analyticsContext.source=n||"none",this.imagesHandler=new e.ImagesHandler(t.appKey,this),i.settings={demo:o.getAttribute("data-demo"),album_name:w,widget_name:"pictures-collage"};var r=new e.Modules.GallerySettings,s=r.getGallerySettings(o);Object.assign(i.settings,s),r.overrideSettingsFromDiv(i.element,i.settings),i.analyticsCategory=i.settings.is_product?"pictures_widget":"dedicated_page";for(var a in v)v.hasOwnProperty(a)&&i.on(a,v[a]);e.hoverAnalytics.register(i.element,function(){e.currentAnalytics.trackUniqueEvent(i.analyticsCategory,"hovered")})}function o(){this.wrapper=this.element.querySelector(".yotpo-pictures-collage-wrapper"),e.setHoverEnable(this.wrapper),this.container=this.element.querySelector(".yotpo-pictures-gallery-images-wrapper"),this.isLoadMoreButton=1===this.settings.layout_settings.load_more_button,i.call(this),h.call(this),this.analyticsTracker=new e.AnalyticsTracker(this.analyticsCategory,this.analyticsContext),this.imagesAnalyticsHandler=new e.ImagesAnalyticsHandler(this.element,this.imageContainers,this.analyticsTracker),this.brokenImageDescriptors=[],c.call(this),this.imagesHandler.loadImages(r,s),e.Modules.Event.on("popupClosed",function(){this.endlessScroller&&this.endlessScroller.ignoreLoader(!1)}.bind(this)),e.Flows.UploadButton.initUploadButton(this._controller,this.element,this.settings,this.analyticsCategory)}function i(){this.isLoadMoreButton?(this.loader=this.element.querySelector(".yotpo-load-more-button"),this.loadIndicator=this.element.querySelector(".yotpo-image-loader.yotpo-pictures-gallery-fullpage-loader")):this.loader=this.element.querySelector(".yotpo-image-loader.yotpo-pictures-gallery-fullpage-loader")}function n(e){e.imagesHandler.reportInvalidImages(e.brokenImageDescriptors)}function r(t){"endless_scroll"===t.settings.load_more&&f.call(t)&&(t.endlessScroller=m.call(t),e.removeClass(t.loader,"yotpo-hidden")),n(t),t.imagesHandler.replaceBrokenImages(t.brokenImageDescriptors),y.call(t),t.analyticsTracker.track("loaded")}function s(e,t){var o={id:t,source:e.imagesHandler.getImageSource(t),reported:!1};e.brokenImageDescriptors.push(o),h.call(e)}function a(){for(var t=[],o=0;o<this.imageContainers.length;++o)if(!e.hasClass(this.imageContainers[o],"yotpo-hidden")){var i=this.imageContainers[o].querySelector(".y-image-overlay");t.push(i)}return t}function l(){return this.imageContainers.length}function c(){if(this.settings.load_lightbox_sync){var e=this.element.querySelector(".yotpo-lightbox-contents");this.initLightbox(e)}else{var t={method:"generic_lightbox_container",params:this.getSettings()};this._controller.getBatch(d.bind(this),[t],null)}}function d(e){var t=JSON.parse(e)[0];if(t){this.element.insertAdjacentHTML("afterbegin",t.result);var o=this.element.querySelector(".yotpo-lightbox-contents");this.initLightbox(o)}}function u(t){this.lightbox&&this.lightbox.isOpen?e.Modules.Event.on("lightboxClosed",function(){e.Modules.Event.removeEvent("lightboxClosed"),p.call(this,t)}.bind(this)):p.call(this,t)}function p(t){var o=this.element.querySelector(".y-slider-container"),i=JSON.parse(t)[0].result,r=document.createElement("div");r.insertAdjacentHTML("beforeend",i);var a=r.querySelector(".yotpo-pictures-gallery-images-wrapper"),l=r.querySelector(".yotpo-lightbox-contents"),c=r.querySelector(".y-slider-container"),d=(a.querySelectorAll(".yotpo-single-image-container").length,this.element.querySelector(".yotpo-lightbox-contents"));e.appendChildElements(a,this.container),e.appendChildElements(c,o),e.appendChildElements(l,d),h.call(this),this.imagesHandler.loadImages(n,s),this.initLightbox(d),f.call(this)||e.addClass(this.loader,"yotpo-hidden")}function g(){var e={method:"partial_pictures_collage",params:this.settings};this.endlessScroller&&this.endlessScroller.getNextPage(e,u.bind(this))}function h(){this.imageContainers=this.container.querySelectorAll(".yotpo-single-image-container")}function m(){return this.isLoadMoreButton?new e.Modules.ButtonEndlessScroll(this.settings.per_page,this._controller,this.loader,g.bind(this),this.loadIndicator):new e.Modules.InviewEndlessScroll(this.settings.per_page,this._controller,this.loader,g.bind(this))}function f(){var e=l.call(this),t=this.settings.total_number_of_images-e,o=t/this.settings.images_per_row;return o>=1}function y(){this.imagesAnalyticsHandler.bindBaseImagesAnalytics()}var v={},w="UGC Gallery";return t.prototype.getMethod=function(){return"PicturesCollage"},t.prototype.getSettings=function(){return this.settings},t.prototype.getElement=function(){return this.element},t.prototype.on=function(t,o){e.Modules.Event.on.call(this,t,o)},t.prototype.trigger=function(t,o){e.Modules.Event.trigger.call(this,t,o)},t.prototype.state=function(t){return e.Modules.Helper.state.call(this,t)},t.prototype.is=function(t){return e.Modules.Helper.is.call(this,t)},t.prototype.getLayout=function(){return"new"},t.prototype.getActiveSource=function(){return this},t.prototype.refresh=function(){var t=document.getElementsByClassName("yotpo-pictures-gallery-wrapper");t[0].style.opacity=.3,e.Modules.Refresh.perform.call(this)},t.prototype.getImageElements=function(){return this.imageContainers},t.prototype.initLightbox=function(t){var o=this;this.lightboxWrapper=this.element.querySelector(".yotpo-lightbox-wrapper");var i=this.lightboxWrapper.querySelector(".yotpo-lightbox");if(i)for(var n=0;n<o.imageContainers.length;++n){var r=o.imageContainers[n].querySelector(".y-image-overlay.yotpo-new-image");if(r){e.removeClass(r,"yotpo-new-image");var s=o.imageContainers[n].querySelector(".y-image-wrapper");e.addEventListener(s,"click",function(){var i=a.call(o),n=new e.SliderContentProvider(i,t,!0),r=new e.AnalyticsTracker(o.analyticsCategory+"_popup",o.analyticsContext),s=o.lightboxWrapper.cloneNode(!0);o.lightbox=new e.Widgets.Lightbox(o._controller,s.querySelector(".yotpo-lightbox"),n,r,s),o.lightbox.open(this.querySelector(".y-image-overlay"),!0),this.endlessScroller&&o.endlessScroller.ignoreLoader(!0)}),e.hoverAnalytics.register(r,function(){e.currentAnalytics.trackUniqueEvent(o.analyticsCategory,"hovered","image",this.getAttribute("data-image-id"))})}}},v={ready:function(){o.call(this),e.Modules.Handle.select.call(this)},refreshed:function(){this.sizeClass&&adjustImages.call(this,this.sizeClass)}},t}(Yotpo),Yotpo.Widgets=Yotpo.Widgets||{},Yotpo.Widgets.PicturesGallery=function(e){function t(t,o){var i,n,r=this;r._controller=t,r.element=o,r.analyticsContext={layout:"grid"};var s=o.getAttribute("data-source");r.analyticsContext.source=s||"none",this.imagesHandler=new e.ImagesHandler(t.appKey,this);var a=t.getUserSetting("review_with_pictures"),l=t.getUserSetting("instagram_curation"),c=r.element.getAttribute("data-product-id")||r.element.getAttribute("product-id");r.settings={demo:o.getAttribute("data-demo"),album_name:I},c?(n="gallery",i=t.getUserSetting("product_gallery"),r.settings.product_id=c,r.analyticsCategory="pictures_widget",r.settings.css_settings_class="yotpo-product-gallery",r.settings.widget_ref_name="product_gallery_shop_now",r.settings.cta="0",r.analyticsContext.album_type="product"):(n="dedicated_page",i=t.getUserSetting("pictures_dedicated_page"),r.analyticsCategory="dedicated_page",r.settings.css_settings_class="yotpo-pictures-gallery",r.settings.widget_ref_name="picture_gallery_shop_now",r.analyticsContext.album_type="custom"),i&&(r.settings.widget_name="pictures-gallery",r.settings.cta=i.settings[n+"_cta"],r.settings.cta_color=i.settings[n+"_cta_color"],r.settings.cta_text=i.settings[n+"_cta_text"],r.settings.hover=i.settings[n+"_hover"],r.settings.title=i.settings[n+"_title"],r.settings.spacing=i.settings[n+"_spacing"],r.settings.layout_settings=i.settings[n+"_layout"],r.settings.source=i.settings[n+"_source"],r.settings.sort=r.settings.sort_setting=i.settings.sort,r.settings.sorting_enabled="1"===String(i.settings[n+"_sorting"]));var d=new e.Modules.GallerySettings;d.overrideSettingsFromDiv(r.element,r.settings),r.analyticsContext.widget_class=d.getWidgetClass(r.element),r.analyticsContext.album_id=r.settings.album_id||"none",r.settings.sorting_enabled=!o.hasAttribute("data-source")&&r.settings.sorting_enabled&&r.settings.source.length>1&&a&&l,r.settings.per_page=r.settings.layout_settings.mode===A?E*k:r.settings.layout_settings.rows*E;for(var u in S)S.hasOwnProperty(u)&&r.on(u,S[u]);e.hoverAnalytics.register(r.element,function(){e.currentAnalytics.trackUniqueEvent(r.analyticsCategory,"hovered")})}function o(){this.wrapper=this.element.querySelector(".yotpo-pictures-gallery-wrapper"),this.uploadPhotosButton=this.element.querySelector(".yotpo-pictures-gallery-upload-button"),e.setHoverEnable(this.wrapper),this.container=this.element.querySelector(".yotpo-pictures-gallery-images-wrapper"),this.isLoadMoreButton=1===this.settings.layout_settings.load_more_button,i.call(this),v.call(this),this.analyticsTracker=new e.AnalyticsTracker(this.analyticsCategory,this.analyticsContext),this.imagesAnalyticsHandler=new e.ImagesAnalyticsHandler(this.element,this.imageContainers,this.analyticsTracker),this.brokenImageDescriptors=[],c.call(this),this.imagesHandler.loadImages(r,s),e.Modules.Event.on("popupClosed",function(){this.endlessScroller&&this.endlessScroller.ignoreLoader(!1)}.bind(this)),e.Flows.UploadButton.initUploadButton(this._controller,this.element,this.settings,this.analyticsCategory)}function i(){this.isLoadMoreButton?(this.loader=this.element.querySelector(".yotpo-load-more-button"),this.loadIndicator=this.element.querySelector(".yotpo-image-loader.yotpo-pictures-gallery-fullpage-loader")):this.loader=this.element.querySelector(".yotpo-image-loader.yotpo-pictures-gallery-fullpage-loader")}function n(e){e.imagesHandler.reportInvalidImages(e.brokenImageDescriptors)}function r(t){t.settings.layout_settings.mode===A&&l.call(t)===t.settings.per_page&&(t.endlessScroller=b.call(t),e.removeClass(t.loader,"yotpo-hidden")),n(t),_.call(t),t.analyticsTracker.track("loaded")}function s(e,t){var o={id:t,source:e.imagesHandler.getImageSource(t),reported:!1};e.brokenImageDescriptors.push(o),e.imagesHandler.removeBrokenImages([t]),v.call(e)}function a(){for(var t=[],o=0;o<this.imageContainers.length;++o)if(!e.hasClass(this.imageContainers[o],"yotpo-hidden")){var i=this.imageContainers[o].querySelector(".y-image-overlay");t.push(i)}return t}function l(){return this.imageContainers.length+this.brokenImageDescriptors.length}function c(){if(this.settings.load_lightbox_sync){var e=this.element.querySelector(".yotpo-lightbox-contents");this.initLightbox(e)}else{var t={method:"lightbox_container",params:this.getSettings()};this._controller.getBatch(d.bind(this),[t],null)}}function d(e){var t=JSON.parse(e)[0];if(t){this.element.insertAdjacentHTML("afterbegin",t.result);var o=this.element.querySelector(".yotpo-lightbox-contents");this.initLightbox(o)}}function u(t){this.lightbox&&this.lightbox.isOpen?e.Modules.Event.on("lightboxClosed",function(){e.Modules.Event.removeEvent("lightboxClosed"),p.call(this,t)}.bind(this)):p.call(this,t)}function p(t){var o=this.element.querySelector(".y-slider-container"),i=JSON.parse(t)[0].result,r=document.createElement("div");r.insertAdjacentHTML("beforeend",i);var a=r.querySelector(".yotpo-pictures-gallery-images-wrapper"),l=r.querySelector(".yotpo-lightbox-contents"),c=r.querySelector(".y-slider-container"),d=a.childElementCount,u=this.element.querySelector(".yotpo-lightbox-contents");e.appendChildElements(a,this.container),e.appendChildElements(c,o),e.appendChildElements(l,u),v.call(this),this.imagesHandler.loadImages(n,s),this.initLightbox(u),d<this.settings.per_page&&e.addClass(this.loader,"yotpo-hidden")}function g(){var e=this.getElement().getElementsByClassName("selected")[0],t=h.call(this);e&&this.settings.sorting_enabled&&(t.sorting_enabled=!0,t.sort=e.getAttribute("data-selected-key")),t.offset=m.call(this);var o={method:"partial_pictures_gallery",params:t};this.endlessScroller&&this.endlessScroller.getNextPage(o,u.bind(this))}function h(){return{hover:this.settings.hover,cta:this.settings.cta,cta_text:this.settings.cta_text,cta_color:this.settings.cta_color,source:this.settings.source,product_id:this.settings.product_id,album_id:this.settings.album_id,album_name:I,widget_ref_name:this.settings.widget_ref_name,sort:this.settings.sort}}function m(){var e=f.call(this),t=y.call(this);return{review:e.review+t.review,instagram:e.instagram+t.instagram,onsite_upload:e.onsite_upload+t.onsite_upload,"import":e["import"]+t["import"]}}function f(){for(var e={review:0,instagram:0,onsite_upload:0,"import":0},t=0;t<this.brokenImageDescriptors.length;t++)e[this.brokenImageDescriptors[t].source]++;return e}function y(){for(var e={review:0,instagram:0,onsite_upload:0,"import":0},t=0;t<this.imageContainers.length;++t){var o=this.imageContainers[t].querySelector(".y-image-overlay");
o&&(source=o.getAttribute("data-source"),e[source]++)}return e}function v(){this.imageContainers=this.container.querySelectorAll(".yotpo-single-image-container")}function w(t){if(this.settings.layout_settings.mode===x){var o=this.element.querySelectorAll(".yotpo-single-image-container"),i=this.element.querySelectorAll(".yotpo-single-image-container.yotpo-hidden"),n=o.length,r=this.settings.layout_settings.rows*C[t],s=n-i.length,a=s>r,l=!a&&n>s;if(a)for(var c=r;s>c;c++)e.addClass(o[c],"yotpo-hidden");else if(l)for(var c=s;r>c&&n>c;c++)e.removeClass(o[c],"yotpo-hidden")}}function b(){return this.isLoadMoreButton?new e.Modules.ButtonEndlessScroll(this.settings.per_page,this._controller,this.loader,g.bind(this),this.loadIndicator):new e.Modules.InviewEndlessScroll(this.settings.per_page,this._controller,this.loader,g.bind(this))}function _(){this.imagesAnalyticsHandler.bindBaseImagesAnalytics()}var S={},C={"yotpo-size-7":7,"yotpo-size-6":6,"yotpo-size-5":5,"yotpo-size-4":4,"yotpo-size-3":3,"yotpo-size-2":3,"yotpo-size-1":3},E=7,k=8,A="full_page",x="num_of_rows",I="UGC Gallery";return t.selector=e.widgets["pictures-gallery"].selector,t.prototype.getMethod=function(){return"PicturesGallery"},t.prototype.getSettings=function(){return this.settings},t.prototype.getElement=function(){return this.element},t.prototype.on=function(t,o){e.Modules.Event.on.call(this,t,o)},t.prototype.trigger=function(t,o){e.Modules.Event.trigger.call(this,t,o)},t.prototype.state=function(t){return e.Modules.Helper.state.call(this,t)},t.prototype.is=function(t){return e.Modules.Helper.is.call(this,t)},t.prototype.getLayout=function(){return"new"},t.prototype.getActiveSource=function(){return this},t.prototype.refresh=function(){var t=document.getElementsByClassName("yotpo-pictures-gallery-wrapper");t[0].style.opacity=.3,e.Modules.Refresh.perform.call(this)},t.prototype.getImageElements=function(){return this.imageContainers},t.prototype.initLightbox=function(t){var o=this;this.lightboxWrapper=this.element.querySelector(".yotpo-lightbox-wrapper");var i=this.lightboxWrapper.querySelector(".yotpo-lightbox");if(i)for(var n=0;n<o.imageContainers.length;++n){var r=o.imageContainers[n].querySelector(".y-image-overlay.yotpo-new-image");if(r){e.removeClass(r,"yotpo-new-image");var s=o.imageContainers[n].querySelector(".y-image-wrapper");e.addEventListener(s,"click",function(){var i=a.call(o),n=new e.SliderContentProvider(i,t,!0),r=new e.AnalyticsTracker(o.analyticsCategory+"_popup",o.analyticsContext),s=o.lightboxWrapper.cloneNode(!0);o.lightbox=new e.Widgets.Lightbox(o._controller,s.querySelector(".yotpo-lightbox"),n,r,s),o.lightbox.open(this.querySelector(".y-image-overlay"),!0),this.endlessScroller&&o.endlessScroller.ignoreLoader(!0)}),e.hoverAnalytics.register(r,function(){e.currentAnalytics.trackUniqueEvent(o.analyticsCategory,"hovered","image",this.getAttribute("data-image-id"))})}}},S={ready:function(){o.call(this),e.Modules.Handle.select.call(this)},sizeCalculated:function(e){this.sizeClass=e,w.call(this,e)},refreshed:function(){this.sizeClass&&w.call(this,this.sizeClass)}},t}(Yotpo),Yotpo.Widgets=Yotpo.Widgets||{},Yotpo.Widgets.GenericGallery=function(e){function t(e,t){var o=this;this.element=t,this.controller=e,this.settings={gid:t.dataset.galleryId,layout_structure:i(t.offsetWidth),page:1};for(var r in n)n.hasOwnProperty(r)&&o.on(r,n[r])}function o(){var e=this.element.querySelector(".yotpo-display-wrapper"),t=s[e.dataset.layout].constructWidget(this.controller,this.element);Object.assign(t.getSettings(),this.settings),t.trigger("ready")}function i(e){return 375>e?r.small:e>375&&1280>=e?r.medium:r.large}var n={},r=Object.freeze({small:"small",medium:"medium",large:"large"}),s={carousel:{constructWidget:function(t,o){return new e.Widgets.Slider(t,o)}},grid:{constructWidget:function(t,o){return new e.Widgets.PicturesGallery(t,o)}},collage:{constructWidget:function(t,o){return new e.Widgets.PicturesCollage(t,o)}}};return n={ready:function(){o.call(this),e.Modules.Handle.select.call(this)}},t.prototype.getLayout=function(){return"new"},t.prototype.is=function(t){return e.Modules.Helper.is.call(this,t)},t.prototype.on=function(t,o){e.Modules.Event.on.call(this,t,o)},t.prototype.trigger=function(t,o){e.Modules.Event.trigger.call(this,t,o)},t.prototype.getElement=function(){return this.element},t.prototype.state=function(t){return e.Modules.Helper.state.call(this,t)},t.prototype.getMethod=function(){return"GenericGallery"},t.prototype.getSettings=function(){return this.settings},t}(Yotpo),Yotpo.Widgets.PicturesWidget=function(e){function t(e,t){var i;return i=e.userSettings&&e.userSettings.generic_gallery?t.getAttribute("data-layout")||"generic":t.getAttribute("data-layout"),o[i].constructWidget(e,t)}var o={carousel:{constructWidget:function(t,o){return new e.Widgets.Slider(t,o)}},full_page:{constructWidget:function(t,o){return new e.Widgets.PicturesGallery(t,o)}},num_of_rows:{constructWidget:function(t,o){return new e.Widgets.PicturesGallery(t,o)}},collage:{constructWidget:function(t,o){return new e.Widgets.PicturesCollage(t,o)}},generic:{constructWidget:function(t,o){return new e.Widgets.GenericGallery(t,o)}}};return t.selector=e.widgets["pictures-widget"].selector,t}(Yotpo),Yotpo.Widgets=Yotpo.Widgets||{},Yotpo.Widgets.PromotedProducts=function(e){function t(t,o){var n=this;n.analyticsCategory="promoted_products",n._controller=t,n.element=o,n.settings={promoted:!0},n.currentItem=0,n.totalItems=o.getElementsByTagName("li").length,n.scrollBase=o.getElementsByClassName("promoted-products")[0].scrollLeft,n.css_preview=t.userSettings.css_preview,e.supportTouch()&&(e.hide(o.getElementsByClassName("yotpo-pager")[0]),delete i.pageChanged,o.getElementsByClassName("promoted-products")[0].style.overflowX="auto");for(var r in i)i.hasOwnProperty(r)&&n.on(r,i[r])}function o(){var t=this;e.currentAnalytics.trackUniqueEvent("promoted_products","loaded"),e.currentInview.register(t.element,function(){e.currentAnalytics.trackUniqueEvent("promoted_products","shown")}),e.hoverAnalytics.register(t.element,function(){e.currentAnalytics.trackUniqueEvent("promoted_products","hovered")});for(var o=t.getElement().getElementsByClassName("yotpo-promoted-product"),i=0;i<o.length;++i){var n=o[i],r=(n.getAttribute("data-type"),n.getAttribute("data-product-id")),s=(n.getAttribute("data-position"),function(t,o){return function(){e.currentAnalytics.trackUniqueEvent("promoted_products",t,"product",void 0,o)}});e.currentAnalytics.trackUniqueEvent("promoted_products","loaded","product",void 0,{lppid:r}),e.currentInview.register(n,s("shown",{sppid:r})),e.hoverAnalytics.register(n,s("hovered",{hppid:r})),n.getElementsByClassName("yotpo-product-link")[0].onclick=s("clicked_on",{cppid:r})}}var i={},n=!1;return t.selector=".promoted-products-box",t.prototype.getElement=function(){return this.element},t.prototype.getSettings=function(){return this.settings},t.prototype.getMethod=function(){return"promoted_products"},t.prototype.on=function(t,o){e.Modules.Event.on.call(this,t,o)},t.prototype.trigger=function(t,o){e.Modules.Event.trigger.call(this,t,o)},t.prototype.state=function(t){return e.Modules.Helper.state.call(this,t)},t.prototype.is=function(t){return e.Modules.Helper.is.call(this,t)},t.perPage=3,t.prototype.getLayout=function(){return"old"},i={ready:function(){var t=this;e.Modules.Pagination.init.call(t),t.trigger("resize")},pageChanged:function(o){t.perPage=Math.min(this.getElement().getElementsByClassName("yotpo-promoted-product").length-1,t.perPage);var i=this._controller.getUserSetting("direction"),n=Math.min(Math.max(0,this.currentItem+("yotpo_next"==o?t.perPage:-t.perPage)),this.totalItems-1),r=this.getElement().getElementsByClassName("promoted-products")[0],s=r.getElementsByTagName("li")[n],a=s.clientWidth*n;"rtl"==i&&(a=this.scrollBase-s.clientWidth*n),e.scrollTo(r,a,500,!1),this.currentItem=n},resize:function(){if(!e.supportTouch()){var t=this.element.getElementsByClassName("promoted-products")[0];t.scrollWidth<=t.offsetWidth?e.hide(this.element.getElementsByClassName("yotpo-pager")[0]):e.show(this.element.getElementsByClassName("yotpo-pager")[0])}},sizeCalculated:function(t){for(var i=this,r=0,s=document.getElementsByTagName("body")[0],a=i.getElement();a&&a!=s&&0==a.offsetWidth;)a=a.parentNode;var l=0;l+=2*parseInt(e.getStyle(a,"margin-left")),l+=2*parseInt(e.getStyle(a,"padding-left"));var c=i.getElement().getElementsByClassName("yotpo-promoted-products")[0];r+=2*parseInt(e.getStyle(c,"margin-left"));var d=i.getElement().getElementsByClassName("promoted-products")[0],u=d.getElementsByTagName("li").length,p=i.getElement().getElementsByClassName("yotpo-promoted-product");if(0==p.length)return void e.hide(this.getElement());r+=u*parseInt(e.getStyle(p[0],"margin-left"))*2;var g=160;"yotpo-small"==t.className&&(g=110);var h=g*u;!i.css_preview&&a.offsetWidth>=h+r+l?e.hide(this.getElement()):(e.show(this.getElement(),"block"),n||(n=!0,o.call(i))),i.trigger("resize")}},t}(Yotpo),Yotpo.Widgets=Yotpo.Widgets||{},Yotpo.Widgets.QuestionsBottomline=function(e){function t(e,t){var i=this;i._controller=e,i.element=t,i.settings={pid:t.getAttribute("data-product-id")};for(var n in o)o.hasOwnProperty(n)&&i.on(n,o[n])}var o={};return t.selector=e.widgets["questions-bottomline"].selector,t.prototype.getElement=function(){return this.element},t.prototype.getSettings=function(){return this.settings},t.prototype.getMethod=function(){return"questions_bottomline"},t.prototype.on=function(t,o){e.Modules.Event.on.call(this,t,o)},t.prototype.trigger=function(t,o){e.Modules.Event.trigger.call(this,t,o)},t.prototype.refresh=function(){e.Modules.Refresh.perform.call(this)},t.prototype.state=function(t){return e.Modules.Helper.state.call(this,t)},t.prototype.is=function(t){return e.Modules.Helper.is.call(this,t)},t.prototype.getLayout=function(){return"old"},o={ready:function(){var t,o=this,i=o._controller.getWidgetsByName("Main"),n=o.getElement().getElementsByClassName("ask-question")[0];if(1==i.length)t=i[0];else for(var r=0;r<i.length;r++)if(i[r].settings&&"questions"==i[r].settings.mode){t=i[r];break}t&&n&&(n.onclick=function(){var o=t.getElement(),i=o.getElementsByClassName("write-question-button")[0];return e.simulateClickEvent(i),o.scrollIntoView(),t.get("forms").questions.getElement().scrollIntoView(),!1})}},t}(Yotpo),Yotpo.Widgets=Yotpo.Widgets||{},Yotpo.Widgets.ShopAdvisor=function(e){function t(e,t){var i=this;i._controller=e,i.element=t,i.settings={};for(var n in o)o.hasOwnProperty(n)&&i.on(n,o[n])}var o={};return t.prototype.getMethod=function(){return"ShopAdvisor"},t.prototype.getSettings=function(){return this.settings},t.selector=e.widgets["shop-advisor"].selector,t.prototype.getElement=function(){return this.element},t.prototype.trigger=function(t,o){e.Modules.Event.trigger.call(this,t,o)},t.prototype.on=function(t,o){e.Modules.Event.on.call(this,t,o)},t.prototype.state=function(t){return e.Modules.Helper.state.call(this,t)},t.prototype.is=function(t){return e.Modules.Helper.is.call(this,t)},t.prototype.getLayout=function(){return"new"},o={ready:function(){}},t}(Yotpo),Yotpo.Widgets=Yotpo.Widgets||{},Yotpo.Widgets.ShoppableGallery=function(e){function t(t,o){var i=this;i._controller=t,i.element=o,i.analyticsCategory="shoppable_instagram";var n=t.getUserSetting("shoppable_instagram"),r={};n&&(r=n.settings.settings),sessionStorage.getItem("yotpoPresetShoppableState")===O&&(r.preset_shoppable_state=O,i.shoppableState=O,i.imageId=sessionStorage.getItem("yotpoPresetImageId")),r.demo=o.getAttribute("data-demo"),r.only_tagged_images=!0,r.source=["instagram"],r.album_name=U;var s=i.element.getAttribute("data-no-shoppable-header");r.header={enabled:""===s?!1:null===s||!JSON.parse(s)},r.shop_owner_details=!0,r.per_page=30,r.product_scores=!0,r.yotpo_hosted_page=""===i.element.getAttribute("data-yotpo-hosted-page")?!0:!1,r.css_settings_class="yotpo-shoppable-instagram",i.settings=r,this.imagesHandler=new e.ImagesHandler(t.appKey,this);for(var a in H)H.hasOwnProperty(a)&&i.on(a,H[a])}function o(){var t=this.element.querySelector(".yotpo-redirect");if(t){var o=this.element.getAttribute("data-empty-redirect-url");return void(o&&e.redirectToUrl(o))}history.pushState({},{},null),this.container=this.element.querySelector(".yotpo-shoppable-gallery-images-wrapper"),this.imageDimensions={},this.fullScreenImageID=void 0,this.fullScreenImagesDimensions={},this.displayWrapper=this.element.querySelector(".yotpo-display-wrapper"),this.headerElement=this.element.querySelector(".yotpo-shoppable-header"),this.shopImageElement=this.headerElement.querySelector("img.shop-image"),this.shopImagePlaceholderElement=this.headerElement.querySelector(".shop-image-placeholder"),this.currentShopImageElement=this.shopImageElement,this.headerWrapperElement=this.element.querySelector(".yotpo-shoppable-gallery-header-wrapper"),this.backArrow=this.element.querySelector(".yotpo-icon-left-arrow-thin"),i.call(this),this.singleViewContainer=this.element.querySelector(".yotpo-shoppable-single-view-container"),this.singleViewWrapper=this.element.querySelector(".yotpo-shoppable-single-image-wrapper"),this.galleryContainer=this.element.querySelector(".yotpo-shoppable-gallery-wrapper"),N.call(this),this.loader=this.element.querySelector(".yotpo-image-loader.yotpo-pictures-gallery-fullpage-loader"),this.imageStatsContainer=this.element.querySelector(".yotpo-shoppable-stats"),this.imageSalesTextElement=this.element.querySelector(".yotpo-shoppable-sales"),this.imageSalesElement=this.element.querySelector(".yotpo-shoppable-sales-count"),this.imageLikesElement=this.element.querySelector(".yotpo-shoppable-likes-count"),this.taggedProductsContainer=this.element.querySelector(".yotpo-shoppable-tagged-products-container"),this.analyticsTracker=new e.AnalyticsTracker(this.analyticsCategory),this.imagesAnalyticsHandler=new e.ImagesAnalyticsHandler(this.element,this.imageContainers,this.analyticsTracker),this.brokenImageDescriptors=[],this.imagesHandler.loadImages(l.bind(this),m,r.bind(this)),f(this)}function i(){this.settings.header.enabled?this.galleryHeader=!0:(e.addClass(this.headerElement,"yotpo-hidden"),L.call(this),this.galleryHeader=!1),this.shopImageElement.onerror=h.bind(this),n.call(this)}function n(){var e=window.getComputedStyle(document.body,null).getPropertyValue("margin");this.headerElement.style.marginTop="-"+e,this.headerElement.style.marginRight="-"+e,this.headerElement.style.marginLeft="-"+e}function r(e,t){s.call(this,e,t),a.call(this,e)&&k.call(this,e)}function s(e,t){this.imageDimensions[e]={width:t.width,height:t.height},this.fullScreenImagesDimensions[e]=p.call(this,e)}function a(e){var t=this.fullScreenImageID===e;return this.imageId===e&&this.shoppableState===O&&!t}function l(){c.call(this),d.call(this)}function c(){this.shoppableState===O&&this.fullScreenImageID!==this.imageId&&history.back()}function d(){this.imagesHandler.reportInvalidImages(this.brokenImageDescriptors)}function u(){for(var e in this.imageDimensions)this.fullScreenImagesDimensions[e]=p.call(this,e);g.call(this)}function p(e){var t=this.imageDimensions[e],o=window.innerWidth||screen.width,i=Math.min(o,F);return{width:i,height:Math.ceil(t.height*i/t.width)}}function g(){var e=this.singleViewContainer.querySelector(".yotpo-shoppable-image-container");if(this.fullScreenImageID&&this.fullScreenImagesDimensions){var t=this.fullScreenImagesDimensions[this.fullScreenImageID].height;e.style.height=t+"px"}}function h(){e.reportBrokenImages(this._controller.appKey,[""],"account",!1),e.hide(this.shopImageElement),e.show(this.shopImagePlaceholderElement),this.currentShopImageElement=this.shopImagePlaceholderElement}function m(e,t){var o={id:t,source:"instagram",reported:!1};e.brokenImageDescriptors.push(o)}function f(t){w.call(t),t.endlessScroller=new e.Modules.InviewEndlessScroll(t.settings.per_page,t._controller,t.loader,y.bind(t),t.loadIndicator),t.imageContainers.length>=t.settings.per_page&&e.removeClass(t.loader,"yotpo-hidden")}function y(){var e=this.settings;e.offset={instagram:this.endlessScroller.per_page*this.endlessScroller.page},e.widget="shoppable_gallery",this.endlessScroller.getNextPage({method:"partial_shoppable_gallery",params:e},v.bind(this))}function v(t){var o=this.element.querySelector(".yotpo-shoppable-single-image-contents"),i=JSON.parse(t)[0].result,n=document.createElement("div");n.insertAdjacentHTML("beforeend",i);var s=n.querySelector(".yotpo-pictures-gallery-images-wrapper"),a=n.querySelector(".yotpo-shoppable-single-image-contents"),l=s.childElementCount;e.appendChildElements(s,this.container),e.appendChildElements(a,o),N.call(this),this.imagesHandler.loadImages(d.bind(this),m,r.bind(this)),E.call(this),l<this.settings.per_page&&e.addClass(this.loader,"yotpo-hidden")}function w(){this.shoppableState=this.settings.preset_shoppable_state||W,b.call(this),B.call(this),this.analyticsTracker.track("loaded")}function b(){var t=this;this.backArrow&&(e.addEventListener(this.backArrow,"click",_.bind(this)),e.addEventListener(this.headerElement.querySelector(".yotpo-icon-grid"),"click",_.bind(this))),E.call(this),e.addEventListener(window,"scroll",function(){window.innerHeight<t.element.clientHeight-10&&(document.body.scrollTop-1>=t.headerElement.offsetTop?(0===t.headerWrapperElement.offsetTop&&(e.addClass(t.galleryContainer,"yotpo-relative-wrapper"),e.addClass(t.singleViewWrapper,"yotpo-relative-wrapper")),e.addClass(t.headerWrapperElement,"yotpo-fixed-header")):document.body.scrollTop-1<t.headerElement.offsetTop&&(e.removeClass(t.galleryContainer,"yotpo-relative-wrapper"),e.removeClass(t.singleViewWrapper,"yotpo-relative-wrapper"),e.removeClass(t.headerWrapperElement,"yotpo-fixed-header")))}),e.addEventListener(window,"unload",function(){sessionStorage.setItem("yotpoPresetShoppableState",t.shoppableState),sessionStorage.setItem("yotpoPresetImageId",t.imageId)}),e.addEventListener(window,"popstate",S.bind(t))}function _(){history.back()}function S(){this.shoppableState===O&&(C.call(this),T.call(this),window.scrollTo(0,this.imageOffset),this.productsSlider&&this.productsSlider.destroy())}function C(){var t=this.element.querySelector(".yotpo-shoppable-image");t.removeAttribute("src"),e.removeEventListener(t,"click",this.imageClickCallback)}function E(){for(var t=this,o=this.imageContainers,i=0;i<o.length;i++){var n=o[i].querySelector(".y-image-overlay.yotpo-new-image");n&&(e.removeClass(n,"yotpo-new-image"),e.addEventListener(n,"click",function(){t.imageOffset=document.body.scrollTop,t.imageId=this.getAttribute("data-external-image-id"),history.pushState({},{},null),k.call(t,t.imageId)}),e.hoverAnalytics.register(n,function(){e.currentAnalytics.trackUniqueEvent(t.analyticsCategory,"hovered","image",this.getAttribute("data-image-id"))}))}}function k(t){this.fullScreenImageID=t;var o=Y.call(this),i=o.taggedProducts.length>1;P.call(this),A.call(this,o.imageUrl),this.productsSlider=new e.ShoppableProductsSlider(this._controller,this.analyticsTracker,this.taggedProductsContainer),x.call(this,o.taggedProducts),i||I.call(this,o.taggedProducts[0]),this.displayWrapper.scrollIntoView(),D.call(this,o.taggedProducts,o.imageId)}function A(e){g.call(this);var t=this.singleViewContainer.querySelector(".yotpo-shoppable-image");t.style.opacity="0",t.src=e,t.onload=function(){this.style.opacity="1"}}function x(t){var o=this.singleViewContainer.querySelector(".yotpo-shoppable-title"),i=o.querySelector(".yotpo-clickable-title"),n=this.singleViewContainer.querySelector(".yotpo-shoppable-image"),r=this.settings.star_rating.enabled,s=this.settings.cta.enabled?this.settings.cta.text:{},a=this.settings.promoted_products.enabled;this.productsSlider.showElement(t,r,s,a,this.imageId),i.removeAttribute("href"),e.removeClass(n,"yotpo-clickable"),e.addClass(o,"yotpo-hidden")}function I(t){var o=this,i=this.singleViewContainer.querySelector(".yotpo-shoppable-title"),n=i.querySelector(".yotpo-clickable-title"),r=this.singleViewContainer.querySelector(".yotpo-shoppable-image"),s=t.link;i.querySelector(".yotpo-shoppable-product-image").src=t.imageUrl,i.querySelector(".yotpo-shoppable-product-name").innerHTML=t.name,n.href=s,e.addEventListener(n,"click",function(){o.analyticsTracker.track("clicked_on","shop_now")}),e.addEventListener(r,"click",function(){o.analyticsTracker.track("clicked_on","single_image")}),this.imageClickCallback=e.redirectToUrl.bind(null,s),e.addEventListener(r,"click",this.imageClickCallback),e.addClass(r,"yotpo-clickable"),e.removeClass(i,"yotpo-hidden")}function T(){this.shoppableState=W,this.galleryHeader||e.addClass(this.headerElement,"yotpo-hidden"),q.call(this),this.imageStatsContainer.style.opacity="0",e.addClass(this.singleViewContainer,"yotpo-hidden"),e.removeClass(this.galleryContainer,"yotpo-hidden"),e.hasClass(this.loader,"display-on-gallery-view")&&e.removeClass(this.loader,"yotpo-hidden")}function P(){this.shoppableState=O,this.galleryHeader||e.removeClass(this.headerElement,"yotpo-hidden"),q.call(this),e.hasClass(this.loader,"yotpo-hidden")||(e.addClass(this.loader,"display-on-gallery-view"),e.addClass(this.loader,"yotpo-hidden")),e.addClass(this.galleryContainer,"yotpo-hidden"),e.removeClass(this.singleViewContainer,"yotpo-hidden")}function q(){this.galleryHeader&&(this.shoppableState===W?M.call(this):this.shoppableState===O&&L.call(this))}function M(){var t=this.headerElement.querySelector(".yotpo-shoppable-gallery-header-reviews-wrapper");t&&e.removeClass(t,"yotpo-hidden"),e.show(this.currentShopImageElement),e.removeClass(this.headerElement.querySelector(".yotpo-shoppable-gallery-title"),"yotpo-hidden"),e.addClass(this.backArrow,"yotpo-hidden"),e.addClass(this.headerElement.querySelector(".yotpo-icon-grid"),"yotpo-hidden")}function L(){var t=this.headerElement.querySelector(".yotpo-shoppable-gallery-header-reviews-wrapper");t&&e.addClass(t,"yotpo-hidden"),e.hide(this.currentShopImageElement),e.addClass(this.headerElement.querySelector(".yotpo-shoppable-gallery-title"),"yotpo-hidden"),e.removeClass(this.backArrow,"yotpo-hidden"),e.removeClass(this.headerElement.querySelector(".yotpo-icon-grid"),"yotpo-hidden")}function Y(){var e=this.element.querySelector(".yotpo-shoppable-content-"+this.fullScreenImageID),t=e.querySelector(".yotpo-image"),o={};o.imageUrl=t.getAttribute("data-image-url"),o.imageId=t.getAttribute("data-image-id"),o.taggedProducts=[];for(var i=e.querySelectorAll(".yotpo-tagged-product"),n=0;n<i.length;n++)o.taggedProducts[n]={id:i[n].getAttribute("data-tagged-product-id"),domainKey:i[n].getAttribute("data-tagged-product-domain-key"),name:i[n].getAttribute("data-tagged-product-name"),link:i[n].getAttribute("data-tagged-product-link"),imageUrl:i[n].getAttribute("data-tagged-product-image-url"),score:i[n].getAttribute("data-tagged-product-score"),reviewsCount:i[n].getAttribute("data-tagged-product-reviews-count")};return o}function N(){this.imageContainers=this.container.querySelectorAll(".yotpo-single-image-container")}function B(){this.imagesAnalyticsHandler.bindBaseImagesAnalytics()}function D(t,o){for(var i=[],n=0;n<t.length;n++)i.push(t[n].id);var r=[{method:"shoppable_image_stats",params:{product_ids:i,image_id:o},format:"json"}];this._controller.getBatch(function(t){var o=JSON.parse(t);o=o[0].result,o.sales>10&&!this.settings.hide_sales?(e.removeClass(this.imageSalesTextElement,"yotpo-hidden"),e.removeClass(this.imageSalesElement,"yotpo-hidden"),this.imageSalesElement.innerHTML=o.sales):(e.addClass(this.imageSalesTextElement,"yotpo-hidden"),e.addClass(this.imageSalesElement,"yotpo-hidden")),this.imageLikesElement.innerHTML=o.likes,this.imageStatsContainer.style.opacity="1"}.bind(this),r)}var H={},F=768,W="gallery",O="single_image",U="Shoppable Instagram";return t.selector=e.widgets["shoppable-gallery"].selector,t.prototype.getMethod=function(){return"shoppable_gallery"},t.prototype.getSettings=function(){return this.settings},t.prototype.getElement=function(){return this.element},t.prototype.on=function(t,o){e.Modules.Event.on.call(this,t,o)},t.prototype.trigger=function(t,o){e.Modules.Event.trigger.call(this,t,o)},t.prototype.state=function(t){return e.Modules.Helper.state.call(this,t)},t.prototype.is=function(t){return e.Modules.Helper.is.call(this,t)},t.prototype.getLayout=function(){return"new"},t.prototype.getImageElements=function(){return this.imageContainers},H={ready:function(){o.call(this)},resize:function(){u.call(this),this.productsSlider&&this.productsSlider.adjustSize()}},t}(Yotpo),Yotpo.Widgets=Yotpo.Widgets||{},Yotpo.Widgets.ShoppersSay=function(e){function t(t,o){var i=this;i._controller=t,i.element=o,i.settings={},i.moreReviewsClicked=!1,i.element.getAttribute("data-title")&&(i.settings.title=i.element.getAttribute("data-title")),i.element.getAttribute("data-product-id")&&(i.settings.product_id=i.element.getAttribute("data-product-id")),e.isMobile()?i.element.getAttribute("data-maximum-reviews-mobile")&&(i.settings.maximum_reviews_mobile=i.element.getAttribute("data-maximum-reviews-mobile")):i.element.getAttribute("data-maximum-reviews-desktop")&&(i.settings.maximum_reviews_desktop=i.element.getAttribute("data-maximum-reviews-desktop"));for(var n in a)a.hasOwnProperty(n)&&i.on(n,a[n])}function o(e){return'"'==e.charAt(0)&&(e=e.substring(1,e.length)),'"'==e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),"..."==e.substring(e.length-3,e.length)&&(e=e.substring(0,e.length-3)),e}function i(){var e=this,t=e._controller.getUserSetting("shoppers_say");if(t!==!1){var o=e.element.getElementsByClassName("shoppers-say-display-wrapper");if(o.length){var i=o[0],a=i.getElementsByClassName("more-reviews");r(e,a);var l=i.getElementsByClassName("sentence-wrapper");s(e,l),n(i)}}}function n(t){var o=t.getElementsByClassName("single-best-sentence").length,i="true"===t.getAttribute("data-met-requirements"),n=!i||"true"===t.getAttribute("data-is-dummy");e.currentAnalytics.trackEvent("shoppers_say",n?"loaded_dummy":"loaded",null,null,{met_requirements:i,quotes_count:n?"y":o}),e.currentInview.register(t,function(){e.currentAnalytics.trackEvent("shoppers_say",n?"shown_dummy":"shown",null,null,{met_requirements:i,quotes_count:n?"y":o})})}function r(t,o){for(var i=0;i<o.length;i++)$(o[i]).click(function(o){t.moreReviewsClicked=!0,o.stopPropagation(),e.scrollToReviewsTabInMainWidget(t._controller,!0)})}function s(e,t){for(var o=0;o<t.length;o++)t[o].onclick=function(t){e.trigger("toggleFullReview",t)}}var a={};return t.prototype.getMethod=function(){return"shoppers_say"},t.prototype.getSettings=function(){return this.settings},t.selector=e.widgets["shoppers-say"].selector,t.prototype.getElement=function(){return this.element},t.prototype.trigger=function(t,o){e.Modules.Event.trigger.call(this,t,o)},t.prototype.on=function(t,o){e.Modules.Event.on.call(this,t,o)},t.prototype.state=function(t){return e.Modules.Helper.state.call(this,t)},t.prototype.is=function(t){return e.Modules.Helper.is.call(this,t)},t.prototype.getLayout=function(){return"new"},a={ready:function(){var e=this;i.call(e)},toggleFullReview:function(t){var i=t.currentTarget,n=e.Modules.Helper.findAncestorByClass(i,"single-best-sentence"),r=n.getElementsByClassName("sentence-expanded")[0],s=n.getElementsByClassName("sentence-collapsed")[0],a=i.classList.contains("sentence-collapsed")?!0:!1;if(a){var l=s.getElementsByClassName("sentence");if(l.length>0){var c=o(l[0].textContent);e.currentAnalytics.trackEvent("shoppers_say","clicked_on",null,c)}}var d=a?r:s;e.addClass(i,"yotpo-hidden"),e.Animations.fadeIn(d,1e3)}},t}(Yotpo),Yotpo.Widgets=Yotpo.Widgets||{},Yotpo.Widgets.SingleVideo=function(e){function t(e,t){var o=this;o._controller=e,o.element=t,o.settings={};for(var n in i)i.hasOwnProperty(n)&&o.on(n,i[n])}function o(){var e=this.getElement(),t=e.querySelector(".yotpo-video-container"),o=this._controller.appKey;t.onclick=function(){n.playing||n.ready(o,e)}}var i={};t.prototype.getMethod=function(){return"Video"},t.prototype.getSettings=function(){return this.settings},t.selector=e.widgets["single-video"].selector,t.prototype.getElement=function(){return this.element},t.prototype.trigger=function(t,o){e.Modules.Event.trigger.call(this,t,o)},t.prototype.on=function(t,o){e.Modules.Event.on.call(this,t,o)},t.prototype.state=function(t){return e.Modules.Helper.state.call(this,t)},t.prototype.is=function(t){return e.Modules.Helper.is.call(this,t)},t.prototype.getLayout=function(){return"new"},i={ready:function(){var e=this.getElement().querySelector("#video");e&&o.call(this)}};var n={ready:function(e,t){this.container=t,this.appKey=e,this.playing=!1,this.me="_"+Math.random().toString(36).substr(2,9),this.room=new Room({signalServer:"wss://live.yotpo.com/signal/_/",me:this.me,iceServers:[{urls:["stun:stun.lawsroom.com:3478"]},{urls:"turn:stun.lawsroom.com:3478",username:"yiquganchangduan",credential:"tianyahechumizhiyin"},{urls:"turn:stun.lawsroom.com:3478?transport=tcp",username:"yiquganchangduan",credential:"tianyahechumizhiyin"},{urls:"turn:stun.lawsroom.com:3478?transport=udp",username:"yiquganchangduan",credential:"tianyahechumizhiyin"}]}),this.room.on("signal_open",this.signal_open.bind(this)),this.room.on("signal_close",this.signal_close.bind(this)),this.room.on("signal_error",this.signal_error.bind(this)),this.room.on("peer_open",this.peer_open.bind(this)),this.room.on("peer_close",this.peer_close.bind(this)),this.room.on("channel_open",this.channel_open.bind(this)),this.room.on("channel_message",this.channel_message.bind(this)),this.room.on("channel_close",this.channel_close.bind(this)),this.room.on("message_create",this.message_create.bind(this)),this.room.on("message_join",this.message_join.bind(this)),this.room.on("message_leave",this.message_leave.bind(this)),this.room.on("message_notice",this.message_notice.bind(this)),this.room.on("stream_add",this.stream_add.bind(this)),this.room.on("stream_remove",this.stream_remove.bind(this)),this.room["in"]()},signal_open:function(){n.join(this.appKey)},signal_close:function(){},signal_error:function(){},peer_open:function(){},peer_close:function(e){this.removeVideo(e)},channel_open:function(){},channel_message:function(){},channel_close:function(){},message_create:function(){},message_join:function(){},message_leave:function(){this.removeVideos()},message_notice:function(e){"string"==typeof e.Data&&("room_exists"===e.Data&&this.room.join(this.roomId),"room_full"===e.Data)},stream_add:function(e,t){this.addVideo(e,t)},stream_remove:function(e){this.removeVideo(e)},addVideo:function(e,t){var o=this.container.querySelector("#video");o.src=URL.createObjectURL(t),o.play(),this.playing=!0,o.ontimeupdate=function(){var e=parseInt(o.currentTime,10),t=Math.floor(e/3600),i=Math.floor((e-3600*t)/60),n=e-3600*t-60*i;10>t&&(t="0"+t),10>i&&(i="0"+i),10>n&&(n="0"+n),document.querySelector(".live-duration").innerHTML=t+":"+i+":"+n}},removeVideo:function(){var e=this.container.querySelector("#video");e.stop()},join:function(e){this.playing||(this.roomId=e,this.room.create(e))},leave:function(){this.room.leave()},send:function(){}};return t}(Yotpo),Yotpo.Widgets=Yotpo.Widgets||{},Yotpo.Widgets.Slider=function(e){function t(t,o){var i=this;i.analyticsCategory="pictures_widget",i.analyticsContext={layout:"carousel"};var n=o.getAttribute("data-source");i.analyticsContext.source=n||"none",i._controller=t,this.imageHandler=new e.ImagesHandler(t.appKey,this),i.isRTL="rtl"==t.userSettings.direction,i.element=o;var r=t.getUserSetting("pictures_slider");i.settings={widget_name:"slider",product_id:o.getAttribute("data-product-id"),demo:o.getAttribute("data-demo")},r&&(i.settings.use_full_width="1"===String(r.settings.full_width),i.settings.auto_play="1"===String(r.settings.auto_slide),i.settings.widget_ref_name="visual_carousel_shop_now",i.settings.title=r.settings.slider_title,i.settings.source=r.settings.slider_source,i.settings.hover=r.settings.slider_hover,i.settings.per_page=r.settings.number_of_images||S,i.settings.sort=r.settings.sort),i.show_tagged_products=i.settings.product_id?!1:!0;var s=new e.Modules.GallerySettings;s.overrideSettingsFromDiv(i.element,i.settings),i.analyticsContext.widget_class=s.getWidgetClass(i.element),i.analyticsContext.album_id=i.settings.album_id||"none",i.analyticsContext.album_type=i.settings.product_id?"product":"custom",i.settings.images_to_display=this.calcDisplaySize(o,i.settings.use_full_width);for(var a in C)C.hasOwnProperty(a)&&i.on(a,C[a]);e.hoverAnalytics.register(i.element,function(){e.currentAnalytics.trackUniqueEvent(i.analyticsCategory,"hovered")})}function o(e,t){for(var o=0;o<e.length;o++)if(e[o].getAttribute(_)==t.getAttribute(_))return!0;return!1}function i(){for(var e=[],t=0;t<this.elements.length;++t){var i=this.elements[t].querySelector(".y-image-overlay");o(e,i)||e.push(i)}return e}function n(){var t=this,o=this.element.querySelector(".yotpo-lightbox-wrapper"),n=this.element.querySelector(".yotpo-lightbox-contents"),r=o.querySelector(".yotpo-lightbox");
if(r){var s=i.call(this),a=new e.SliderContentProvider(s,n,this.show_tagged_products),l=new e.AnalyticsTracker(this.analyticsCategory+"_popup",this.analyticsContext);this.lightbox=new e.Widgets.Lightbox(this._controller,r,a,l,o);for(var c=0;c<this.elements.length;++c){var d=this.elements[c].querySelector(".y-image-wrapper"),u=d.querySelector(".y-image-overlay");e.addEventListener(d,"click",function(){t.lightbox.open(this.querySelector(".y-image-overlay"))}),e.hoverAnalytics.register(u,function(){e.currentAnalytics.trackUniqueEvent(t.analyticsCategory,"hovered","image",this.getAttribute("data-image-id"))})}}}function r(){this.sliderWrapper=this.element.querySelector(".yotpo-slider-wrapper"),e.setHoverEnable(this.sliderWrapper),this.displayWrapper=this.element.querySelector(".yotpo-display-wrapper.yotpo-slider"),this.container=this.element.querySelector(".y-slider-container"),this.container&&(this.elements=this.container.querySelectorAll(".yotpo-single-image-container"),this.elements.length<=0||(this.leftArrow=this.displayWrapper.querySelector(".yotpo-icon-left-arrow-thin"),this.rightArrow=this.displayWrapper.querySelector(".yotpo-icon-right-arrow-thin"),this.originalNumOfImages=parseInt(this.displayWrapper.getAttribute("data-images"),10),this.displaySize=this.calcDisplaySize(this.displayWrapper,this.settings.use_full_width),this.analyticsTracker=new e.AnalyticsTracker(this.analyticsCategory,this.analyticsContext),this.imagesAnalyticsHandler=new e.ImagesAnalyticsHandler(this.element,this.elements,this.analyticsTracker),this.brokenImageDescriptors=[],c.call(this),this.imageHandler.loadImages(a,s),l.call(this),e.Flows.UploadButton.initUploadButton(this._controller,this.element,this.settings,this.analyticsCategory)))}function s(e,t){var o={id:t,source:e.imageHandler.getImageSource(t),reported:!1};e.brokenImageDescriptors.push(o)}function a(e){e.brokenImageDescriptors.length>0&&(e.imageHandler.reportInvalidImages(e.brokenImageDescriptors),e.imageHandler.replaceBrokenImages(e.brokenImageDescriptors)),m.call(e),e.analyticsTracker.track("loaded")}function l(){u.call(this),this.sliderWrapper.style.maxWidth=p.call(this),this.slide=new e.Modules.Slide(this.container,{imageCount:this.originalNumOfImages,displayWindowCount:this.displaySize,useOffset:this.displaySize<this.elements.length,delayInterval:w,autoSlide:this.settings.auto_play,slideDirection:this.isRTL?"left":"right",rtl:this.isRTL}),this.slide.start(),h.call(this)}function c(){if(this.settings.load_lightbox_sync)n.call(this);else{var e={method:"lightbox_container",params:this.getSettings()};this._controller.getBatch(d.bind(this),[e],null)}}function d(e){var t=JSON.parse(e)[0];t&&(this.element.insertAdjacentHTML("afterbegin",t.result),n.call(this))}function u(){var t=this.elements.length;this.displaySize<=t&&(this.container.style.width=100/this.displaySize*t+"%");for(var o=100/t+"%",i=e.getComputedMargins(this.elements[0]),n=i.left+i.right,r=0;t>r;++r)this.elements[r].style.width="calc("+o+" - "+n+"px)"}function p(){var t=v;if(!e.isIE8){var o=this.elements[0],i=e.getComputedMargins(o);t=parseInt(e.getComputedStyle(o,"max-width").replace("px",""),10)+i.left+i.right}return t*this.displaySize+"px"}function g(t){var o=this;e.addEventListener(t,"mouseover",function(){o.slide.pause()}),e.addEventListener(t,"mouseout",function(){o.slide.play()})}function h(){var e=this;this.leftArrow&&(this.leftArrow.onclick=function(){e.slide.left()},g.call(this,this.leftArrow)),this.rightArrow&&(this.rightArrow.onclick=function(){e.slide.right()},g.call(this,this.rightArrow));for(var t=0;t<this.elements.length;++t)g.call(this,this.elements[t])}function m(){this.imagesAnalyticsHandler.bindBaseImagesAnalytics(),f.call(this)}function f(){var t=this;this.rightArrow&&e.addEventListener(this.rightArrow,"click",function(){t.analyticsTracker.track("clicked_on",t.isRTL?"widget_previous_image":"widget_next_image",null)}),this.leftArrow&&e.addEventListener(this.leftArrow,"click",function(){t.analyticsTracker.track("clicked_on",t.isRTL?"widget_next_image":"widget_previous_image",null)})}var y=180,v=185,w=5e3,b=3,_="data-image-id",S=56,C={};return t.selector=e.widgets.slider.selector,t.prototype.getMethod=function(){return"Slider"},t.prototype.getSettings=function(){return this.settings},t.prototype.getElement=function(){return this.element},t.prototype.on=function(t,o){e.Modules.Event.on.call(this,t,o)},t.prototype.trigger=function(t,o){e.Modules.Event.trigger.call(this,t,o)},t.prototype.state=function(t){return e.Modules.Helper.state.call(this,t)},t.prototype.is=function(t){return e.Modules.Helper.is.call(this,t)},t.prototype.getLayout=function(){return"new"},t.prototype.getImageElements=function(){return this.elements},t.prototype.calcDisplaySize=function(e,t){var o=e.offsetWidth/y,i=t?Math.ceil(o):Math.floor(o);return Math.max(i,b)},C={ready:function(){r.call(this)}},t}(Yotpo),Yotpo.Widgets.VisualCarousel=function(e){function t(t,o){var i=56,n="UGC Gallery";e.Widgets.Slider.call(this,t,o),this.getMethod=function(){return"VisualCarousel"},this.analyticsCategory="dedicated_page",self.analyticsContext={layout:"carousel"};var r=o.getAttribute("data-source");self.analyticsContext.source=r||"none";var s=t.getUserSetting("visual_carousel");this.settings.widget_name="visual_carousel",this.settings.album_name=n,s&&(this.settings.auto_play="1"===String(s.settings.auto_slide),this.settings.title=s.settings.slider_title,this.settings.cta_text=s.settings.cta_text,this.settings.cta_color=s.settings.cta_color,this.settings.source=s.settings.slider_source,this.settings.css_settings_class="yotpo-visual-carousel",this.settings.widget_ref_name="visual_carousel_shop_now",this.settings.use_full_width="1"===String(s.settings.full_width),this.settings.per_page=s.settings.number_of_images||i,this.settings.sort=s.settings.sort);var a=new e.Modules.GallerySettings;a.overrideSettingsFromDiv(this.element,this.settings),self.analyticsContext.widget_class=a.getWidgetClass(o),self.analyticsContext.album_id=this.settings.album_id||"none",self.analyticsContext.album_type="custom",this.show_tagged_products=!0,this.settings.images_to_display=this.calcDisplaySize(o,this.settings.use_full_width)}return t.prototype=e.Widgets.Slider.prototype,t.selector=".yotpo.yotpo-visual-carousel",t}(Yotpo),Yotpo.Widgets=Yotpo.Widgets||{},Yotpo.Widgets.Testimonials=function(e){function t(e,t){var i=this;i.analyticsCategory="tab",i._controller=e,i.element=t||o(),i.sources={},i.settings={},"yotpo-testimonials-custom-tab"==i.element.id?(i.settings.per_page=10,i.settings.type="testimonials_custom_tab",delete u.resize,i.analyticsCategory="reviews_dedicated_page"):i.settings.type="testimonials",e.getWidgetByName("Main")&&e.getWidgetByName("Main").getSettings().tags&&(i.settings.tags=e.getWidgetByName("Main").getSettings().tags),i.element.getAttribute("data-product-readonly")?i.settings["data-product-readonly"]=!0:e.getWidgetByName("Main")&&e.getWidgetByName("Main").getSettings()["product-readonly"]&&(i.settings["data-product-readonly"]=!0),e.getWidgetByName("ShoppableGallery")&&e.getWidgetByName("ShoppableGallery").getSettings().yotpo_hosted_page&&(i.settings["hidden-widget"]=!0);var n="undefined"!=typeof e.getUserSetting("testimonials")?e.getUserSetting("testimonials").settings:null,r=n&&("both"==n.show_tab?n.default_tab:n.show_tab);if("product_tab"==r){var s=e.getWidgetByName("Main");null!=s&&(i.settings.pid=s.getSettings().pid)}for(var a in u)u.hasOwnProperty(a)&&i.on(a,u[a])}function o(){var e=document.createElement("div");return e.className="yotpo testimonials",document.body.appendChild(e),e}function i(){var t=this,o=t.getElement().getElementsByClassName("yotpo-testimonials-btn")[0],i=t.getElement().getElementsByClassName("close")[0];t.button=o,t.content=document.getElementById(o.getAttribute("href").substring(1)),o.onclick=function(){return e.currentAnalytics.trackUniqueEvent("tab","clicked_on"),t.open(),!1},i.onclick=function(){return t.close(),"undefined"!=typeof t.get("form")&&t.get("form").clean(),!1};var n=t.content.getElementsByClassName("yotpo-modal-mask")[0];n&&(n.onclick=i.onclick)}function n(){var t=this;t.tabs=new e.Tabs(t.getElement().getElementsByClassName("yotpo-nav")[0]),t.tabs.on("changed",function(e){s.call(t,e)})}function r(){for(var t=this,o=t._controller.getWidgetByName("Main"),i=t.tabs.getTabs(),n=0;n<i.length;++n){var r=i[n].getAttribute("data-content"),s=i[n].getAttribute("data-type");e.forEach(r.split(" "),function(i){var n=document.getElementById(i),r=e.hasClass(n,"yotpo-reviews")?"basic":"bottomline",a=s+"-"+r;t.sources[a]=new(e.Widgets[e.capitalize(r)])(t._controller,n),"site"==s&&(t.sources[a].settings.pid="yotpo_site_reviews",t.sources[a].settings.include_site_reviews=!0),"product"==s&&o&&(t.sources[a].settings.pid=o.getSettings().pid),t.sources[a].settings.reference="testimonials_widget_internal",t.sources[a].settings.hide_custom_fields=!0,t.sources[a].settings.per_page=t.getSettings().per_page,t.sources[a].settings.type=t.getSettings().type,t.sources[a].on("ready",function(){d.call(t)}),t.sources[a].trigger("ready"),t.sources[a].on("pageChanged",function(){setTimeout(function(){e.scrollToTop(t.sources[a].getElement())},300)})})}}function s(t){var o=this,i=t.element.getAttribute("data-type"),n=t.element.getAttribute("data-content");e.forEach(n.split(" "),function(t){var n=document.getElementById(t);if(!n.innerHTML.trim()||0==n.innerHTML.trim().length){var r=e.hasClass(n,"yotpo-reviews")?"basic":"bottomline",s=i+"-"+r;o.sources[s].refresh(),o.sources[s].on("ready",function(){var t=this.getElement().querySelector(".write-first-review-button");return t?void e.addEventListener(t,"click",function(){var t=o.getElement().querySelector(".yotpo-modal-bottom-line .write-review-button");e.simulateClickEvent(t)}):void c.call(this)})}});var r=o.getElement().querySelector("input[type=button]");"product"==i&&"undefined"==typeof o.getActiveSource().getSettings().pid?e.hide(r):e.show(r);var s=o.getElement().querySelector(".write-review-wrapper");e.removeClass(s,"visible"),s.style.display="none";for(var a=o.getElement().querySelectorAll(".yotpo-custom-tag-field"),l=0;l<a.length;l++)"site"==i?e.addClass(a[l],"yotpo-hidden"):e.removeClass(a[l],"yotpo-hidden")}function a(){var t=this,o=t.button.getAttribute("data-position"),i=function(e,t){var o={};if("horizontal"==t){var i=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;o.left=i/2-e.offsetWidth/2+"px"}else{var n=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;o.top=n/2-e.offsetHeight/2+"px"}o["z-index"]=799;for(var r in o)o.hasOwnProperty(r)&&(e.style[r]=o[r])};if(/MSIE/.test(navigator.userAgent)){var n=parseInt(navigator.userAgent.toLowerCase().split("msie")[1].split(";")[0]);(n!=document.documentMode||9>n&&"horizontal"!=o)&&e.addClass(t.button,"use-image")}i(t.button,o),e.addEventListener(window,"resize",function(){i(t.button,o)})}function l(){var t=this.getElement().getElementsByClassName("yotpo-messages");t.length>0&&(this.messages=new e.Messages(t))}function c(){for(var t,o=this,i=o.getElement().getElementsByClassName("product-link"),n=0;t=i[n];n++)e.addEventListener(t,"click",function(){var t=this.getAttribute("data-product-id");e.currentAnalytics.trackEvent("reviews","clicked_on","product_name",t)})}function d(){var t,o=this;t="tab"==o.analyticsCategory?o.analyticsCategory+"_popup":o.analyticsCategory;for(var i=o.element.querySelectorAll(".yotpo-review"),n=0;n<i.length;n++){var r=i[n];e.currentAnalytics.trackReview(r,t,"loaded"),e.hoverAnalytics.register(r,function(){e.currentAnalytics.trackReview(this,t,"hovered")});var s=function(o){return function(){e.currentAnalytics.trackReview(o,t,"shown")}}(r);"reviews_dedicated_page"==t?e.currentInview.register(r,s):e.currentInview.registerinModal(r,s)}var a=i.length-1,l=a>0?"has_reviews":"no_reviews";e.currentAnalytics.trackUniqueEvent(o.analyticsCategory,"loaded",l),e.currentAnalytics.trackUniqueEvent(o.analyticsCategory,"shown"),e.hoverAnalytics.register(o.element,function(){e.currentAnalytics.trackUniqueEvent(o.analyticsCategory,"hovered")})}var u={};return t.selector=e.widgets.testimonials.selector,t.createsElement=function(t){return e.isMobile()?!1:"undefined"!=typeof t.testimonials_tab&&t.testimonials_tab!==!1},t.prototype.getMethod=function(){return"testimonials"},t.prototype.getSettings=function(){return this.settings},t.prototype.getElement=function(){return this.element},t.prototype.getTabs=function(){return this.tabs},t.prototype.getAppKey=function(){return this._controller.getAppKey()},t.prototype.get=function(e){return this[e]},t.prototype.getActiveSource=function(){return this.sources[this.tabs.getActive().getAttribute("data-type")+"-basic"]},t.prototype.getProductInfo=function(){var t=this.tabs.getActive().getAttribute("data-type");if("product"==t&&"undefined"!=typeof this.getActiveSource().getSettings().pid)for(var o=this._controller.getWidgets(),i=0;i<o.length;++i)if(o[i]instanceof e.Widgets.Main)return o[i].getProductInfo();var n=this._controller.getUserSettings().account_settings.settings.name,r=this._controller.getUserSettings().account_settings.settings.domain,s="my.yotpo.com"===window.location.host?r:e.origin();return{sku:"yotpo_site_reviews",product_title:n,product_url:s,domain:s}},t.prototype.on=function(t,o){e.Modules.Event.on.call(this,t,o)},t.prototype.trigger=function(t,o){e.Modules.Event.trigger.call(this,t,o)},t.prototype.open=function(){var t=this;t.content.style.display="block",setTimeout(function(){e.addClass(t.content,"yotpo-modal-active"),t.trigger("resize"),e.currentInview.verifyInviewT()},10),e.currentAnalytics.trackUniqueEvent("tab_popup","loaded"),e.currentAnalytics.trackUniqueEvent("tab_popup","shown");var o=t.content.querySelector(".yotpo-modal-dialog");e.addEventListener(o,"click",function(){e.currentAnalytics.trackUniqueEvent("tab_popup","clicked_on")}),e.hoverAnalytics.register(o,function(){e.currentAnalytics.trackUniqueEvent(t.analyticsCategory+"_popup","hovered")})},t.prototype.close=function(){var t=this;e.removeClass(t.content,"yotpo-modal-active"),setTimeout(function(){t.content.style.display="none"},500)},t.prototype.state=function(t){return e.Modules.Helper.state.call(this,t)},t.prototype.is=function(t){return e.Modules.Helper.is.call(this,t)},t.prototype.getLayout=function(){return"old"},u={ready:function(){i.call(this),a.call(this),n.call(this),r.call(this),l.call(this),e.Modules.Handle.write.call(this,"review"),e.Modules.Handle.sources.call(this),e.Modules.Handle.semiWhiteLabel.call(this),c.call(this)},resize:function(){var e=this.element,t=e.getElementsByClassName("yotpo-modal-dialog")[0].offsetHeight,o=+(e.getElementsByClassName("yotpo-label")[0]||{}).offsetHeight,i=e.getElementsByClassName("yotpo-modal-header")[0].offsetHeight,n=e.getElementsByClassName("yotpo-modal-bottom-line")[0].offsetHeight,r=e.getElementsByClassName("yotpo-nav-primary")[0].offsetHeight,s=t-o-i-n-r;s>0&&(e.getElementsByClassName("yotpo-modal-body")[0].style.height=s+"px")}},t}(Yotpo);var getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,RTCSessionDescription=window.RTCSessionDescription||window.mozRTCSessionDescription,RTCPeerConnection=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,RTCIceCandidate=window.RTCIceCandidate||window.mozRTCIceCandidate;Room.prototype.on=function(e,t){this.handles[e]=t},Room.prototype["in"]=function(){this.signal=new WebSocket(this.signalServer+encodeURIComponent(this.me)),this.signal.onopen=this._signal_open.bind(this),this.signal.onclose=this._signal_close.bind(this),this.signal.onerror=this._signal_error.bind(this),this.signal.onmessage=this._signal_message.bind(this)},Room.prototype._signal_open=function(e){"function"==typeof this.handles.signal_open&&this.handles.signal_open(e)},Room.prototype._signal_close=function(e){this._clean(),"function"==typeof this.handles.signal_close&&this.handles.signal_close(e)},Room.prototype._signal_error=function(e){this._clean(),"function"==typeof this.handles.signal_error&&this.handles.signal_error(e)},Room.prototype._signalSend=function(e){this.signal.send(JSON.stringify(e))},Room.prototype._clean=function(){this.id=void 0,this.stream=void 0;for(var e in this.peers)this.peers[e].c.close(),delete this.peers[e];for(var e in this.channels)"open"===this.channels[e].readyState&&this.channels[e].close(),delete this.channels[e]},Room.prototype._newPeerConnection=function(){return new RTCPeerConnection({iceServers:this.iceServers})},Room.prototype.setStream=function(e){this.stream=e},Room.prototype.create=function(e){this._signalSend({For:"create",Room:e})},Room.prototype.join=function(e){this._signalSend({For:"join",Room:e})},Room.prototype.leave=function(){this._signalSend({For:"leave",Room:this.id})},Room.prototype.send=function(e){for(var t in this.channels)"open"===this.channels[t].readyState&&this.channels[t].send(e)},Room.prototype.peersCount=function(){var e=0;for(var t in this.peers)("connected"===this.peers[t].readyState||"completed"===this.peers[t].iceConnectionState)&&e++;return e},Room.prototype.channelsCount=function(){var e=0;for(var t in this.channels)"open"===this.channels[t].readyState&&e++;return e},Room.prototype._signal_message=function(e){var t=JSON.parse(e.data);switch(t.For){case"create":this.id=t.Room,"function"==typeof this.handles.message_create&&this.handles.message_create(t);break;case"join":this.id=t.Room,"function"==typeof this.handles.message_join&&this.handles.message_join(t);break;case"join_older":this._join_older(t);break;case"join_newer":this._join_newer(t);break;case"leave":this._clean(),"function"==typeof this.handles.message_leave&&this.handles.message_leave(t);break;case"icecandidate":this.peers[t.From].hasRSDP?this.peers[t.From].c.addIceCandidate(new RTCIceCandidate(t.Data)):this.peers[t.From].candidates.push(t.Data);break;case"offer":var o=this;o.peers[t.From].c.setRemoteDescription(new RTCSessionDescription(t.Data),function(){for(o.peers[t.From].hasRSDP=!0;;){var e=o.peers[t.From].candidates.shift();if(!e)break;o.peers[t.From].c.addIceCandidate(new RTCIceCandidate(e))}o.peers[t.From].c.createAnswer(function(e){o.peers[t.From].c.setLocalDescription(e,function(){o._signalSend({Room:o.id,From:o.me,To:t.From,For:"answer",Data:e})},function(){})},function(){})},function(){});break;case"answer":var o=this;o.peers[t.From].c.setRemoteDescription(new RTCSessionDescription(t.Data),function(){for(o.peers[t.From].hasRSDP=!0;;){var e=o.peers[t.From].candidates.shift();if(!e)break;o.peers[t.From].c.addIceCandidate(new RTCIceCandidate(e))}},function(){});break;case"notice":"function"==typeof this.handles.message_notice&&this.handles.message_notice(t)}},Room.prototype._join_older=function(e){var t=this,o=t._newPeerConnection();t.peers[e.Data]={c:void 0,hasRSDP:!1,candidates:[]},t.peers[e.Data].c=o,t.stream&&o.addStream(t.stream),o.onaddstream=function(o){"function"==typeof t.handles.stream_add&&t.handles.stream_add(e.Data,o.stream,o)},o.onremovestream=function(o){"function"==typeof t.handles.stream_remove&&t.handles.stream_remove(e.Data,o)},o.onicecandidate=function(o){o.candidate&&t._signalSend({Room:t.id,From:t.me,To:e.Data,For:"icecandidate",Data:o.candidate})};var i=o.createDataChannel(e.Data);i.onopen=function(o){t.channels[e.Data]=i,"function"==typeof t.handles.channel_open&&t.handles.channel_open(e.Data,o)},i.onmessage=function(o){"function"==typeof t.handles.channel_message&&t.handles.channel_message(e.Data,o.data,o)},i.onclose=function(o){"function"==typeof t.handles.channel_close&&t.handles.channel_close(e.Data,o)}},Room.prototype._join_newer=function(e){var t=this,o=t._newPeerConnection();t.peers[e.Data]={c:void 0,hasRSDP:!1,candidates:[]},t.peers[e.Data].c=o,t.stream&&o.addStream(t.stream),o.onaddstream=function(o){"function"==typeof t.handles.stream_add&&t.handles.stream_add(e.Data,o.stream,o)},o.onremovestream=function(o){"function"==typeof t.handles.stream_remove&&t.handles.stream_remove(e.Data,o)},o.onicecandidate=function(o){o.candidate&&t._signalSend({Room:t.id,From:t.me,To:e.Data,For:"icecandidate",Data:o.candidate})},o.oniceconnectionstatechange=function(i){"connected"===o.iceConnectionState&&"function"==typeof t.handles.peer_open&&t.handles.peer_open(e.Data,i),"completed"===o.iceConnectionState&&"function"==typeof t.handles.peer_open&&t.handles.peer_open(e.Data,i),"disconnected"===o.iceConnectionState&&"function"==typeof t.handles.peer_close&&t.handles.peer_close(e.Data,i),"closed"===o.iceConnectionState&&"function"==typeof t.handles.peer_close&&t.handles.peer_close(e.Data,i),"failed"===o.iceConnectionState&&"function"==typeof t.handles.peer_close&&t.handles.peer_close(e.Data,i)},o.onsignalingstatechange=function(){},o.ondatachannel=function(o){var i=o.channel;i.onopen=function(o){t.channels[e.Data]=i,"function"==typeof t.handles.channel_open&&t.handles.channel_open(e.Data,o)},i.onmessage=function(o){"function"==typeof t.handles.channel_message&&t.handles.channel_message(e.Data,o.data,o)},i.onclose=function(o){"function"==typeof t.handles.channel_close&&t.handles.channel_close(e.Data,o)}}};
/**
 * Widget Version
 *
 * @type {String}
*/
Yotpo.version = '2018-07-30_08-52-14';
/**
 * Yotpo hosts
 */
Yotpo.hosts = {"widget":{"dynamic":"w2.yotpo.com","static":"staticw2.yotpo.com"},"api":{"dynamic":"api.yotpo.com"},"b2b":{"dynamic":"my.yotpo.com"},"reviews_me":{"dynamic":"reviews.me"},"base":{"dynamic":"yotpo.com"}};

/**
 * Max batch methods per request
 */
Yotpo.maxBatchMethods = 50;

/**
 * All available Yotpo texts and thier translations
 *
 * @type {object} - Object of texts and translations
 */
Yotpo.texts = {
    read_more: 'Read More',
    read_less: 'Read Less',
    upload_photos_invalid_type: 'Files must be in JPG, PNG, or GIF formats',
    upload_photos_invalid_size: 'File size over 15MB',
    upload_photos_invalid_image_dimensions: 'Photos must be at least 400 x 400 px',
    upload_photos_invalid_image_file: 'Sorry, we werent able to upload your photo'
}

Yotpo.filterAndSearch = {
    filtered_reviews_title: 'Reviews',
    free_text_search_input_placeholder: 'Search Reviews',
    filters_drop_down_default_answer: 'All',
    sorts_drop_down_default_answer: 'Select',
    imagesMobileFilterDefaultAnswer: 'All Reviews',
    images_drop_down_answer: 'With Images &amp; Videos',
    show: 'Show',
    withImagesOnly: 'Images Only',
    filters_state_manager: {
        aggregators_types: {
            crfs: 'crfs',
            scores: 'scores',
            topics: 'topics',
            images: 'images',
            sorts: 'sorts',
            pictured: '',
            free_text_search: 'free_text_search'
        }
    }
}

Yotpo.defaultImages = {
    size_180: "http://staticw2.yotpo.com/assets/default_image_180px.jpg",
    size_656: "http://staticw2.yotpo.com/assets/default_image_656px.jpg",
    profile: "http://staticw2.yotpo.com/assets/default_profile.png"
}

/**
 * Share links for all social networks
 */
Yotpo.socialData = {
    facebook: {
        application_id: "226132034107547",
        consumer_secret: "",
        feed_link: "https://www.facebook.com/dialog/feed"
    },
    twitter: {
        intent_link: "https://twitter.com/intent/tweet"
    },
    google: {
        share_link: "https://plus.google.com/share"
    },
    linkedin: {
        share_link: "https://www.linkedin.com/shareArticle"
    }
}

Yotpo.feature_testing_groups = {}


Yotpo.awsS3Domain = "s3.amazonaws.com"
/**
 * Print a message to the console
 *
 * @param message - message to print to log (string)
 * @param logType - Type of logging to use
 */
Yotpo.safeConsole = function(message, logType){
};

//////////////////////////////////////////////////
/////////////// Yotpo Initiation /////////////////
//////////////////////////////////////////////////

// NOTE!
// Don't declare any functions after this line of code
// this is the initialization of the Yotpo instance
if (typeof yotpo == 'undefined') {
    var yotpo = new Yotpo("VjYC1hjLHPTTjBOJGQajJPG9ZjLqy7OBx6uqubzH", {"account_settings":{"settings":{"customer_language":"en","account_logo":"https://cdn-yotpo-images-production.yotpo.com/Account/326578/43274631/thumb.png?1636395622","domain":"ledger.com","name":"http://www.ledger.com"}},"reviews":false,"testimonials":{"settings":{"default_tab":"site_tab","show_tab":"site_tab","display_free_text_filters":false}},"testimonials_tab":false,"questions_and_answers":false,"questions_and_answers_standalone":false,"vendor_review_creation":false,"language":"en","comments":{"settings":{"comments_visibility":"1"}},"async_create":{"settings":{}},"ads":{"settings":{}},"facebook_ads":{"settings":{"pixel_id":"0","init_pixel":"1","page_view":"1","purchase":"1"}},"show_social_links":false,"host":"static","css_custom_host":null,"direction":"ltr","reporting_end_points":["p.yotpo.com"],"close_button":false,"version":"2018-07-30_08-52-14","prevent_duplicate_reviews":false,"custom_fields_info":{},"widget_rich_snippet":{"settings":{}},"carousel_settings":{"settings":{}},"review_with_pictures":{"settings":{"main_widget_visible":"1","testimonials_visible":"1","number_of_pictures_per_review":10,"collection_enabled":true}},"visual_curation":false,"visual_carousel":false,"pictures_slider":false,"pictures_dedicated_page":false,"generic_gallery":false,"product_gallery":false,"shoppable_instagram":false,"load_only_widgets_on_page":false,"load_css_async":false,"ab_testing":false,"cookie_path":false,"upload_photos":false,"upload_videos":false,"video_support":{"settings":{"partner_id":"2673551","player_id":45073981,"ks":"djJ8MjY3MzU1MXwmyUbdgZYL9S9CPHsSiTNLl1ruIQvfvBxfuaWPbtWtJtWSPBrLHZAqlwLFCKi_XtptD6sVYdmJVAlSNma7d94P","metadata_profile_id":12534501,"player_version":""}},"new_main_widget_layout":false,"new_testimonials_widget_layout":false,"shoppers_say":{"settings":{"show":true,"title":"REVIEW HIGHLIGHTS","max_sentences_desktop":2,"max_sentences_mobile":1,"widget_font":"Open Sans","text_theme":"Dark","background_color":{"transparent":false,"color":"#E8F6FF"},"links_color":"#0084e9","stars_color":"#e7721b","text_colors":{"primary_color":"#051146","name_color":"#697090","more_reviews_link_color":"#37416b","more_reviews_links_hover":"#50587e"},"arrow_colors":{"color":"#0084e9","hover_color":"#0077d2"}}},"widget_v2":{"settings":{"read_only":"0","redis_cache_expires_in":"300","http_cache_expires_in":10800,"review_per_page":5,"date_format":"%m/%d/%y","reporting_domains":["p.yotpo.com"],"close_button":"0","version":null,"css_custom_host":null,"show_average_rating_digits":false,"display_vote_text":"0","disable_yotpo_logo_hyperlink":"0","display_crf_filters":false,"display_topic_filters":false,"better_performance_effective_date":"2019-02-02","display_free_text_filters":false,"reviews_display_names":{"order_properties":null,"order_custom_properties":null,"order_product_properties":null,"order_product_custom_properties":null,"product_properties":null,"product_specs_properties":null,"customer_properties":null,"customer_custom_properties":null},"display_orders_filters":false,"display_names":{"order_properties":null,"order_custom_properties":null,"order_product_properties":null,"order_product_custom_properties":null,"product_properties":null,"product_specs_properties":null,"customer_properties":null,"customer_custom_properties":null},"fetch_from_elastic":false,"disable_performance_section":"true","use_new_filter_and_search_outbound_service":false,"display_star_distribution":false}},"lightbox_new_design":false,"gallery_customizations":false,"add_to_cart":false,"bv_syndication":false,"disable_social_login":false,"gremlins_dev":{"settings":{"star_distribution":false,"widget_prod_controller":false,"holistic_widget_view_account":false,"reviews_view_service_enabled":true,"reviews_subject_release":false,"voice_search":false,"voice_search_lang":"en-US","reviews_view_orders_metadata":false,"reviews_view_bottomline_release":false,"reviews_view_cache_release":false,"macaroon_development_mode":false}},"grid_layout":false,"carousel_layout":false,"collage_layout":false,"widgets_data_requests":{"settings":{}},"disable_shopper_side_cookies":false});
    Yotpo.ready(function() {
        yotpo.init();
    });
}





